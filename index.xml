<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Jupiter çš„ä¸ªäººåšå®¢</title>
    <link>https://JupiterXue.github.io/</link>
    <description>Recent content on Jupiter çš„ä¸ªäººåšå®¢</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-ch</language>
    <lastBuildDate>Mon, 04 Nov 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://JupiterXue.github.io/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>æŠ•èµ„ä¸é‡åŒ–-ä»»åŠ¡7-é‡åŒ–å›æ’¤</title>
      <link>https://JupiterXue.github.io/posts/quant-whale-notes/task7-backtesting/</link>
      <pubDate>Mon, 04 Nov 2024 00:00:00 +0000</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/quant-whale-notes/task7-backtesting/</guid>
      
      <description>&lt;p&gt;ä¼ é€é—¨ï¼š&lt;a href=&#34;https://datawhalechina.github.io/whale-quant/#/./ch07_%E9%87%8F%E5%8C%96%E5%9B%9E%E6%B5%8B/ch07_%E9%87%8F%E5%8C%96%E5%9B%9E%E6%B5%8B&#34;&gt;ç¬¬ä¸ƒç« -é‡åŒ–å›æ’¤&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;æ€è€ƒ&#34;&gt;æ€è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;é‡åŒ–å›æµ‹æŒ‡æ ‡å¯åˆ†å››ä¸ªç»´åº¦ï¼Œå‡ ä¸ªå¸¸è§æŒ‡æ ‡å¦‚ä¸‹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ”¶ç›Š&lt;/strong&gt;ï¼šæ€»æ”¶ç›Š/ç´¯ç§¯æ”¶ç›Šç‡ï¼Œå¹´åŒ–æ”¶ç›Šç‡ï¼Œå¹³å‡æ”¶ç›Šç‡ï¼Œå¤æ™®æ¯”ç‡ï¼Œç´¢æè¯ºæ¯”ç‡&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¨³å®šæ€§&lt;/strong&gt;ï¼šæ³¢åŠ¨ç‡ï¼Œæœ€å¤§å›æ’¤ï¼Œå›æ’¤æ¢å¤æ—¶é—´ï¼Œæ”¶ç›Šæ›²çº¿ï¼Œæ”¶ç›Šåˆ†å¸ƒ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èƒœç‡&lt;/strong&gt;ï¼šèƒœç‡ï¼Œç›ˆäºæ¯”ï¼Œç›ˆåˆ©å› å­ï¼Œè¿ç»­äºæŸæ¬¡æ•°ï¼Œè¿ç»­ç›ˆåˆ©æ¬¡æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é£é™©&lt;/strong&gt;ï¼šæœ€å¤§å›æ’¤ï¼Œæœ€å¤§å›æ’¤æ¯”ç‡ï¼Œæ¡ä»¶é£é™©ä»·å€¼ï¼Œé¢„æœŸäºæŸï¼ŒBetaç³»æ•°ï¼ŒAlphaç³»æ•°ï¼Œä¿¡æ¯æ¯”ç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç»¼åˆè€ƒé‡å‡ ä¸ªæˆ–ä»ä¸åŒç»´åº¦è€ƒé‡é‡åŒ–å›æ’¤çš„æŒ‡æ ‡ï¼Œå¯ä»¥è¯†åˆ«å¤§éƒ¨åˆ†&lt;strong&gt;é‡‘èæŠ•èµ„è¯ˆéª—&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰‹å†™é‡åŒ–å›æµ‹æ¡†æ¶&lt;/strong&gt;ï¼Œç›®çš„åœ¨äºé€ é€‚åˆè‡ªå·±çš„è½®å­ï¼Œç®€åŒ–å¹¶å¼ºåŒ–ç­–ç•¥ç¼–å†™è¿‡ç¨‹ï¼Œæœ€ç»ˆç›´æ¥å¯¹æ¥åˆ°æ¨¡æ‹Ÿç›˜ä¸å®ç›˜å½“ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç¬”è®°&#34;&gt;ç¬”è®°&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;é‡åŒ–å›æµ‹åŸºç¡€æŒ‡æ ‡ï¼Œç†Ÿç»ƒæŒæ¡ï¼šå¹´åŒ–æ”¶ç›Šç‡ã€åŸºå‡†å¹´åŒ–æ”¶ç›Šç‡ã€æœ€å¤§å›æ’¤ã€‚&lt;/li&gt;
&lt;li&gt;å¸¸è§éª—å±€
&lt;ul&gt;
&lt;li&gt;â€œèƒœç‡â€ç¡®å®šç­–ç•¥å¥½åæ˜¯éå¸¸ä¸šä½™ä¸”ä¸å¯é æ–¹æ³•&lt;/li&gt;
&lt;li&gt;åªçœ‹å¹´åŒ–æ”¶ç›Šä¹Ÿä¸å¯¹å¿½ç•¥äº†æ³¢åŠ¨é£é™©æƒ…å†µï¼ˆæœ€å¤§å›æ’¤ï¼‰&lt;/li&gt;
&lt;li&gt;ç”¨å‘¨æ”¶ç›Šç‡æ¥è®¡ç®—å¤æ™®æ¯”ï¼Œè€Œä¸æ˜¯æ—¥æ”¶ç›Šç‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é‡åŒ–å›æµ‹å››ä¸ªç»´åº¦ï¼šæ”¶ç›Šã€ç¨³å®šæ€§ã€èƒœç‡ã€é£é™©ã€‚&lt;/li&gt;
&lt;li&gt;å‡€å€¼æ›²çº¿ï¼šä¸€ç»„æ—¶é—´åºåˆ—æ›²çº¿ï¼Œè¡¨ç¤ºä¸ºè‚¡ç¥¨æˆ–åŸºé‡‘åœ¨ä¸åŒæ—¶é—´çš„ä»·å€¼ç›¸å¯¹äºæœŸåˆçš„ä»·å€¼å€æ•°ã€‚&lt;/li&gt;
&lt;li&gt;å¹´åŒ–æ”¶ç›Šï¼šç›´è§‚ç†è§£ï¼Œå‡è®¾æŒ‰æŸç§ç›ˆåˆ©èƒ½åŠ›ï¼Œæ¢ç®—æˆä¸€å¹´çš„æ”¶ç›Šèƒ½æœ‰å¤šå°‘ã€‚ä½†ä¸èƒ½ç”¨å•æœˆçš„ç›´æ¥æ¨ç®—ä¸€å¹´çš„ï¼Œå¿½ç•¥äº†æ³¢åŠ¨æ€§ã€‚&lt;/li&gt;
&lt;li&gt;æ³¢åŠ¨ç‡ï¼šæ–¹å·®è¡¨ç¤ºï¼Œå¹´æ³¢åŠ¨ç‡=ç­–ç•¥æ”¶ç›Šå’Œæ— é£é™©æ”¶ç›Šçš„æ ‡å‡†å·®é™¤ä»¥å…¶å‡å€¼ï¼Œå†é™¤ä»¥äº¤æ˜“æ—¥å€’æ•°çš„å¹³æ–¹æ ¹ï¼Œäº¤æ˜“æ—¥å–252å¤©ã€‚&lt;/li&gt;
&lt;li&gt;æœ€å¤§å›æ’¤ï¼šé€‰å®šå‘¨æœŸä»»æ„å†å²æ—¶ç‚¹å¾€åæ¨ï¼Œäºæœ€ä½ç‚¹æ—¶çš„æ”¶ç›Šç‡å›æ’¤å¹…åº¦çš„æœ€å¤§å€¼ã€‚åœ°ä½æ¯”æ³¢åŠ¨ç‡è¿˜é‡è¦ã€‚&lt;/li&gt;
&lt;li&gt;Alphaç³»æ•°å’ŒBetaç³»æ•°ï¼šBeta ä»£è¡¨ç³»ç»Ÿé£é™©ï¼ŒAlpha éç³»ç»Ÿé£é™©ï¼ŒæŠ•èµ„è€…è·å¾—äºå¸‚åœºæ³¢åŠ¨æ— å…³çš„å›æŠ¥ã€‚&lt;/li&gt;
&lt;li&gt;å¤æ™®æ¯”ï¼ˆSharpe ratioï¼‰ï¼šæ¯æ‰¿å—ä¸€å•ä½æ€»é£é™©ï¼Œäº§ç”Ÿå¤šå°‘è¶…é¢æŠ¥é…¬ï¼Œæ¯”ç‡è¶Šé«˜è¶Šå¥½ã€‚&lt;/li&gt;
&lt;li&gt;ä¿¡æ¯æ¯”ï¼šç±»ä¼¼å¤æ™®æ¯”ç‡ï¼Œä½†å‚ç…§åŸºå‡†ä¸æ˜¯æ— é£é™©æ”¶ç›Šç‡ï¼Œæ˜¯ç­–ç•¥çš„å¸‚åœºåŸºå‡†æ”¶ç›Šç‡ã€‚&lt;/li&gt;
&lt;li&gt;é‡åŒ–å›æµ‹å¹³å°ï¼šèšå®½-å›¾æ ‡ä¸°å¯Œï¼ˆhttps://www.joinquant.com/ï¼‰ï¼ŒBacktrader-å­¦æœ¯é£ã€åŸºç¡€æ•°æ®æ¥æº tushare ï¼ˆ &lt;a href=&#34;https://www.backtrader.com&#34;&gt;https://www.backtrader.com&lt;/a&gt;ï¼‰ï¼ŒBigQuant-å›¾æ ‡ä¸°å¯Œæ˜äº®ï¼ˆhttps://bigquant.com/ï¼‰&lt;/li&gt;
&lt;li&gt;æ‰‹å†™å›æµ‹æ¡†æ¶
&lt;ul&gt;
&lt;li&gt;ç›®çš„ï¼šé¿å…é‡å¤é€ è½®å­ï¼Œç®€åŒ–ç­–ç•¥å›æµ‹ï¼Œä¸‰æ–¹æ¡†æ¶è¿‡é‡è¿‡ç¨‹ç¹çï¼ˆvnpyï¼‰&lt;/li&gt;
&lt;li&gt;ä¼˜ç‚¹ï¼šæ— é¡»é¢å¤–ä¾èµ–ï¼Œæ¡†æ¶ç®€å•ï¼Œç­–ç•¥ç¼–å†™ç®€å•&lt;/li&gt;
&lt;li&gt;è§£å†³ç—›ç‚¹ï¼šä¸ç”¨æ‰‹å†™å›æµ‹ç»“æœï¼Œå°è£…å¸¸ç”¨æŠ€æœ¯æŒ‡æ ‡ï¼Œä¾¿äºä¼˜åŒ–ç­–ç•¥ï¼Œå¯ç›´æ¥å¯¹æ¥æ¨¡æ‹Ÿç›˜ã€å®ç›˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
      
    </item>
    
    <item>
      <title>æŠ•èµ„ä¸é‡åŒ–-ä»»åŠ¡6-é‡åŒ–è°ƒä»“</title>
      <link>https://JupiterXue.github.io/posts/quant-whale-notes/task6-select-time/</link>
      <pubDate>Thu, 31 Oct 2024 00:00:00 +0000</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/quant-whale-notes/task6-select-time/</guid>
      
      <description>&lt;p&gt;ä¼ é€é—¨ï¼š&lt;a href=&#34;https://datawhalechina.github.io/whale-quant/#/./ch06_%E9%87%8F%E5%8C%96%E8%B0%83%E4%BB%93%E7%AD%96%E7%95%A5/ch06_%E9%87%8F%E5%8C%96%E8%B0%83%E4%BB%93%E7%AD%96%E7%95%A5&#34;&gt;ç¬¬å…­ç« -é‡åŒ–è°ƒä»“&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;æ€è€ƒ&#34;&gt;æ€è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœè¯´é‡åŒ–æ‹©æ—¶æ˜¯è¿›æ”»ï¼Œé‚£ä¹ˆ&lt;strong&gt;é‡åŒ–è°ƒä»“å°±æ˜¯é˜²å®ˆ&lt;/strong&gt;ã€‚é‡åŒ–è°ƒä»“å¯ä»¥è¯´æ˜¯æŠ•èµ„ä¸­ä¸»åŠ¨æ€§æ›´å¤§çš„ä¸€ä¸ªç¯èŠ‚ï¼Œæ›´å¤šçš„è€ƒè™‘ä¸æ˜¯è¶…é¢æ”¶ç›Šè€Œæ˜¯&lt;strong&gt;é™ä½é£é™©&lt;/strong&gt;ï¼Œå› æ­¤ä¼šç”¨åˆ°ä¸€äº›å¸¸è§çš„æ–¹æ³•æ¥è¡¡é‡é£é™©æƒ…å†µã€‚&lt;/li&gt;
&lt;li&gt;å¸¸è§è¡¡é‡é£é™©æ–¹æ³•æœ‰ï¼šæ–¹å·®ä¸æ ‡å‡†å·®æ¥åˆ¤æ–­æ³¢åŠ¨æ€§ï¼ŒBetaç³»æ•°åˆ¤æ–­ç›¸å¯¹å¸‚åœºæ³¢åŠ¨æ€§ï¼ŒVaR è¡¡é‡æœ€å¤§é¢„æœŸæŸå¤±ï¼ŒCVaR è¡¡é‡æç«¯é£é™©æŸå¤±å‡å€¼ã€‚&lt;/li&gt;
&lt;li&gt;å…³äºæœ‰æ•ˆå‰æ²¿å’Œèµ„æœ¬å¸‚åœºçº¿ï¼Œè¿™ä¸ªæ¨¡å—å¸¦å…¥å¤ªè¿‡ç”Ÿç¡¬ï¼Œå•çº¯è®²æ¦‚å¿µè«åå…¶å¦™ï¼Œä¸çŸ¥é“ç”¨åœ¨ä»€ä¹ˆåœºæ™¯ï¼Œä»€ä¹ˆæ—¶å€™ç”¨ã€‚æœªæ¥é‡åˆ°ç±»ä¼¼é—®é¢˜å†å›å¤´çœ‹ã€‚&lt;/li&gt;
&lt;li&gt;CAPM æ¨¡å‹ï¼Œè®¡ç®—äº†ç†è®ºä¸Šçš„æŠ•èµ„ç»„åˆæ”¶ç›Šç‡ï¼Œå› Aè‚¡ç§ç±»æ•°é‡å¤§ï¼Œå¯¼è‡´è®¡ç®—é‡å·¨å¤§ï¼Œå¼•å‡ºåç»­å›æµ‹ç« èŠ‚å› å­æ¨¡å‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç¬”è®°&#34;&gt;ç¬”è®°&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å¸¸è§è¡¡é‡æŠ•èµ„ç»„åˆé£é™©çš„æ–¹æ³•ï¼š
&lt;ul&gt;
&lt;li&gt;æ–¹å·®å’Œæ ‡å‡†å·®ï¼Œè¡¡é‡æ³¢åŠ¨æ€§ï¼Œè¶Šå¤§æ•°æ®åˆ†å¸ƒè¶Šåˆ†æ•£ï¼Œåä¹‹è¶Šé›†ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;Beta ç³»æ•°ï¼Œ=åæ–¹å·®/æ–¹å·®ï¼Œè¡¡é‡ç›¸å¯¹äºå¸‚åœºæ•´ä½“æ³¢åŠ¨æŒ‡æ ‡ã€‚1æ³¢åŠ¨ç›¸åŒï¼Œå¤§äº1æ³¢åŠ¨å¤§äºå¸‚åœºæ•´ä½“æ³¢åŠ¨ï¼Œå°äº1å°äºå¸‚åœºæ•´ä½“æ³¢åŠ¨ã€‚&lt;/li&gt;
&lt;li&gt;Value at Risk(VaR)ï¼ŒLåˆ†å¸ƒå‡½æ•°&lt;/li&gt;
&lt;li&gt;Conditional Value at Risk(CVaR)ï¼Œè¡¡é‡VaRæŸå¤±è¶…è¿‡ä¸€å®šé˜ˆå€¼çš„å¹³å‡æŸå¤±ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æœ€ä¼˜æ–¹æ³•è®¡ç®—æœ€ä½³ä»“ä½ï¼šç­‰æƒé‡ï¼Œå¸‚å€¼åŠ æƒï¼Œæœ€å°æ–¹å·®ç»„åˆï¼Œæœ€å¤§åˆ†æ•£åº¦ï¼Œé£é™©å¹³ä»·ï¼Œå‡å€¼æ–¹å·®ä¼˜åŒ–ï¼Œå¼•å…¥å¸¸è§çº¦æŸï¼ˆä½†èµ„äº§æƒé‡èŒƒå›´é™åˆ¶ï¼Œåšç©ºé™åˆ¶ï¼Œè¡Œä¸šä¸­æ€§åŒ–ï¼Œé£é™©æ•å£é™åˆ¶ï¼‰&lt;/li&gt;
&lt;li&gt;å…³äºæœ‰æ•ˆå‰æ²¿ä¸èµ„æœ¬å¸‚åœºçº¿çš„å‡ ä¸ªå…³é”®è¯ï¼šæ•ˆç”¨å‡½æ•°ï¼Œæ— å·®å¼‚æ›²çº¿ï¼Œæœ‰æ•ˆå‰æ²¿ï¼Œèµ„äº§é…ç½®çº¿ã€‚&lt;/li&gt;
&lt;li&gt;MPT ç°ä»£èµ„äº§ç»„åˆç†è®ºï¼Œé‡ç‚¹
&lt;ul&gt;
&lt;li&gt;ç”¨æ–¹å·®è¡¡é‡é£é™©&lt;/li&gt;
&lt;li&gt;é€šè¿‡èµ„äº§ç»„åˆé…ç½®é™ä½é£é™©ã€ä¸­å’Œæ”¶ç›Š&lt;/li&gt;
&lt;li&gt;æœ‰æ•ˆå‰æ²¿åœ¨è¯¸å¤šé£é™©èµ„äº§ä¸Šé…ç½®èµ„äº§ç»„åˆè¾¾åˆ°æœ€å¥½æƒ…å†µï¼Œå¸‚åœºç»„åˆæ˜¯å…¶ä¸­æŠ•èµ„æ•ˆç‡æœ€é«˜çš„èµ„äº§ç»„åˆ&lt;/li&gt;
&lt;li&gt;èµ„æœ¬å¸‚åœºå…ˆæ˜¯åŠ å…¥æ— é£é™©èµ„äº§ä¹‹åèƒ½é…ç½®å‡ºæ¥æ”¶ç›Š-é£é™©ç‰¹å¾çš„è¾¹ç•Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;CAPM æ¨¡å‹å‡è®¾æŠ•èµ„è€…éƒ½æ˜¯é£é™©åŒæ¶æƒ…å†µä¸‹ï¼Œå¦‚æœæŸæŠ•èµ„æ ‡çš„æœ‰æ›´å¤šæ”¶ç›Šï¼Œé‚£ä¹ˆä¼šæ‰¿æ‹…æ›´å¤šé£é™©ï¼Œå¹¶ä¸”æ”¶ç›Šå’Œé£é™©æ»¡è¶³å…¬å¼æ‰€æè¿°çš„çº¿æ€§å…³ç³»ã€‚&lt;/li&gt;
&lt;/ul&gt;</description>
      
    </item>
    
    <item>
      <title>æŠ•èµ„ä¸é‡åŒ–-ä»»åŠ¡5-é‡åŒ–æ‹©æ—¶</title>
      <link>https://JupiterXue.github.io/posts/quant-whale-notes/task5-select-position/</link>
      <pubDate>Wed, 30 Oct 2024 00:00:00 +0000</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/quant-whale-notes/task5-select-position/</guid>
      
      <description>&lt;p&gt;ä¼ é€é—¨ï¼š&lt;a href=&#34;https://datawhalechina.github.io/whale-quant/#/./ch05_%E9%87%8F%E5%8C%96%E6%8B%A9%E6%97%B6%E7%AD%96%E7%95%A5/ch05_%E9%87%8F%E5%8C%96%E6%8B%A9%E6%97%B6%E7%AD%96%E7%95%A5&#34;&gt;ç¬¬äº”ç« -é‡åŒ–æ‹©æ—¶&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;æ€è€ƒ&#34;&gt;æ€è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;é‡åŒ–æ‹©æ—¶ï¼Œæ—¶é—´ä½œä¸ºæŠ•èµ„çš„å…³é”®ï¼Œå†³å®šäº†æ˜¯å¦è¿›è¡Œä¹°å–ã€‚å…¶ä¸­æœ‰ä¸‰ä¸ªä¸»è¦æ—¶é—´é€‰æ‹©ï¼š&lt;strong&gt;å¸‚åœºæ•´ä½“æ‹©æ—¶ï¼Œæ¿å—è½®åŠ¨æ‹©æ—¶ï¼Œä¸ªè‚¡æ‹©æ—¶&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¸¸è§çš„æ‹©æ—¶æŒ‡æ ‡æ˜¯å‡çº¿ã€MACDã€RSIï¼Œå„æœ‰ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŒå‡çº¿&lt;/strong&gt;ï¼ŒçŸ­ï¼ˆ5ã€7ã€10ï¼‰ï¼Œä¸­ï¼ˆ20ã€30ã€60ï¼‰ï¼Œé•¿ï¼ˆ120ã€250ï¼‰ï¼Œä¼˜ç‚¹åœ¨äºå¯ä»¥ç¡®å®šè¶‹åŠ¿ï¼›ç¼ºç‚¹åœ¨äºå…·æœ‰æ»åæ€§ï¼Œé•¿çŸ­æœŸéš¾ä»¥æŠ‰æ‹©ï¼›æœªæ¥ä¼˜åŒ–æ–¹å‘åœ¨åŠ æƒå¹³å‡ã€ä¸é™äºæ”¶ç›˜ä»·ã€è‡ªé€‚åº”æ—¶é—´çª—å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MACD&lt;/strong&gt;ï¼Œ=DIFï¼ˆEMA12-EMA26ï¼‰-DEAï¼ˆEMA(DIF, 9)ï¼‰ï¼Œä¼˜ç‚¹åœ¨äºå•æŒ‡æ ‡æ˜“åˆ†æé€‚ç”¨äºä¸­é•¿æœŸèµ°åŠ¿ï¼Œå°¤å…¶åœ¨ä¸Šæ¶¨/ä¸‹è·Œä¹åŠ›æ—¶å‘å‡ºäº¤æ˜“ä¿¡å·ï¼›ç¼ºç‚¹åœ¨äºå•è¾¹è¶‹åŠ¿æŒ‡æ ‡ä¼šå¤±çµï¼Œæ”¶ç›Šä¸å¦‚æŒ‡æ•°æ”¶ç›Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RSI&lt;/strong&gt;ï¼Œ=100-(100/1+RS)ï¼Œå¤§äº70è¶…ä¹°ï¼Œå°äº30è¶…å–ï¼Œä¼˜ç‚¹åœ¨äºæ•æ‰çŸ­æœŸä¹°å–ç‚¹ï¼Œç¼ºç‚¹åœ¨äºå•è¾¹è¡Œæƒ…æˆ–å¸‚åœºå‰§çƒˆæ³¢åŠ¨æŒ‡æ ‡å¤±çœŸã€‚æœªæ¥ä¼˜åŒ–åœ¨äºå¤šæŒ‡æ ‡ç»“åˆï¼ŒåŠ¨æ€è°ƒæ•´å‘¨æœŸï¼Œç»“åˆæœºå™¨å­¦ä¹ ã€‚
&lt;ul&gt;
&lt;li&gt;RS=ä¸Šæ¶¨ä»·æ ¼å¹…åº¦çš„å¹³å‡å€¼/ä¸‹è·Œä»·æ ¼å¹…åº¦çš„å¹³å‡å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¿›é˜¶å…«ä¸ªæ‹©æ—¶æŒ‡æ ‡ï¼šè¶‹åŠ¿ã€HurstæŒ‡æ•°ã€SVMã€ç‰›ç†Šçº¿ã€SWARCHæ¨¡å‹ã€å¼‚å¸¸æŒ‡æ ‡ã€å¸‚åœºæƒ…ç»ªã€æœ‰æ•ˆèµ„é‡‘æ¨¡å‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç¬”è®°&#34;&gt;ç¬”è®°&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å®šä¹‰ï¼šæ ¹æ®é‡åŒ–æŒ‡æ ‡ï¼Œé€‰æ‹©ä¹°å–æ—¶æœºã€‚&lt;/li&gt;
&lt;li&gt;ä¸»è¦åˆ†ç±»ï¼šå¸‚åœºæ•´ä½“æ‹©æ—¶ã€æ¿å—è¡Œä¸šè½®åŠ¨æ‹©æ—¶ã€ä¸ªè‚¡æ‹©æ—¶&lt;/li&gt;
&lt;li&gt;ä¼˜ç‚¹ï¼šè¶…é«˜é¢æ”¶ç›Šï¼Œé™ä½é£é™©ã€‚&lt;/li&gt;
&lt;li&gt;ä¸»è¦ç›®æ ‡ï¼šè§‚å¯Ÿå’Œå®šä½å¸‚åœºçš„é•¿æœŸçŠ¶æ€åŒºé—´ï¼Œåœ¨å¤§æ¦‚ç‡ä¸‹é¢„æµ‹è¶‹åŠ¿ï¼Œæ•æ‰çŸ­æœŸæ‹ç‚¹ã€‚ä¸€èˆ¬é€‚åˆå¤§ç±»èµ„äº§é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;å¸¸è§æŒ‡æ ‡ï¼šå‡çº¿ã€MACDã€RSIã€‚&lt;/li&gt;
&lt;li&gt;è¿›é˜¶æŒ‡æ ‡ï¼š
&lt;ul&gt;
&lt;li&gt;è¶‹åŠ¿ï¼šMAã€MACDã€DMA&lt;/li&gt;
&lt;li&gt;HurstæŒ‡æ•°ï¼šåˆ†å½¢ï¼Œä¸‰ç§æ¨¡å¼ï¼ŒH=0.5éšæœºï¼Œ0.5&amp;lt;H&amp;lt;1 é•¿æœŸè®°å¿†ï¼Œ0&amp;lt;H&amp;lt;0.5 åˆ†çº¢å™ªå£°å‡å€¼å›å¤ï¼Œåªè¦ä¸ä¸º0.5 å¯ç”¨åçš„å¸ƒæœ—è¿åŠ¨ï¼ˆåˆ†å½¢å¸ƒæœ—ï¼‰æè¿°ã€‚&lt;/li&gt;
&lt;li&gt;SWARCHæ¨¡å‹ï¼šæµ·é€šè¯åˆ¸å®è§‚ç»æµæŒ‡æ ‡ï¼Œæè¿°è´§å¸ä¾›åº”é‡M2å’Œå¤§ç›˜èµ°åŠ¿å…³ç³»ã€‚&lt;/li&gt;
&lt;li&gt;å¼‚å¸¸æŒ‡æ ‡ï¼šå¤§ç›˜é¡¶ç‚¹æˆ–ä½ç‚¹å‡ºç°çš„å¼‚å¸¸æ•°æ®ï¼Œä¸»è¦æœ‰å¸‚åœºå™ªå£°ã€è¡Œä¸šé›†ä¸­åº¦å’Œå…´ç™»å ¡å‡¶å…†ã€‚&lt;/li&gt;
&lt;li&gt;å¸‚åœºæƒ…ç»ªï¼šæŠ•èµ„ä¿¡å¿ƒæŒ‡æ•°ï¼Œæƒ…ç»ªçƒ­çƒˆç§¯æå…¥å¸‚ï¼Œæƒ…ç»ªä½è¿·æ’¤å‡ºå¸‚åœºã€‚&lt;/li&gt;
&lt;li&gt;SVMï¼šSVM æ¨¡å¼è¯†åˆ«å¤§ç›˜ï¼Œåˆ†ä¸ºå‡ ä¸ªæ˜æ˜¾æ¨¡å¼ï¼Œæ‰¾å‡ºç‰¹å¾ï¼Œç”¨å†å²æ•°æ®å­¦ä¹ æ¨¡å‹æ¥é¢„æµ‹èµ°åŠ¿ã€‚&lt;/li&gt;
&lt;li&gt;æœ‰æ•ˆèµ„é‡‘æ¨¡å‹ï¼šé¡¶éƒ¨å’Œåº•éƒ¨èµ„é‡‘ç”±é¢å¤–æ¨åŠ›ï¼ŒEMS &amp;gt; 0ï¼Œä¸»åŠ¨ä¹°å¤šï¼Œçœ‹å¥½åå¸‚ã€‚EMS &amp;lt; 0ï¼Œä¸»åŠ¨å–å¤šï¼Œä¸‹è·Œèµ„é‡‘æ‰€éœ€è¶Šå¤šï¼Œä¸‹è·Œé˜»åŠ›è¶Šå¤§ã€‚&lt;/li&gt;
&lt;li&gt;ç‰›ç†Šçº¿ï¼šå¹´çº¿250æ—¥çº¿å’Œå¤§ç›˜èµ°åŠ¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åŒå‡çº¿ï¼šGranvilleå…«å¤§ä¹°å–æ³•åˆ™ã€‚
&lt;ul&gt;
&lt;li&gt;åˆ†ç±»ï¼šçŸ­æœŸ5ã€7ã€10ï¼Œä¸­æœŸ20ã€30ã€60ï¼Œé•¿æœŸ 120ã€250&lt;/li&gt;
&lt;li&gt;ç¼ºé™·ï¼šæ»åã€é•¿çŸ­æœŸéš¾é€‰æ‹©&lt;/li&gt;
&lt;li&gt;ä¼˜åŒ–æ–¹å‘ï¼šç”¨åŠ æƒç§»åŠ¨å¹³å‡å€¼ï¼Œä¸é™äºæ”¶ç›˜ä»·ï¼Œè‡ªé€‚åº”è°ƒæ•´å‡çº¿å‘¨æœŸ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;MACDï¼š
&lt;ul&gt;
&lt;li&gt;çŸ­æœŸ EMA 12 å¤©ï¼Œé•¿æœŸ EMA 26 å¤©&lt;/li&gt;
&lt;li&gt;DIF=EMA12-EMA26ï¼ŒDEA=DIF EMAï¼ˆDIFï¼Œ9ï¼‰&lt;/li&gt;
&lt;li&gt;MACD DIF-DEA&lt;/li&gt;
&lt;li&gt;ä¼˜ç‚¹ï¼š&lt;/li&gt;
&lt;li&gt;ä¸¤æ¡çº¿è½¬æ¢æˆå•æŒ‡æ ‡ï¼Œå‡å°‘é¢‘å‘å‡ä¿¡å·ï¼Œé€‚ç”¨äºä¸­é•¿æœŸèµ°åŠ¿&lt;/li&gt;
&lt;li&gt;ä¸Šæ¶¨ä¹åŠ›ï¼Œèƒ½è¾ƒæ—©å‘å‡ºå–å‡ºä¿¡å·ï¼Œä¸‹è·Œåä¹‹å¦‚æ­¤ã€‚&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼šä¸Šæ¶¨è¡Œæƒ…ï¼Œæ”¶ç›Šä¸å¦‚è‚¡ç¥¨æŒ‡æ•°è‡ªèº«æ¶¨å¹…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
      
    </item>
    
    <item>
      <title>æŠ•èµ„ä¸é‡åŒ–-ä»»åŠ¡4-é‡åŒ–é€‰è‚¡</title>
      <link>https://JupiterXue.github.io/posts/quant-whale-notes/task4-select-stock/</link>
      <pubDate>Wed, 23 Oct 2024 00:00:00 +0000</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/quant-whale-notes/task4-select-stock/</guid>
      
      <description>&lt;p&gt;ä¼ é€é—¨ï¼š&lt;a href=&#34;https://datawhalechina.github.io/whale-quant/#/./ch04_%E9%87%8F%E5%8C%96%E9%80%89%E8%82%A1%E7%AD%96%E7%95%A5/ch04_%E9%87%8F%E5%8C%96%E9%80%89%E8%82%A1%E7%AD%96%E7%95%A5&#34;&gt;ç¬¬å››ç« -é‡åŒ–é€‰è‚¡&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;æ€è€ƒ&#34;&gt;æ€è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åŸºç¡€æœ‰æ•ˆå¸‚åœºç†è®ºæ¨¡å‹çš„è®¨è®ºå’Œç ”ç©¶ï¼ŒçŸ­æœŸå¸‚åœº3-5å¤©æ— æ³•é¢„æµ‹ä»·æ ¼ï¼Œé•¿æœŸ3-5å¹´å¯é¢„æµ‹èµ°åŠ¿ã€‚å¯ä»¥è¯´çŸ­æœŸçš„â€œå¸‚åœºå…ˆç”Ÿâ€è¡Œä¸ºå’Œé•¿æœŸçš„ä»·æ ¼-ä»·å€¼å‡å€¼å›å½’ã€‚å› æ­¤é‡åŒ–ä¼˜åŠ¿å°±æ˜¯åœ¨çŸ­æœŸå†…æ•æ‰åˆ°å¸‚åœºæ— æ•ˆçš„ä½ä»·æ ¼å’Œé•¿æœŸçœ‹ä½ä»·æ ¼å›å½’é«˜ä»·æ ¼çš„è‚¡ç¥¨ã€‚&lt;/li&gt;
&lt;li&gt;APT æ¨¡å‹è§£é‡Šäº†å¸‚åœºå›å½’å‡è¡¡çš„ä¸€ä¸ªå†³å®šå› ç´ ï¼Œå¥—åˆ©è¡Œä¸ºï¼Œå¦‚æœå¸‚åœºæœªè¾¾åˆ°å‡è¡¡çŠ¶æ€å¸‚åœºå°±æœ‰æ— é£é™©å¥—åˆ©æœºä¼šã€‚å•çœ‹å¥—åˆ©è¡Œä¸ºå¥½åƒæ²¡ä»€ä¹ˆï¼Œå•çº¯èµšï¼Œä½†å…¶æ ¸å¿ƒå’Œå¯¹å†²å¾ˆç›¸åƒã€‚å°±æ˜¯å¯»æ‰¾æ›´ä½é£é™©ï¼Œç”šè‡³é›¶é£é™©çš„é«˜æ”¶ç›Šçš„ç»„åˆï¼Œè€Œä¸æ˜¯å•ä¸€çš„çœ‹å¤šçœ‹ç©ºè¡Œä¸ºã€‚æ¯”å¦‚06å¹´4æœˆåˆ°07å¹´2æœˆï¼Œè®¤æ²½è¡Œæƒä»·ã€è®¤è´­è¡Œæƒä»·å’Œå…¬å¸åˆ©ç›Šå½¢æˆäº†å¯¹å†²ï¼Œå½“æ—¶çš„äº”ç²®æ¶²ã€åŒ…é’¢è®¤è´­æƒè¯çš„èµ°åŠ¿å°±æ˜¯æ— é£é™©å¥—åˆ©è¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;2010å¹´äº¤æ˜“æ‰€æ¨å‡º level2ï¼Œå¯äº†è§£æ—¥å†…é«˜é¢‘è¡Œæƒ…ä¿¡æ¯ï¼Œæ˜¯ ALPHA å› å­ç ”ç©¶çš„é‡è¦æ•°æ®æ¥æºã€‚é«˜é¢‘æ•°æ®æœ‰æ›´é«˜æ•°æ®å¯†åº¦å’Œä¸åŒæ•°æ®ç»“æ„ï¼Œä½†ä¹Ÿå¯ä»¥å®šä¹‰ä¸ºæ—¶é—´åºåˆ—æ¥å¤„ç†ã€‚é™¤äº†å•æ—¥æ•°æ®é‡å¤§ï¼Œæ—¶é—´å•ä½å¯èƒ½ä¹Ÿä¸æ•´é½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç¬”è®°&#34;&gt;ç¬”è®°&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜é¢‘é‡åŒ–&lt;/strong&gt;å¤„ç†æ³¨æ„äº‹é¡¹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æ®µå¤„ç†&lt;/strong&gt;ã€‚å¾€å¾€æŒ‰è¡¨çš„æˆ–æŒ‰æ—¶é—´çª—å£åˆ’åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½é¢‘åŒ–&lt;/strong&gt;ã€‚å°†é—´éš”ä¸å‡åŒ€çš„æ—¶é—´åºåˆ—å˜ä¸ºå‡åŒ€æ—¶é—´é—´éš”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é—´çª—å£é¿å…è·¨äº¤æ˜“æ—¥&lt;/strong&gt;ã€‚é›†åˆç«ä»·å’Œéš”å¤œä¿¡æ¯ä¼šå¢åŠ éšæœºæ€§ï¼Œç»™æŠ½æ ·å¸¦æ¥å¹²æ‰°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å› å­ä¸­æ€§åŒ–ï¼ˆæ­£äº¤åŒ–ï¼‰ï¼Œç”¨äºå‰”é™¤å·²æœ‰å¸¸è§å› å­å½±å“çš„æ–¹æ³•ã€‚å…·ä½“æ“ä½œä¸­ï¼š
&lt;ul&gt;
&lt;li&gt;å¸‚å€¼ä¸­æ€§åŒ–ï¼Œå¯¹å¸‚å€¼å–å¯¹æ•°ç„¶åè¿›è¡Œçº¿æ€§å›å½’&lt;/li&gt;
&lt;li&gt;è¡Œä¸šä¸­æ€§åŒ–ï¼Œå¯¹è¡Œä¸šå‡å€¼åšå·®å’Œå›å½’å–æ®‹å·®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¤šå› å­é€‰è‚¡æ¨¡å‹çš„æ ¸å¿ƒæ€æƒ³ï¼šé€šè¿‡å¤šä¸ªå› å­çš„ç»„åˆæ¥é€‰æ‹©è‚¡ç¥¨ï¼Œå› å­å¯ä»¥é€šè¿‡å†å²æ•°æ®æ¥è®¡ç®—ï¼Œç„¶åç”¨æ¥é¢„æµ‹æœªæ¥çš„è‚¡ç¥¨è¡¨ç°ï¼Œä»¥è·å–æ›´å…¨é¢æ›´ç¨³å®šçš„é¢„æµ‹ï¼ŒåŒ…æ‹¬ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸºæœ¬é¢å› å­&lt;/strong&gt;ï¼šå¸‚ç›ˆç‡PEã€å¸‚å‡€ç‡PBã€è¥æ”¶å¢é•¿&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŠ€æœ¯åˆ†æå› å­&lt;/strong&gt;ï¼šåŠ¨é‡ã€æ³¢åŠ¨ç‡&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®è§‚ç»æµå› å­&lt;/strong&gt;ï¼šåˆ©ç‡ã€é€šè´§è†¨èƒ€&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¤šå› å­æ¨¡å‹æ­¥éª¤
&lt;ol&gt;
&lt;li&gt;ç¡®å®šç›®æ ‡å’Œçº¦æŸæ¡ä»¶ã€‚ç›®æ ‡æ”¶ç›Šç‡ã€é£é™©æ°´å¹³ã€ç»„åˆæ•°ç›®é™åˆ¶ã€è¡Œä¸šæ¯”ä¾‹é™åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;é€‰æ‹©å› å­å¹¶è®¡ç®—ã€‚æ ¹æ®ç›®æ ‡å’Œçº¦æŸæ¡ä»¶ï¼Œé€‰æ‹©åˆé€‚å› å­ï¼Œå¦‚PEã€PBç­‰ã€‚&lt;/li&gt;
&lt;li&gt;å¼‚å¸¸å€¼å¤„ç†ã€‚æ£€æŸ¥æ•°æ®ä¸­å¼‚å¸¸å€¼å’ŒæŠ¥é”™æ•°æ®ï¼Œè¿›è¡Œå¤„ç†å’Œæ»¤é™¤ã€‚&lt;/li&gt;
&lt;li&gt;å› å­æ ‡å‡†åŒ–ã€‚ä¸åŒå› å­å–å€¼èŒƒå›´å·®å¼‚å¾ˆå¤§ï¼Œè¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼Œå¦‚å»å‡å€¼å’Œç¼©æ”¾ã€‚&lt;/li&gt;
&lt;li&gt;ç¡®å®šå› å­æƒé‡ã€‚é€šå¸¸ç”¨ç»Ÿè®¡æ–¹æ³•ï¼Œå¦‚ä¸»æˆåˆ†åˆ†ææ¥ç¡®å®šã€‚&lt;/li&gt;
&lt;li&gt;æ„å»ºå¤šå› å­æ¨¡å‹ã€‚ç»“åˆå› å­å€¼å’Œæƒé‡ï¼Œå»ºç«‹è¯„åˆ†æ¨¡å‹ã€‚&lt;/li&gt;
&lt;li&gt;è‚¡ç¥¨ç­›é€‰å’Œç»„åˆä¼˜åŒ–ã€‚æ ¹æ®è¯„åˆ†ç­›é€‰è‚¡ç¥¨ï¼Œå¹¶è¿›è¡Œç»„åˆä¼˜åŒ–ï¼Œè·å¾—ç¬¦åˆç›®æ ‡å’Œçº¦æŸæ¡ä»¶çš„ç»„åˆã€‚&lt;/li&gt;
&lt;li&gt;å›æµ‹å’Œè°ƒæ•´æ¨¡å‹ã€‚ç”¨å†å²æ•°æ®å›æµ‹å¤šå› å­æ¨¡å‹æ•ˆæœï¼Œæ ¹æ®ç»“æœè°ƒæ•´å’Œæ”¹è¿›ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
      
    </item>
    
    <item>
      <title>æŠ•èµ„ä¸é‡åŒ–-ä»»åŠ¡3-è·å–æ•°æ®</title>
      <link>https://JupiterXue.github.io/posts/quant-whale-notes/task3-get_data/</link>
      <pubDate>Tue, 22 Oct 2024 00:00:00 +0000</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/quant-whale-notes/task3-get_data/</guid>
      
      <description>&lt;p&gt;ä¼ é€é—¨ï¼š&lt;a href=&#34;https://datawhalechina.github.io/whale-quant/#/./ch03_%E8%82%A1%E7%A5%A8%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/ch03_%E8%82%A1%E7%A5%A8%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96&#34;&gt;ç¬¬ä¸‰ç« -è·å–æ•°æ®&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;æ€è€ƒ&#34;&gt;æ€è€ƒ&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;è·å–æ•°æ® BaoStockã€‚ä¸»è¦ç»ƒä¹ ä»¥ Python å¼€æºé‡‘èæ•°æ®åˆ†æåŒ… BaoStock æ¥è·å–æ•°æ®ï¼Œå¼€å¯é‡åŒ– coding ç¬¬ä¸€æ­¥ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®å¤„ç† Pandasã€‚å¼€æºçš„é‡‘èæ•°æ®ç±»å‹å‡ ä¹éƒ½è§£æä¸º Pandas æ ¼å¼æ•°æ®ç±»å‹ï¼Œä¾¿äºå¤„ç†å’Œåˆ†æã€‚æ³¨æ„åŒºåˆ†Series å’Œ Dataframesï¼Œtype æŸ¥è¯¢å…¶ç±»å‹ï¼Œæ—¶é—´ç±»å‹æœ‰ä¸“é—¨çš„ï¼Œç´¢å¼•éå¸¸é‡è¦è¦é‡è§†ï¼Œjoinå¯åšæ•°æ®è§†å›¾ï¼Œboolå¯è§‚å¯Ÿå¯ä½œæ¡ä»¶&lt;/li&gt;
&lt;li&gt;æœ¬ç« ä»¥ä»£ç åŸºç¡€ç»ƒä¹ ä¸ºä¸»ï¼Œæ¢³ç†é‡ç”¨çš„æ–¹æ³•å’Œæ•°æ®ç±»å‹ï¼Œæ›´å¥½çš„æ–¹å¼è¿˜æ˜¯åˆ°ç±»ä¼¼èšå®½çš„é‡‘èå¹³å°å»ä½œä¸€ä¸ªå®Œæ•´çš„ demoï¼Œè·‘å‡ºè·å–æ•°æ®+å‡çº¿ç³»ç»Ÿ+ç»˜å›¾+å›æµ‹ï¼ˆå¹³å°å·²è‡ªå¸¦ï¼‰ã€‚ç®—æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç»ƒä¹ ã€‚ï¼ˆè¯»å®Œä¸€éèšå®½å…¥é—¨é‡åŒ–çš„æ–‡ç« æ‰å‘ç°ï¼Œåƒé€åŒå‡çº¿ç­–ç•¥æ˜¯èµ°å‡ºæ–°æ‰‹æ‘çš„å››ä¸ªä»»åŠ¡ä¹‹ä¸€ï¼Œæ‰€ä»¥è¿˜æ˜¯å¤šæ‰“å¥½åŸºç¡€ï¼‰&lt;/li&gt;
&lt;li&gt;å…³äºè·å–æ•°æ®ï¼Œèšå®½æœ‰ä¸€æ–‡ç« ä¸“é—¨è®²è§£ï¼š&lt;a href=&#34;https://www.joinquant.com/view/community/detail/c688e86342b472f380c8fb9fc58eec54&#34;&gt;è·å–æ•°æ®-èšå®½&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;â€œæŸäº›çŸ¥è¯†ç‚¹å¿˜äº†å¾ˆæ­£å¸¸ï¼Œå›å¤´å†çœ‹å°±è¡Œï¼Œç”¨ä»€ä¹ˆå»å­¦ä»€ä¹ˆå­¦ä¹ æ•ˆç‡æ›´é«˜ã€‚â€å¼•ç”¨èšå®½æ–‡ç« ï¼Œä¸ªäººè®¤ä¸ºæ›´é‡è¦çš„æ˜¯ï¼Œäº†è§£æœ‰ä»€ä¹ˆçŸ¥è¯†ï¼Œå»ºç«‹ç´¢å¼•ï¼ˆåšç¬”è®°æˆ–è®°å·ï¼‰ï¼Œä¸‹æ¬¡å†é‡åˆ°ç±»ä¼¼é—®é¢˜çš„æ—¶å€™é€šè¿‡ç´¢å¼•æ‰¾åˆ°çŸ¥è¯†ç„¶åç”¨èµ·æ¥ã€‚ä¸€ä¸ªæŸ¥ç†èŠ’æ ¼çš„éšå–»è¯´çš„å¥½ï¼šåœ¨æ‹¿é”¤å­çš„äººçœ¼é‡Œï¼Œå…¨ä¸–ç•Œéƒ½æ˜¯é’‰å­ã€‚å­¦ä¹ çš„ç›®çš„å°±æ˜¯å¦‚æ­¤ï¼Œé¿å…æ‰‹é‡Œå’Œçœ¼é‡Œåªæœ‰ä¸€ä¸ªâ€œé”¤å­â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;æ‹“å±•&#34;&gt;æ‹“å±•&lt;/h1&gt;
&lt;p&gt;ä»¥ä¸‹ä¸ºåœ¨æœ¬ç« åŸºç¡€ä¸Šçš„å…¶ä»–å­¦ä¹ è¡¥å……ï¼šæ¥æºèšå®½åšå®¢å­¦ä¹ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å›æµ‹&lt;/strong&gt;ï¼šè®©è®¡ç®—æœºæ ¹æ®ä¸€æ®µæ—¶é—´å†å²æ•°æ®æ¨¡æ‹Ÿæ‰§è¡Œç­–ç•¥ï¼Œæ ¹æ®ç»“æœè¯„ä»·å¹¶æ”¹è¿›ç­–ç•¥ã€‚ä»£ç å±‚é¢æ¥è®²ï¼Œå°±æ˜¯ç”¨ä¸€æ®µæ—¶é—´å†å²çœŸå®è¡Œæƒ…æ•°æ®æ¥éªŒè¯ä¸€ä¸ªç¡®å®šçš„äº¤æ˜“ç­–ç•¥åœ¨è¿™æ®µæ—¶é—´å†…è¡¨ç°å¦‚ä½•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡æ‹Ÿäº¤æ˜“&lt;/strong&gt;ï¼šè®©è®¡ç®—æœºæ ¹æ®å®é™…è¡Œæƒ…æ¨¡æ‹Ÿæ‰§è¡Œè¯¥ç­–ç•¥ä¸€æ®µæ—¶é—´ï¼Œæ ¹æ®ç»“æœè¯„ä»·å¹¶æ”¹è¿›ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;æ›´&lt;strong&gt;å®¢è§‚çš„è¯„ä¼°ç­–ç•¥æŒ‡æ ‡&lt;/strong&gt;ï¼šå¹´åŒ–æ”¶ç›Šç‡ã€æœ€å¤§å›æ’¤ç‡ã€å¤æ™®æ¯”ç‡ã€‚&lt;/li&gt;
&lt;li&gt;è¿è¡Œå›æµ‹ï¼Œæ‰§è¡Œå›æµ‹å¹¶å¾—åˆ°ç»“æœï¼Œå›æµ‹ç»“æœï¼šæ”¶ç›Šç‡ã€å¹´åŒ–æœ€å¤§æ”¶ç›Šç‡ã€æœ€å¤§å›æ’¤ã€å¤æ™®æ¯”ç‡ã€ä¸‹å•è®°å½•ã€æŒä»“è®°å½•ã€‚&lt;/li&gt;
&lt;li&gt;ç¼–è¯‘è¿è¡Œï¼Œç®€åŒ–ç‰ˆè¿è¡Œå›æµ‹ï¼Œåªæœ‰æ”¶ç›Šç‡ï¼Œé€Ÿåº¦æ›´å¿«ã€‚&lt;/li&gt;
&lt;li&gt;å¸¸ç”¨ä¸‹å•å‡½æ•°ï¼š
&lt;ul&gt;
&lt;li&gt;order(code, amount) ä¹°ä¸€å®šæ•°é‡è‚¡ç¥¨&lt;/li&gt;
&lt;li&gt;order_target(code, amount) è‚¡ç¥¨è°ƒä»“ï¼Œé«˜äºå–å‡ºï¼Œä¸é«˜ä¸ä½å°±ä¸åŠ¨&lt;/li&gt;
&lt;li&gt;order_value(code, value)ä¹°å–ä¸€å®šä»·å€¼é‡ã€‚&lt;/li&gt;
&lt;li&gt;order_target_valueï¼Œè‚¡ç¥¨è°ƒä»“è‡³ä¸€å®šä»·å€¼é‡ã€‚&lt;/li&gt;
&lt;li&gt;contentï¼šå­˜å‚¨å½“å‰ç­–ç•¥è¿è¡Œæ—¶é—´ç‚¹ã€æŒæœ‰è‚¡ç¥¨åŠå…¶æ•°é‡ã€æŒä»“æˆæœ¬ï¼Œä¸€äº›å¸¸ç”¨&lt;/li&gt;
&lt;li&gt;å½“å‰æ—¶é—´ context.current_dt&lt;/li&gt;
&lt;li&gt;å½“å‰æ—¶é—´æ ¼å¼åŒ–ï¼šcontext.current_dt.strftime(&amp;quot;%Y-%m-%d&amp;quot;)&lt;/li&gt;
&lt;li&gt;å‰ä¸€ä¸ªäº¤æ˜“æ—¥ï¼šcontext.previous_date&lt;/li&gt;
&lt;li&gt;å½“å‰å¯ç”¨é‡‘ï¼šcontext.portfolio.positions_value&lt;/li&gt;
&lt;li&gt;ç´¯è®¡æ”¶ç›Š context.portfolio.returns&lt;/li&gt;
&lt;li&gt;å½“å‰æŒæœ‰è‚¡ç¥¨ context.portfolio.positions.keys()&lt;/li&gt;
&lt;li&gt;å½“å‰æŒæœ‰æŸè‚¡ç¥¨çš„å¼€ä»“å‡ä»·ï¼šcontext.portfolio.positions[&amp;lsquo;code&amp;rsquo;].avg_cost&lt;/li&gt;
&lt;li&gt;æŸè‚¡ç¥¨å½“å‰ç°ä»·ï¼šcontext.portfolio.positions[&amp;lsquo;code&amp;rsquo;].price&lt;/li&gt;
&lt;li&gt;å½“å‰æŒæœ‰æŸè‚¡ç¥¨çš„å¯å–æŒä»“é‡ï¼šcontext.portfolio.positions[&amp;lsquo;code&amp;rsquo;.closeable_amount&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ­¢æŸ&lt;/strong&gt;ï¼šç‹­ä¹‰æ˜¯äºæŸä¸€å®šå¹…åº¦ä¸‹å•å–å‡ºï¼Œå‡å°‘è¿›ä¸€æ­¥äºæŸã€‚å¹¿ä¹‰æ­¢æŸåœ¨æ€è·¯ä¸Šè¡ç”Ÿå¤æ‚çš„å‡å°‘äºæŸæ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;æœ€å¤§å›æ’¤è¶Šå°è¶Šå¥½&lt;/li&gt;
&lt;li&gt;è¶³å¤Ÿå¤šçš„äº¤æ˜“æ¬¡æ•°è®©å›æµ‹ç»“æœæ›´æœ‰è¯´æœåŠ›ï¼Œä¸èƒ½ç›´æ¥çœ‹åˆ°ï¼Œå¯é€šè¿‡ç›ˆåˆ©æ¬¡æ•°ä¸äºæŸæ¬¡æ•°ç›¸åŠ å¾—åˆ°ï¼Œæˆ–æ¯æ—¥ä¹°å–å¤§è‡´çœ‹å‡ºã€‚&lt;/li&gt;
&lt;li&gt;æœ‰æ•°ç†åŸºç¡€ï¼Œè¿›ä¸€æ­¥å­¦ä¹  Alpha ä¸ Beta æ„é€ æ€è·¯ä¸è¿‡ç¨‹&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤æ™®æ¯”ç‡&lt;/strong&gt;ï¼Œå•ä½é£é™©æ”¶ç›Šï¼Œè¶Šå¤§è¶Šå¥½&lt;/li&gt;
&lt;li&gt;æœªæ¥å‡½æ•°ï¼Œç­–ç•¥åˆ©ç”¨äº†å†å²å½“æ—¶æ— æ³•å¾—åˆ°çš„ä¿¡æ¯ï¼Œé€ æˆå›æµ‹ç»“æœæå¤§å¤±çœŸã€‚ä¸€èˆ¬äººå·¥æ’æŸ¥ï¼Œæ³¨æ„æ—¶é—´ã€‚æ›´å¥½æ–¹æ³•æ˜¯ç”¨ç­–ç•¥å»ºç«‹æ¨¡æ‹Ÿäº¤æ˜“ï¼Œè¿è¡Œå‡ å¤©ï¼Œå¤šæ•°æœªæ¥å‡½æ•°é—®é¢˜éƒ½èƒ½è¢«å‘ç°ã€‚æ¨¡æ‹Ÿäº¤æ˜“ä¸å¯èƒ½å¼•å…¥æœªæ¥æ•°æ®ï¼Œå¾€å¾€å¼•å…¥æœªæ¥å‡½æ•°çš„ç­–ç•¥éƒ½æ— æ³•æˆåŠŸè¿è¡Œæ¨¡æ‹Ÿäº¤æ˜“ã€‚&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­æ˜¯å¦å¼•å…¥æœªæ¥å‡½æ•°çš„ç»éªŒæ³•åˆ™ï¼šç­–ç•¥å›æµ‹æ”¶ç›Šç‡æé«˜ï¼Œå›æ’¤æä½ï¼Œä¸”å„ä¸ªæ—¶é—´æ®µè¡¨ç°ç‰¹åˆ«å¥½ï¼Œä»¿ä½›å‘ç°äº†äº¤æ˜“åœ£æ¯ï¼Œæ­¤æ—¶å¤§æ¦‚ç‡å¼•å…¥äº†æœªæ¥å‡½æ•°&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.joinquant.com/help/api/help?name=api_old#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E2%99%A0&#34;&gt;enable_profile æ€§èƒ½åˆ†æ&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;å¤åˆ¶ç²˜è´´æ”¾åˆ°ç­–ç•¥ä»£ç çš„ç¬¬ä¸€è¡Œï¼Œå›æµ‹å°±æœ‰æ€§èƒ½åˆ†æç»“æœ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿‡æ‹Ÿåˆ&lt;/strong&gt;ï¼šå›æµ‹å¥½ï¼Œæ¨¡æ‹Ÿç›˜æˆ–å®ç›˜çƒ‚ï¼Œå¾ˆå¯èƒ½å‚æ•°è¿‡æ‹Ÿåˆã€‚
&lt;ul&gt;
&lt;li&gt;æ ¸å¿ƒæ€æƒ³ï¼šè¿‡åº¦ç»†è‡´åœ°è§£è¯»æ ·æœ¬æ•°æ®ï¼Œä»è€Œæ²¡æœ‰è®¤è¯†åˆ°æœ¬è´¨çš„è§„å¾‹ï¼Œä½¿ç­–ç•¥å¤±å»æ™®é€‚æ€§ï¼Œå¯¹åŸæœ¬æ•°æ®è¡¨ç°æä¸ºä¼˜å¼‚ï¼Œå¯¹éåŸæ ·æœ¬æ•°æ®å¤–æƒ…å†µæœ‰æ•ˆæ€§å¤§å¤§é™ä½ã€‚&lt;/li&gt;
&lt;li&gt;æ¡ˆä¾‹ï¼šèƒŒå·å­ç­”æ¡ˆæˆç»©æé«˜ï¼Œæ¢é¢˜ä¾æ—§çƒ‚&lt;/li&gt;
&lt;li&gt;é²æ£’æ€§ï¼šç­–ç•¥å¥½åå¯¹å‚æ•°å˜åŒ–çš„æ•æ„Ÿæ€§ã€‚å»ºè®®ï¼Œæ§åˆ¶å‚æ•°æ¢³ç†ï¼Œå¤šæµ‹å‡ ç»„å‚æ•°å¤§è‡´çœ‹ä¸‹å‚æ•°å˜åŒ–å¯¹ç­–ç•¥çš„å½±å“ï¼Œå¦å¤–è€ƒè™‘è¿›è¡Œæ ·æœ¬å¤–æ‰æ˜¯ï¼Œç”¨ä¸€ä»½æ ·æœ¬å›æµ‹æ‰€é€‰å‚æ•°ï¼Œå¦ä¸€ä»½æ ·æœ¬æ•°æ®å›æµ‹çœ‹å‚æ•°åœ¨æ ·æœ¬å¤–æƒ…å†µçš„è¡¨ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç­–ç•¥æœ‰æ—¶æ•ˆæ€§ã€‚æœ€å¤§å›æ’¤å†å²æ–°é«˜ï¼Œæ”¶ç›Šç‡ä¸å¢å‡å°‘ã€‚éƒ½æ˜¯ç°è±¡ï¼Œåˆ¤æ–­ç­–ç•¥å¤±æ•ˆæ–¹æ³•ï¼š
&lt;ul&gt;
&lt;li&gt;é€»è¾‘åŸºç¡€ä¸æˆç«‹ã€‚æ¶¨è·Œåœåˆ¶ï¼ŒæŸè¡Œä¸šå‘å±•ã€æŸèµ„æºå…¨çƒæŒç»­ç¨€ç¼ºèƒŒæ™¯ä¸‹ã€‚å¦‚æœåˆ¶åº¦è°ƒæ•´ï¼Œæ–°æ”¿ç­–å‘å¸ƒï¼Œç§‘æŠ€è¿›æ­¥ï¼Œç­–ç•¥è‡ªç„¶å¤±æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;èµ„é‡‘è¿‡å¤§ã€‚å¸‚åœºæµåŠ¨æ€§ä¸è¶³æ‰¿è½½ï¼Œä¹°å…¥ä»·æ›´é«˜ã€å–å‡ºä»·æ›´ä½ã€‚&lt;/li&gt;
&lt;li&gt;å¸‚åœºä¸­ç›¸ä¼¼ç­–ç•¥è¿‡å¤šã€‚ç­–ç•¥ç«äº‰å¯¼è‡´èµšé’±å˜éš¾ã€‚äº¤æ˜“è¡Œä¸šéå¸¸æ³¨æ„ä¿å¯†ä¸”ä¸é€‚åˆåˆ†äº«ï¼Œæœ‰å¿—è€…åŸ¹å…»è‡ªå­¦èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;å¯„ç”Ÿç­–ç•¥ã€‚æœ‰å¿ƒäººå‘ç°ä½ çš„ç­–ç•¥å¹¶è¶³å¤Ÿç¨‹åº¦çš„ç›‘æµ‹æ—¶ï¼Œé’ˆå¯¹ä½ çš„ç­–ç•¥åˆ¶å®šç­–ç•¥ï¼Œå¯„ç”Ÿåœ¨ä½ ç­–ç•¥ä¸Šï¼Œå‹ç¼©ç›ˆåˆ©ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¾€å¾€æ”¶ç›Šèƒ½åŠ›ä¸æŠ—é£é™©èƒ½åŠ›äº’ç›¸åˆ¶çº¦ä¸èƒ½å…¼é¡¾ï¼Œå»ºè®®æ˜¯ï¼Œè¾¾åˆ°åŸºæœ¬ç›ˆåˆ©èƒ½åŠ›ï¼ŒæåŠ›è¿½æ±‚ä½é£é™©ï¼Œç†ç”±æ˜¯ç›ˆåˆ©æ°´å¹³å¾€å¾€å¯ä»¥æœæ¡å…‰å¢åŠ èµ„æœ¬å®¶æ¥æé«˜ã€‚&lt;/li&gt;
&lt;li&gt;é‡åŒ–ä¸é€‚åˆåˆ†äº«ï¼Œè‡ªå­¦å¿…ä¸å¯å°‘ã€‚&lt;/li&gt;
&lt;li&gt;å½»åº•è¯»æ‡‚ä¸‹é¢å››ç¯‡æ–‡ç« ï¼Œä½œä¸ºèµ°å‡ºæ–°æ‰‹æ‘çš„ä¸€ä¸ªå†ç»ƒï¼š
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.joinquant.com/post/1398&#34;&gt;åŒå‡çº¿ç­–ç•¥&lt;/a&gt;  ï¼ˆMACDï¼‰&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.joinquant.com/post/1957&#34;&gt;å½¼å¾—æ—å¥‡æˆåŠŸæŠ•èµ„&lt;/a&gt;  ï¼ˆPEGï¼‰&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://joinquant.com/post/1668&#34;&gt;Fama-French ä¸‰å› å­ç«é”…&lt;/a&gt; ï¼ˆå¤šå› å­ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.joinquant.com/post/1311&#34;&gt;å‡¯åˆ©å…¬å¼&lt;/a&gt; ï¼ˆæœŸæœ›ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://joinquant.com/post/10760&#34;&gt;ç¼–ç¨‹å…¥é—¨èµ„æ–™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é‡åŒ–è¿›é˜¶&#34;&gt;é‡åŒ–è¿›é˜¶&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åŸºæœ¬æ¨¡å¼ï¼šæœ‰ä¸€ä¸ªçµæ„Ÿï¼Œç ”ç©¶ä¸å®ç°ï¼Œæˆè´¥è·å¾—æ–°è®¤çŸ¥&lt;/li&gt;
&lt;li&gt;çµæ„Ÿæ¥æºï¼šè®ºæ–‡ã€ç ”æŠ¥ã€èšå®½è®ºå›ã€çŸ¥ä¹é‡åŒ–ä¸»é¢˜é—®ç­”ã€å®½å®¢åšå®¢ï¼ˆå¤šæ•°å›½å¤–ï¼‰ã€å„ç±»ä¹¦ç±&lt;/li&gt;
&lt;li&gt;å¹¿æ³›é˜…è¯»ï¼šä¸é™é‡åŒ–ï¼Œè¿˜æœ‰è´¢åŠ¡åˆ†æã€è¡Œä¸ºé‡‘èã€ç†Ÿæ‚‰ã€ç»Ÿè®¡å­¦ã€æœºå™¨å­¦ä¹ ã€å¿ƒç†å­¦ã€ç‰©ç†å­¦ã€è¯­éŸ³è¯†åˆ«&lt;/li&gt;
&lt;li&gt;å­¦ä¹ æ—¶æ‰¹åˆ¤çœ¼å…‰çœ‹ï¼Œç‹¬ç«‹æ€è€ƒï¼Œè­¦æƒ•ç›²ä»ã€‚é‡åŒ–äº¤æ˜“å¾ˆéš¾æœ‰ç‰¹åˆ«æœ‰ä»·å€¼çš„ä¸œè¥¿å‡ºç°åœ¨å¤§ä¼—çœ¼å‰ã€‚&lt;/li&gt;
&lt;li&gt;ç›´æ¥å‚ä¸åˆ°å¸‚åœºä¸­ã€‚å¸‚åœºå¯¹æ—¶ä¸‹æ–°é—»çš„ååº”ã€å¯¹é‡ä»·èµ°åŠ¿çš„ç¬æ—¶ååº”ã€ä¸åŒè‚¡ç¥¨æˆ–äººç¾¤çš„ååº”ã€ä½ çš„ååº”ç­‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;èŒä¸šåŒ–&#34;&gt;èŒä¸šåŒ–&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å­¦å†åªæ˜¯çŸ¥è¯†å‚¨é‡ä¸ææ•ˆæ‰‹æ®µï¼Œä½ åº”è¯¥è¢«å½•å–çš„ç†ç”±æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆæŠŠè¿™ä¸ªç†ç”±å‘Šè¯‰ä»–ä»¬ï¼Ÿæ¯”å¦‚æœ‰ä¸€ä¸ªå¥½ç­–ç•¥æƒ³å…¥èŒå¸¦ä»–ä»¬èµšé’±ï¼Œæˆ–è€…æœ‰ç›¸å½“çš„ç­–ç•¥å®ç°èƒ½åŠ›æˆ–å› å­å‘æ˜èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;ç‹¬ç«‹å¼€å‘ã€‚å¤šæ•°å…¬å¸ç‹¬ç«‹å‡ºæ¥ï¼Œæˆ–å­¦ç”Ÿé˜¶æ®µè½¬ç‹¬ç«‹èŒä¸šé‡åŒ–ï¼Œä½†ç°é‡‘æµå‹åŠ›è¾ƒå¤§åæ¥æˆç«‹å…¬å¸ã€‚&lt;/li&gt;
&lt;li&gt;èšå®½æ ç›®ï¼Œç­–ç•¥è¢«çœ‹ä¸­è¦è°ˆä¹°æ–­ã€å‘æ–‡ç« è¦è¢«å½•å–ï¼Œæ³¨æ„ä¿æŠ¤è‡ªå·±çš„æˆæœã€‚&lt;/li&gt;
&lt;/ul&gt;</description>
      
    </item>
    
    <item>
      <title>è¯—è¯-æ˜¥ä¸æ™š</title>
      <link>https://JupiterXue.github.io/posts/poetry/not_too_late/</link>
      <pubDate>Thu, 17 Oct 2024 00:00:00 +0000</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/poetry/not_too_late/</guid>
      
      <description>&lt;p&gt;å§‘å¨˜ä¸€å¥æ˜¥ä¸æ™šï¼Œç—´å„¿ç•™åœ¨çœŸæ±Ÿå—ã€‚&lt;/p&gt;
&lt;p&gt;æ±Ÿå—æ›²è½å­¤åŸï¼ŒåŒ–ä½œçƒŸé›¨ã€ä¸æˆ‘å¯¹å¼¹ã€‚&lt;/p&gt;
&lt;p&gt;å§‘å¨˜ä¸€å¥å†¬ä¸å¯’ï¼Œç—´å„¿è¸è¿‡ä¸‡é‡å±±ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€”â€”å‚²å¯’åŒå­¦&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ˜Ÿæ²³æ–—è½¬çºµæ¨ªï¼Œé”»æˆé›„å¿ƒå£®å¿—æ°¸å­˜ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€”â€”Jupiter&lt;/p&gt;
&lt;/blockquote&gt;</description>
      
    </item>
    
    <item>
      <title>è¯—è¯-ä¸´æ±Ÿä»™</title>
      <link>https://JupiterXue.github.io/posts/poetry/river_to_god/</link>
      <pubDate>Wed, 16 Oct 2024 00:00:00 +0000</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/poetry/river_to_god/</guid>
      
      <description>&lt;p&gt;æµŠæ°´å€¾æ³¢ä¸‰ä¸‡é‡Œï¼Œæ„€ç„¶ç‹¬åå­¤å³°ã€‚ é¾™æ½œç‹®éšåé£™é£ã€‚æ— æƒ…çš†ç«–å­ï¼Œæœ‰æ³ªäº¦è‹±é›„ã€‚&lt;/p&gt;
&lt;p&gt;é•¿å‰‘å€šå¤©æ˜Ÿæ–—çƒ‚ï¼Œå¤ä»Šè¿‡çœ¼æˆç©ºã€‚ä¹¾å¤ä¿¯ä»°ä»»ç©·é€šã€‚åŠè½®æ²§æµ·ä¸Šï¼Œä¸€è‹‡å¤§æ±Ÿä¸œã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€”â€”ç¼ ä¸­è¯´ç¦…&lt;/p&gt;
&lt;/blockquote&gt;</description>
      
    </item>
    
    <item>
      <title>æŠ•èµ„ä¸é‡åŒ–-ä»»åŠ¡2-ä»€ä¹ˆæ˜¯é‡‘èå¸‚åœº</title>
      <link>https://JupiterXue.github.io/posts/quant-whale-notes/task2-basic_fina_concepts/</link>
      <pubDate>Wed, 16 Oct 2024 00:00:00 +0000</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/quant-whale-notes/task2-basic_fina_concepts/</guid>
      
      <description>&lt;p&gt;ä¼ é€é—¨ï¼š&lt;a href=&#34;https://datawhalechina.github.io/whale-quant/#/./ch02_%E9%87%91%E8%9E%8D%E5%B8%82%E5%9C%BA%E7%9A%84%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/2.1_%E5%AE%8F%E8%A7%82%E7%BB%8F%E6%B5%8E%E5%AD%A6%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5&#34;&gt;ç¬¬äºŒç« -é‡‘èå¸‚åœºåŸºç¡€&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ€è€ƒ&#34;&gt;æ€è€ƒ&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;äºšå½“æ–¯å¯†ä»ã€Šå›½å¯Œè®ºã€‹æå‡ºçœ‹ä¸è§çš„æ‰‹å¸‚åœºä¸‡èƒ½ï¼Œæ ‡å¿—å¾®è§‚ç»æµå­¦è¯ç”Ÿï¼›å®è§‚ç»æµå­¦ä»¥å‡¯æ©æ–¯æµæ´¾ä¸ºä¸»ï¼Œæå€¡ç ”ç©¶ä¾›éœ€å…³ç³»ä¸å®è§‚ç»æµæŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è´§å¸é‡‘èå­¦ç ”ç©¶é‡‘èèµ„äº§æœ‰æ•ˆé…ç½®ï¼ŒåŒ…æ‹¬é‡‘èä½“ç³»çš„å»ºè®¾ï¼ˆèèµ„ã€å·¥å…·å’Œæœºæ„ï¼‰ï¼Œè´§å¸çš„åŠŸèƒ½ä¸è®¡é‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ©ç‡ç°å€¼ï¼ˆè´´ç°ç‡ï¼‰ç†è®ºä¸Šå¯ä»¥æƒ³æˆé€šè´§è†¨èƒ€ç‡ï¼Œæˆ–æ˜¯æœºä¼šæˆæœ¬ï¼šæŠ•èµ„è¿™ä¸œè¥¿æœ¬æ¥å¯ä»¥èµš5%ï¼Œä½†ä¸ºäº†æŠ•èµ„å¦å¤–ä¸€ä¸ªåœ°æ–¹è€Œæ”¾å¼ƒè¿™é‡Œçš„æœºä¼šï¼Œå³æœºä¼šæˆæœ¬5%ã€‚åˆæˆ–è€…åƒæ˜¯èµ„é‡‘æˆæœ¬ã€‚ä¸ªäººæ›´å€¾å‘äºå«åšæ‰“æŠ˜ç‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ©ç‡è®¡ç®—å…¬å¼ï¼š
$$ PV = \frac{CF}{(1+i)^n} $$&lt;br&gt;
é€šè¿‡æé™æ¨å¯¼å¯ä»¥å¾—åˆ°ï¼š
$$ PV = \frac{CF}{r} $$
å¯ä»¥ç§°ä¹‹ä¸º&lt;strong&gt;ä¸‡ç‰©çš†æœ‰ä»·çš„å…¬å¼&lt;/strong&gt;ã€‚æ¯”å¦‚ä¸€å®¶å…¬å¸å›ºå®šé…è‚¡é…æ¯2å…ƒï¼Œæ— æœŸé™ï¼Œå°±å¯ä»¥å¤§æ¦‚ç®—å‡ºè¿™å®¶å…¬å¸å¤§æ¦‚å€¼å¤šå°‘é’±ï¼šå¦‚æœé€šè´§è†¨èƒ€ç‡åœ¨2%ï¼Œå°±å¯ä»¥ç®—å‡ºï¼š
$$ PV = \frac{2}{0.02} = 100 \text{å…ƒ} $$
å³å…¬å¸è‚¡ç¥¨ä»·åœ¨100å…ƒæ˜¯åˆç†ä»·æ ¼ï¼Œå®é™…è‚¡ä»·åœ¨100ä»¥ä¸‹å°±æ˜¯å¥½ä¹°ç‚¹ï¼Œä»¥ä¸Šå°±æ˜¯æº¢ä»·äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æŠ•èµ„å­¦ç•Œå®šäº†å››å¤§ç±»çš„æŠ•èµ„ç§ç±»ï¼šå›ºå®šæ”¶ç›Šæˆ–å€ºåŠ¡å‹è¯åˆ¸ã€æ™®é€šè‚¡æˆ–æƒç›Šå‹è¯åˆ¸ã€åŸºé‡‘ã€é‡‘èè¡ç”Ÿå“ï¼ˆæœŸè´§æœŸæƒäº’æ¢ï¼‰ï¼Œå¹¶æ ¹æ®å…¶ç‰¹ç‚¹åˆ†ä¸ºäº†å‡ ç§äº¤æ˜“å¸‚åœºï¼šå€ºåˆ¸å¸‚åœºã€å¤–æ±‡å¸‚åœºã€è´µé‡‘å±å¸‚åœºã€å¤§å®—å•†å“å¸‚åœºå’Œè‚¡ç¥¨å¸‚åœºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ•°ç†ç»Ÿè®¡éƒ¨åˆ†éƒ½æ˜¯å¤§å­¦ä¸­æ¦‚ç‡è®ºéƒ¨åˆ†çŸ¥è¯†ï¼Œå…¬å¼åˆ—ä¸¾æ¯ç‡¥ä¹å‘³ï¼Œæœ‰ç©ºè¿˜æ˜¯ç»§ç»­è¡¥è¡¥è¯¾çœ‹çœ‹3Blue1Brownçš„åŠ¨ç”»æ•™å­¦è§†é¢‘ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</description>
      
    </item>
    
    <item>
      <title>å…³äºæˆ‘</title>
      <link>https://JupiterXue.github.io/pages/about/</link>
      <pubDate>Tue, 15 Oct 2024 21:51:42 +0000</pubDate>
      
      <guid>https://JupiterXue.github.io/pages/about/</guid>
      
      <description>&lt;p&gt;æŠ€èƒ½æ ˆï¼Œå°å…¬å¸åç«¯ç ”å‘ï¼Œè‡ªæˆ‘å®šä½â€”â€”&lt;strong&gt;å…¨æ ˆå·¥ç¨‹å¸ˆ&lt;/strong&gt; ğŸ¦„&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¯­è¨€ï¼šGolang ğŸ¹ã€Python ğŸã€JavaScriptã€Emacs Lisp&lt;/p&gt;
&lt;p&gt;å‰ç«¯ï¼šVueã€Element-UI&lt;/p&gt;
&lt;p&gt;åç«¯ï¼šçˆ¬è™« ğŸ•·ã€FastApiã€Ethereum ä»¥å¤ªåŠ&lt;/p&gt;
&lt;p&gt;æ•°æ®åº“ï¼šMySQLã€Redisã€ElasticSearch&lt;/p&gt;
&lt;p&gt;è¿ç»´ï¼šDocker&lt;/p&gt;
&lt;p&gt;ç›‘æ§ï¼šPromethuesã€Grafana&lt;/p&gt;
&lt;p&gt;å¤§æ•°æ®ï¼šHadoopã€Hiveã€Hbase&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ¬¢è¿æ›´å¤šäº¤æµ&lt;/p&gt;
&lt;p&gt;Github ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦åœ°å€: &lt;a href=&#34;https://github.com/JupiterXue&#34;&gt;Jupiter&lt;/a&gt; ï¼Œé‚®ä»¶ğŸ“§ï¼š&lt;a href=&#34;mailto:JupiterXue97@gmail.com&#34;&gt;JupiterXue97@gmail.com&lt;/a&gt;&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>æŠ•èµ„ä¸é‡åŒ–-ä»»åŠ¡1-ä»€ä¹ˆæ˜¯æŠ•èµ„</title>
      <link>https://JupiterXue.github.io/posts/quant-whale-notes/task1-what-invist/</link>
      <pubDate>Tue, 15 Oct 2024 00:00:00 +0000</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/quant-whale-notes/task1-what-invist/</guid>
      
      <description>&lt;p&gt;ç»„é˜Ÿå¼€å§‹å­¦ä¹ å¼€æºé‡åŒ–è¯¾ç¨‹ï¼Œç¬¬ä¸€ç« æŠ•èµ„ä¸é‡åŒ–ï¼Œç¬¬ä¸€ä¸ªæ‰“å¡ä»»åŠ¡æ˜¯äº†è§£ä»€ä¹ˆæ˜¯æŠ•èµ„ã€‚
ä¼ é€é—¨ï¼š&lt;a href=&#34;https://datawhalechina.github.io/whale-quant/#/./ch01_%E6%8A%95%E8%B5%84%E4%B8%8E%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/ch01_%E6%8A%95%E8%B5%84%E4%B8%8E%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84&#34;&gt;ç¬¬äºŒç« -é‡‘èå¸‚åœºåŸºç¡€&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ€è€ƒ&#34;&gt;æ€è€ƒ&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;é‡åŒ–ä¸»è¦é£é™©åœ¨äºç­–ç•¥å¤±æ•ˆï¼Œæ›´å¤§æŒ‘æˆ˜åœ¨äºæ— æ³•é¢„æµ‹ç­–ç•¥ä»€ä¹ˆæ—¶é—´å¤±æ•ˆã€‚å…¶å®ä¸ä»…æ˜¯é‡åŒ–ï¼Œæ‰€æœ‰èƒ½å¤Ÿâ€œç›ˆåˆ©â€çš„äº¤æ˜“ç­–ç•¥çš„ä¸»è¦é£é™©éƒ½æ˜¯å¦‚æ­¤ã€‚ä¸ªäººè®¤ä¸ºï¼Œç›¸æ¯”ä¸»è§‚äº¤æ˜“ï¼Œé‡åŒ–ï¼ˆä½¿ç”¨é‡åŒ–ç­–ç•¥çš„äººï¼‰æ›´å€¾å‘äºå¢¨å®ˆæˆè§„ï¼Œå°¤å…¶æ˜¯åœ¨å›æµ‹ã€æ¨¡æ‹Ÿç›˜æ˜¾ç¤ºå‡ºè‰¯å¥½çš„å¯ç›ˆåˆ©æ€§åï¼Œä½†è¿™æ˜¯äº¤æ˜“çš„å¤§å¿Œï¼Œç”¨ç›¸åŒçš„æ€è€ƒæ–¹å¼å’Œè¡Œä¸ºæ–¹å¼ï¼Œå¿…ç„¶ä¼šåœ¨é»‘å¤©é¹…äº‹ä»¶å‡ºç°åäº§ç”Ÿé‡å¤§äºæŸã€‚ç›¸åï¼Œç”¨é‡åŒ–å›æµ‹æ¥éªŒè¯è‡ªå·±çš„äº¤æ˜“ç­–ç•¥ï¼Œå‘ç°ç­–ç•¥å¤±æ•ˆè¾¹ç•Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ€è·¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¨¡æ‹Ÿç›˜äº¤æ˜“ä¸€èˆ¬éœ€è¦åŠå¹´åˆ°ä¸€å¹´æˆç†Ÿï¼Œæ›´å¤šæ˜¯æŒ‡ç­–ç•¥ä¼˜åŒ–éœ€è¦åŠå¹´åˆ°ä¸€å¹´æ‰èƒ½æ›´å¥½åœ°å‚ä¸å®ç›˜ã€‚å®ç›˜äº¤æ˜“æœ‰æ•ˆæ€§åœ¨3-5å¹´ï¼Œæ›´å¤šæ˜¯æŒ‡ç­–ç•¥å¤§æ¦‚2ã€3å¹´å°±å¯èƒ½ä¼šå¤±æ•ˆã€‚ä¸€å¥è¯ï¼Œä¼˜åŒ–æ— æ­¢å¢ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</description>
      
    </item>
    
    <item>
      <title>Table of content</title>
      <link>https://JupiterXue.github.io/arch/table-of-content/</link>
      <pubDate>Tue, 02 May 2023 10:00:00 +0000</pubDate>
      
      <guid>https://JupiterXue.github.io/arch/table-of-content/</guid>
      
      <description>&lt;h2 id=&#34;table-of-content&#34;&gt;Table of content&lt;/h2&gt;
&lt;p&gt;This theme supports displaying table of content (ToC) in blog posts.&lt;/p&gt;
&lt;h2 id=&#34;parameters&#34;&gt;Parameters&lt;/h2&gt;
&lt;p&gt;You can manage a ToC with two parameters:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;global &lt;code&gt;toc&lt;/code&gt; parameter;&lt;/li&gt;
&lt;li&gt;post &lt;code&gt;toc&lt;/code&gt; parameter.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The post &lt;code&gt;toc&lt;/code&gt; parameter has higher priority than the global &lt;code&gt;toc&lt;/code&gt; parameter.&lt;/p&gt;
&lt;h2 id=&#34;enable-table-of-content-on-all-posts&#34;&gt;Enable table of content on all posts&lt;/h2&gt;
&lt;p&gt;To enable ToC on all posts (globally) set parameter &lt;code&gt;toc&lt;/code&gt; to &lt;code&gt;true&lt;/code&gt; in &lt;code&gt;hugo.toml&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;toc&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To disable ToC globally, simply ignore the &lt;code&gt;toc&lt;/code&gt; parameter or set it to &lt;code&gt;false&lt;/code&gt;.&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Math Typesetting - use Mathematical notation in blog posts</title>
      <link>https://JupiterXue.github.io/arch/math-typesetting/</link>
      <pubDate>Sat, 01 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://JupiterXue.github.io/arch/math-typesetting/</guid>
      
      <description>&lt;p&gt;Mathematical notation in a Hugo project can be enabled by using
&lt;a href=&#34;https://github.com/hugo-sid/hugo-blog-awesome/blob/main/layouts/partials/helpers/katex.html&#34;&gt;third party JavaScript libraries&lt;/a&gt;.&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Markdown Syntax Guide</title>
      <link>https://JupiterXue.github.io/arch/markdown-syntax/</link>
      <pubDate>Sat, 11 Feb 2023 00:00:00 +0000</pubDate>
      
      <guid>https://JupiterXue.github.io/arch/markdown-syntax/</guid>
      
      <description>&lt;p&gt;This article offers a sample of basic Markdown syntax that can be used in Hugo content files, also it shows whether basic HTML elements are decorated with CSS in a Hugo theme.&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Rich Content</title>
      <link>https://JupiterXue.github.io/arch/rich-content/</link>
      <pubDate>Thu, 09 Feb 2023 00:00:00 +0000</pubDate>
      
      <guid>https://JupiterXue.github.io/arch/rich-content/</guid>
      
      <description>&lt;p&gt;Hugo ships with several &lt;a href=&#34;https://gohugo.io/content-management/shortcodes/#use-hugos-built-in-shortcodes&#34;&gt;Built-in Shortcodes&lt;/a&gt; for rich content, along with a &lt;a href=&#34;https://gohugo.io/about/hugo-and-gdpr/&#34;&gt;Privacy Config&lt;/a&gt; and a set of Simple Shortcodes that enable static and no-JS versions of various social media embeds.&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Placeholder Text</title>
      <link>https://JupiterXue.github.io/arch/placeholder-text/</link>
      <pubDate>Tue, 07 Feb 2023 00:00:00 +0000</pubDate>
      
      <guid>https://JupiterXue.github.io/arch/placeholder-text/</guid>
      
      <description>&lt;p&gt;Lorem est tota propiore conpellat pectoribus de pectora summo.&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Emoji Support</title>
      <link>https://JupiterXue.github.io/arch/emoji-support/</link>
      <pubDate>Wed, 01 Feb 2023 00:00:00 +0000</pubDate>
      
      <guid>https://JupiterXue.github.io/arch/emoji-support/</guid>
      
      <description>&lt;p&gt;Emoji can be enabled in a Hugo project in a number of ways.&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”web æ¡†æ¶åŸç†ï¼ˆ4ï¼‰</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day45-web_design_and_project_4/day45-web_design_and_project_4/</link>
      <pubDate>Tue, 28 Dec 2021 22:15:36 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day45-web_design_and_project_4/day45-web_design_and_project_4/</guid>
      
      <description>&lt;p&gt;è¿™å‘¨å°è¯•è¿ç»­æ›´æŠ€æœ¯æ–‡ã€‚ä¸ŠæœŸè¯´åˆ°ï¼ŒValidator ç»„ä»¶èƒ½å¤Ÿå°†å¤æ‚çš„å­—æ®µæ ¡éªŒå·¥ä½œå®Œå…¨è‡ªåŠ¨åŒ–å®Œæˆï¼Œåªéœ€ä½¿ç”¨åˆ° go-playground ä¸­çš„ validator åŒ…å°±èƒ½å®ç°è¿™ä¸€åŠŸèƒ½ã€‚ä»Šå¤©ç»§ç»­èŠèŠå…¶ä»–ç»„ä»¶ã€‚&lt;/p&gt;
&lt;h1 id=&#34;request-binder&#34;&gt;Request Binder&lt;/h1&gt;
&lt;p&gt;è¿™æ˜¯ä¸€æ®µæ‘˜è‡ª gin æ¡†æ¶çš„ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Content-Type MIME of the most common data formats.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;MIMEJSON&lt;/span&gt;	  		    &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;application/json&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;MIMEHTML&lt;/span&gt;			&lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;text/html&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;MIMEXML&lt;/span&gt;				&lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;application/xml&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;MIMEXML2&lt;/span&gt;			 &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;text/xml&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;MIMEPlain&lt;/span&gt;			       &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;text/plain&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;MIMEPOSTFORM&lt;/span&gt;		  &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;application/x-www-form-urlencoded&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;MIMEMutipartPOSTForm&lt;/span&gt;	&lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;multipart/form-data&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;MIMEPROTOBUF&lt;/span&gt;		  &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;application/x-protobuf&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;MIMEMSGPACK&lt;/span&gt;			  &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;application/x-msgpack&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;MIMEMSGPACK2&lt;/span&gt;		  &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;application/msgpack&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;MIMEYAML&lt;/span&gt;			  &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;application/x-yaml&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç”±äº gin èµ°çš„æ˜¯ HTTP åè®®ï¼Œæ‰€ä»¥ Request binding è¯·æ±‚ç»‘å®šï¼Œæœ¬è´¨ä¸Šæ˜¯æ ¹æ® HTTP header ä¸­çš„ Contet-Type çš„å„ç§ç±»å‹æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ®è¿™ä¸ª header æˆ‘ä»¬å¯ä»¥åˆ¤æ–­ç”¨æˆ·ä¼ çš„ body å’Œ url æ˜¯ä»€ä¹ˆä¸œè¥¿ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢å°±æ˜¯æˆ‘ä»¬åœ¨ä»£ç ä¸­ï¼Œæ ¹æ® http çš„ contentType åšçš„ç®€å•çš„ switch-caseï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;contentType&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Binding&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;method&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MethodGet&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Form&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;contentType&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MIMEJSON&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;JSON&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MIMEXML&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MIMEXML2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;XML&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MIMEPROTOBUF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ProtoBuf&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MIMEMSGPACK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MIMEMSGPACK2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MsgPack&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MIMEYAML&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;YAML&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MIMEMultipartPOSTForm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;FormMultipart&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// case MIMEPOSTForm:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Form&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€åï¼Œswitch-case è¿”å›çš„æ˜¯ä¸€ä¸ª binding ç»“æ„ã€‚è¿™ä¸ªè¿‡ç¨‹å…¶å®æ˜¯è®¾è®¡æ¨¡å¼ä¸­ç®€å•å·¥å‚æ¨¡å¼çš„åº”ç”¨ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”web æ¡†æ¶åŸç†ï¼ˆ3ï¼‰</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day44-web_design_and_project_3/day44-web_design_and_project_3/</link>
      <pubDate>Tue, 28 Dec 2021 22:15:02 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day44-web_design_and_project_3/day44-web_design_and_project_3/</guid>
      
      <description>&lt;p&gt;æ²¡æƒ³åˆ°å§ï¼Œä»Šå¤©ç»§ç»­å†™ç‚¹æŠ€æœ¯æ–‡ç« ã€‚ä¸ŠæœŸæ–‡ç« æˆ‘ä»¬è¯´åˆ°ï¼Œè·¯ç”± Router çš„æœ¬è´¨å…¶å®æ˜¯ä»å­—ç¬¦ä¸²åŒ¹é…åˆ°ç”¨æˆ·å‡½æ•°çš„è¿‡ç¨‹ï¼›ç›¸ä¼¼å­—ç¬¦ä¸²å¯¹åº”ä¸åŒçš„è·¯ç”±ï¼Œä¸­é—´ç»è¿‡ Radix Tree æ„é€ å­—å…¸æ ‘è¿›è€Œå®ç°ã€‚è¿™æœŸæ–‡ç« ç»§ç»­è®²è®²å¸¸è§ Web æ¡†æ¶ä¸­çš„ç»„ä»¶ã€‚&lt;/p&gt;
&lt;h1 id=&#34;validator&#34;&gt;Validator&lt;/h1&gt;
&lt;p&gt;åœ¨æ²¡æœ‰æ‹¦æˆªå™¨ï¼ˆValidatorï¼‰ä¹‹å‰ï¼Œå¯èƒ½æˆ‘ä»¬å†™çš„ä¸€ä¸ªå…³äºï¼Œæ³¨å†Œè¯·æ±‚çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;RegisterReq&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Username&lt;/span&gt;             &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;    &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;username&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;PasswordNew&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;    &lt;span class=&#34;s&#34;&gt;`josn:&amp;#34;password_new&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;PasswordRepeat&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;    &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;password_repeat&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Email&lt;/span&gt;                   &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;   &lt;span class=&#34;s&#34;&gt;`json:email`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;register&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;RegisterReq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Username&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PasswordNew&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PasswordRepeat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PasswordNew&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PassowrdRepeat&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;nf&#34;&gt;createUser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;invalid email&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;password and password reinput must be loger than 0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;length of username cannot be 0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ®µä»£ç çš„æ„æ€æ˜¯è¯´ï¼Œæˆ‘ä»¬æƒ³è¦åˆ›å»ºä¸€ä¸ªè´¦æˆ·ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆï¼Œç”¨æˆ·åçš„é•¿åº¦éœ€è¦å¤§äº 0ï¼›&lt;/li&gt;
&lt;li&gt;å…¶æ¬¡ï¼Œå¯†ç çš„é•¿åº¦å¤§äº 0ï¼Œå¹¶ä¸”é‡å¤ç¡®è®¤è¾“å…¥çš„å¯†ç çš„é•¿åº¦ä¹Ÿå¤§äº 0ï¼›&lt;/li&gt;
&lt;li&gt;ç„¶åï¼Œå¯†ç å’Œé‡å¤ç¡®è®¤çš„å¯†ç å¿…é¡»ç›¸åŒï¼›&lt;/li&gt;
&lt;li&gt;å†ç„¶åï¼Œæ³¨å†Œç”¨åˆ°çš„ email å¿…é¡»æ˜¯åˆæ³•çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ®µä»£ç çœ‹èµ·æ¥å°±åƒå¼€äº†èŠ±ï¼Œä½†å…¶å®æ˜¯å¾ˆå¤šå…¬å¸çš„æ—¥å¸¸å¼€å‘å†™çš„ã€‚ä½†æˆ‘ä»¬å¦‚æœè¿™ç§ä»£ç å†™å¤šäº†ä¸ä»…æ„Ÿåˆ°ç¹çï¼Œçœ‹èµ·æ¥æ›´æ˜¯æ„Ÿåˆ°ä¸èˆ’æœã€‚&lt;/p&gt;
&lt;p&gt;äºæ˜¯æˆ‘ä»¬ä¼šå»å­¦ä¹ ä¸€äº›é‡æ„çš„ç†å¿µä¹‹åï¼Œæ¯”å¦‚ early return / guard cluuse çš„é‡æ„æ€æƒ³åï¼Œé‡æ„æ”¹é€ å†™å‡ºçš„ä»£ç å¯èƒ½å°±æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;register&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;RegisterReq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Username&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;length of username cannot be 0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PassowrdNew&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;reqPasswordRepeat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;password and password reinput must be loger than 0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PassowordNEw&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PassowrdRepeat&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;passowrd and reinput must be the same&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;emailFormatValid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Email&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;invalid email&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;createUser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é‡æ„ä¹‹åçš„ä»£ç çœ‹èµ·æ¥ç›¸æ¯”ä¹‹å‰çš„ä»£ç æ˜¯æ›´åŠ æ¸…æ™°ã€æœ‰æ¡ç†äº›ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”web æ¡†æ¶åŸç†ï¼ˆ2ï¼‰</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day43-web_design_and_project_2/day43-web_design_and_project_2/</link>
      <pubDate>Mon, 27 Dec 2021 22:11:54 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day43-web_design_and_project_2/day43-web_design_and_project_2/</guid>
      
      <description>&lt;p&gt;ä¸ŠæœŸæˆ‘ä»¬è¯´åˆ°äº† Middleware å¯å®ç°æ´‹è‘±æ¨¡å¼ï¼Œå°†ä¸€äº›å‰ç½®æˆ–åç½®çš„è‡ªå®šä¹‰ä»£ç æ’å…¥åˆ°ä¸šåŠ¡é€»è¾‘ä¹‹å‰ï¼Œå¹¶ä¸”ä¾¿äºä¿®æ”¹ã€‚è¿™æœŸæ–‡ç« ç»§ç»­æ¥èŠèŠå¸¸è§ Web æ¡†æ¶ä¸­çš„ç»„ä»¶ã€‚&lt;/p&gt;
&lt;h1 id=&#34;router&#34;&gt;Router&lt;/h1&gt;
&lt;p&gt;æœ¬è´¨ä¸Šï¼Œè·¯ç”±ï¼ˆRouterï¼‰å°±æ˜¯ä»å­—ç¬¦ä¸²åŒ¹é…åˆ°ç”¨æˆ·å‡½æ•°çš„è¿‡ç¨‹ã€‚è¿™é‡Œæœ‰ä¸¤æ®µç¤ºä¾‹ä»£ç ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;æœªå‘½åæ–‡ä»¶&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202112272228960.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;Router æœ¬è´¨æ˜¯æ˜ å°„&lt;/center&gt;
&lt;p&gt;è¿™é‡Œç”¨åˆ°çš„æ˜¯ http æ ‡å‡†åº“çš„ç­¾åï¼Œæ‰€ä»¥å‚æ•°ç±»å‹ä¸º http.responseWriterï¼Œå’Œ http.Requestã€‚&lt;/p&gt;
&lt;p&gt;å·¦è¾¹çš„å­—ç¬¦ä¸²å¹¶ä¸æ˜¯å•ç‹¬çš„ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚æˆ‘ä»¬çŸ¥é“åœ¨ Rest ful é£æ ¼çš„è·¯ç”±ä¸­ï¼Œå¾ˆå¤šæ—¶å€™å¯ä»¥å¸¦ä¸€äº›å‚æ•°ï¼Œæ¯”å¦‚ä¸Šæ–¹è·¯ç”±æœ‰ä¸ª id å‚æ•°ï¼Œå°±å¯ä»¥åœ¨ç”¨æˆ·å‡½æ•° h1 ä¸­çš„ http.Request ä¸­çš„è·¯ç”±ä¸­è§£æå‡ºæ¥ã€‚ä½†æˆ‘ä»¬å¾ˆå¤šæ—¶å€™çŸ¥é“æ€ä¹ˆç”¨ï¼Œå´ä¸çŸ¥é“å¦‚ä½•è‡ªå·±æ¥å®ç°è¿™ç§å¸¦å‚æ•°çš„å®ç°çš„ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°ä¸€ä¸ªæ ‘ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨äº†è§£è¿™ä¸ªæ ‘ç»“æ„ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆçŸ¥é“ä»€ä¹ˆæ˜¯å­—å…¸æ ‘ï¼ˆtrieï¼‰ï¼Œè¿™é‡Œæœ‰ä¸€å¹…å›¾ï¼š&lt;/p&gt;
&lt;img src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202112272240765.png&#34; width=&#34;400px&#34; height=&#34;400px&#34;/&gt;
&lt;center&gt;å­—å…¸æ ‘ä¾‹å­&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;å•ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªå­—æ¯ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœéœ€è¦å¯¹å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…ï¼Œåªè¦ä»æ ¹èŠ‚ç‚¹å¼€å§‹ä¾æ¬¡åŒ¹é…å³å¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä»è¿™ä¸ªå­—å…¸æ ‘å‘ç°å‡ ä¸ªå•è¯ï¼šæ¯”å¦‚ä¸­é—´çš„ OKï¼Œå³è¾¹çš„ OUTï¼Œå·¦è¾¹ç•¥å¾®å¤æ‚çš„ ONLINEã€‚å¦‚æœæˆ‘ä»¬éœ€è¦åšä¸€äº›æ–‡æœ¬åŒ¹é…çš„å·¥ä½œï¼Œç”¨åˆ°å­—å…¸æ ‘æ˜¯ä¸é”™çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;ä½†å­—å…¸æ ‘çš„è®¾è®¡æ¯”è¾ƒæµªè´¹ç©ºé—´ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬åªæ˜¯éœ€è¦å­˜ä¸€ä¸ªå­—æ¯ï¼Œä½†å…¶å®å¼€è¾Ÿäº†å¾ˆå¤šç©ºé—´ï¼Œè¿™ä¸ªåœ¨è·¯ç”±å½“ä¸­å¥½æ¯”æœ‰å¤šä¸ªå±‚çº§ /XXXã€‚è€Œå¦‚æœè¿˜æƒ³è¦åšå­—å…¸æ ‘çš„æŸ¥è¯¢ï¼Œæ— ç–‘æ—¶é—´ä¸Šå¼€é”€è¿˜æ˜¯ç•¥å¤§ï¼Œå› ä¸ºåœ¨æ ‘çš„èŠ‚ç‚¹ä¹‹é—´è·³è½¬ï¼Œä¸€èˆ¬è¿˜æ˜¯è¦ç»è¿‡æŒ‡é’ˆçš„ï¼Œè€Œç»è¿‡æŒ‡é’ˆæ„å‘³ç€å®ƒçš„å†…å­˜çš„å±€éƒ¨æ€§ä¸é‚£ä¹ˆå¥½ï¼Œæ‰€ä»¥åŒ¹é…èµ·æ¥å¯èƒ½ä¼šæ¯”è¾ƒæ…¢ã€‚&lt;/p&gt;
&lt;h2 id=&#34;radix-tree&#34;&gt;Radix Tree&lt;/h2&gt;
&lt;p&gt;åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å†äº†è§£ä¸€ä¸‹ Radix Treeã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211227225604535&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202112272256621.png&#34;&gt;&lt;/p&gt;
&lt;center&gt; Radix Tree æ‘˜è‡ª Wikipedia&lt;/center&gt;
&lt;p&gt;Radix Tree ä¸€èˆ¬å«åšå¥‡æ•°æ ‘æˆ–æ”¾å°„æ ‘ï¼Œä¹Ÿæœ‰å«å‹ç¼©å‰ç¼€æ ‘ã€‚å®ƒæœ¬èº«æ˜¯ç»è¿‡ç©ºé—´ä¼˜åŒ–çš„å­—å…¸æ ‘ã€‚åœ¨å®ƒé‡Œé¢ä¼šæŠŠä¸€äº›å­èŠ‚ç‚¹çš„å…¬å…±çš„å†…å®¹åˆå¹¶åˆ°çˆ¶èŠ‚ç‚¹é‡Œé¢å»ï¼Œä¹Ÿå°±æ„å‘³ç€å•ä¸ªèŠ‚ç‚¹ä¸åªå­˜å•ä¸ªå­—æ¯ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæ¥çœ‹çœ‹ Radix Tree çš„å‡ ä¸ªç‰¹å¾ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒä¸€ä¸ª URI åœ¨ HTTP è§„èŒƒä¸­ä¼šæœ‰å¤šä¸ªæ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt=&#34;Radix Tree ç‰¹å¾ä¸€ï¼šåŒä¸€ä¸ª URI åœ¨ HTTP è§„èŒƒä¸­ä¼šæœ‰å¤šä¸ªæ–¹æ³•&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202112272306229.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;Radix Tree åœ¨ URI ä¸­çš„ä¾‹å­&lt;/center&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬ HTTP çš„ Router å®ç°é‡Œï¼Œå…¶å®ä¸æ­¢æœ‰ä¸€é¢— Radix Treeã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨åŒä¸€ä¸ªè·¯ç”±å­—ç¬¦ä¸²ä¸Šï¼Œå¯ä»¥è®¾ç½®å¤šç§æ“ä½œçš„ã€‚åƒè¿™é‡Œçš„ Rest ful API ä¸ä»…æœ‰å¸¸è§çš„ GETã€POST æ–¹æ³•ï¼Œè¿˜æœ‰ DELETEã€PUTã€UPDATEã€PATCH ç­‰æ–¹æ³•ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªæ–¹æ³•å…¶å®éƒ½å¯¹åº”ä¸€é¢— Radix Treeï¼Œå¤§æ¦‚çš„æ ·å­æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”web æ¡†æ¶åŸç†</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day42-web_design_and_project/day42-web_design_and_project/</link>
      <pubDate>Fri, 24 Dec 2021 19:14:59 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day42-web_design_and_project/day42-web_design_and_project/</guid>
      
      <description>&lt;p&gt;ä»Šå¤©æ¥è®¨è®ºä¸€ä¸‹æµè¡Œã€å¸¸è§çš„å…·æœ‰ RESTful API é£æ ¼çš„ web æ¡†æ¶ä¸­çš„åŸç†ï¼Œæ¶µç›–äº† ginã€go-chi å’Œ ego çš„ä¸€äº›ç»„ä»¶ã€‚æˆ‘ä»¬ä¼šå‘ç°ï¼Œå®ƒä»¬æ¡†æ¶ä¸­çš„ç»„ä»¶ï¼Œæˆ–å¤šæˆ–å°‘ä¼šæœ‰ä»¥ä¸‹å‡ ä¸ªè®¾è®¡ï¼šmiddlewareã€routerã€validatorã€request binderã€sql binderï¼Œã€‚æˆ–è®¸åç§°ä¸éƒ½å«è¿™ä¸ªï¼Œä½†å…¶å®ç°çš„é€»è¾‘å¤§æ¦‚æ˜¯å·®ä¸å¤šçš„ã€‚ä¸‹é¢å°±æ¥å…·ä½“è®²è§£å®ƒä»¬çš„å®ç°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;middleware&#34;&gt;Middleware&lt;/h2&gt;
&lt;h3 id=&#34;å®é™…åœºæ™¯&#34;&gt;å®é™…åœºæ™¯&lt;/h3&gt;
&lt;p&gt;åœ¨è®² middleware åº•å±‚å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å®ƒåœ¨æˆ‘ä»¬å®é™…é¡¹ç›®ä¸­æ˜¯æ€ä¹ˆç”¨åˆ°çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;hello&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;wr&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ResponseWriter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;wr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HandleFunc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hello&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ListenAndServe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;:8080&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;......&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œæˆ‘ä»¬æœ‰ä¸ª hello world çš„ä¸šåŠ¡é€»è¾‘ï¼Œç›‘å¬äº† 8080 ç«¯å£ï¼Œé…ç½®äº†ä¸€ä¸ª http çš„ Handlerï¼Œåªè¦è®¿é—®äº†è·¯ç”± / å°±ä¼šè¿›å…¥ hello çš„é€»è¾‘ã€‚å†…éƒ¨çš„é€»è¾‘è¿™é‡Œåªæœ‰ä¸ªç®€å•çš„å†™åŠ¨ä½œï¼Œå®é™…åœºæ™¯ä¸­è¿˜ä¼šä¸æ–­åœ°å åŠ ä¸šåŠ¡é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;æŸä¸€å¤©æ–°çš„ä¸šåŠ¡æ¥äº†ï¼Œæƒ³è¦ç»Ÿè®¡æ¯ä¸ªè¯·æ±‚æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œæ€ä¹ˆå®ç°å‘¢ï¼Ÿ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// mindware/hello_with_time.elapse.go
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;logger&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stdout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;hello&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;we&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ReponseWriter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;timeStart&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;we&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;timeElapsed&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Since&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeStart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;logger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeElapsed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€ç®€å•ç²—æš´çš„å°±æ˜¯åœ¨ hello é€»è¾‘ä¸­æ‰‹åŠ¨æ·»åŠ ç»Ÿè®¡æ—¶é—´çš„è¿‡ç¨‹ï¼Œåœ¨å‘ http.ResponseWriter å†™å…¥  hello é€»è¾‘ä¹‹å‰è®°å½•å½“å‰çš„æ—¶é—´ï¼Œåœ¨å¤„ç†å®Œä¸šåŠ¡é€»è¾‘ä»¥åï¼Œå†è®°å½•æ¶ˆè€—è¿‡çš„æ—¶é—´ï¼Œå¹¶ä¸”æŠŠä¸­é—´æ¶ˆè€—è¿‡çš„æ—¶é—´æ‰“åˆ°æ—¥å¿—ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;éšç€ä¸šåŠ¡çš„è¿­ä»£ï¼Œæ¥å£è‚¯å®šä¼šé€æ¸å¢åŠ ã€‚æˆ‘ä»¬ä¸€ä¸ªæ¨¡å—ä¸å¯èƒ½åªæœ‰ä¸€ä¸ªè¯¸å¦‚ hello è¿™æ ·ç®€å•çš„æ¥å£ï¼Œè¿˜ä¼šæœ‰å„ç§å„æ ·çš„æ¥å£ã€‚è™½ç„¶å¤§å¤šæ•°å…¬å¸éƒ½æ˜¯å¾®æœåŠ¡æ¶æ„ï¼Œä½†ä¸€èˆ¬ä¸€ä¸ªæ¨¡å—ä¸­è‡³å°‘æœ‰ 10 ä¸ªä»¥ä¸Šçš„æ¥å£ï¼Œè¿™ç§â€œç¬¨ç¬¨â€çš„åŠæ³•å°±ä¸æ˜¯å¾ˆé€‚ç”¨äº†ã€‚å“ªæ€•ç°åœ¨å¹´è½»ä½“åŠ›å¥½ï¼Œæœ‰ 100 ä¸ªæ¥å£ï¼Œä¹Ÿå¯ä»¥å†™è¿™æ ·çš„ä»£ç ä¸€ç™¾éï¼Œéšç€å…¬å¸å‘å±•å£®å¤§åï¼Œé™¤äº†è¦æŠŠè¯·æ±‚çš„è€—æ—¶å†™åˆ°æ—¥å¿—é‡Œä¹‹å¤–ï¼Œå¯èƒ½ä¸šåŠ¡è¿˜éœ€è¦å°†è€—æ—¶ä¸Šä¼ åˆ°å¯è§†åŒ–ç›‘æ§å½“ä¸­ï¼Œä»£ç å°±ä¼šå‘ç”Ÿå¦‚ä¸‹æ”¹åŠ¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;hello&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;we&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ReponseWriter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;timeStart&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;we&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;timeElapsed&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Since&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeStart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;logger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeElapsed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// æ–°å¢è€—æ—¶ä¸ŠæŠ¥åŠŸèƒ½
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;metrics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Upload&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;timeHandler&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timeElapsed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ´‹è‘±æ¨¡å¼&#34;&gt;æ´‹è‘±æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬æœ‰ 100 ä¸ªæ¥å£éƒ½æœ‰è¿™ç§åŠŸèƒ½ä¿®æ”¹éœ€æ±‚ï¼Œè€Œå¦‚æœæœ‰å‡ ç™¾ä¸Šåƒä¸ªæ¥å£ï¼Œæ¯ä¸ªæ¥å£éƒ½è¦æ”¹ä¸€éï¼Ÿæ‰€ä»¥æˆ‘ä»¬æœ‰äº†ä¸­é—´ä»¶çš„æ€æƒ³ï¼Œæœ‰ä¸ªæ¡†æ¶ä¸­å«åš middleware æœ‰ç‚¹æ¡†æ¶ä¸­å« filter (Java æ¡†æ¶ä¸­å¤šè¿™ä¹ˆå«ï¼Œæ¯”å¦‚ Spring)ï¼Œä¸­é—´ä»¶çš„æœ¬è´¨å…¶å®å°±æ˜¯å®ç°äº† 23 ç§è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§ï¼Œè´£ä»»é“¾æ¨¡å¼ (Chain of Responsibility Pattern)ï¼Œæˆ–è€…å«åšæ‹¦æˆªå™¨æ¨¡å¼ï¼Œåˆæˆ–è€…å«è£…é¥°å™¨æ¨¡å¼ï¼Œè¿˜æœ‰çš„åœ°æ–¹ç§°ä¹‹ä¸ºä»£ç†æ¨¡å¼ã€æ´‹è‘±æ¨¡å¼ç­‰ç­‰ï¼Œå®ƒä»¬çš„å®ç°éƒ½æ˜¯å·®ä¸å¤šçš„ä¸œè¥¿ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>æ‚è°ˆâ€”â€”è½¯ä»¶å¼€å‘å¦‚ä½•é€‰æ‹©ä¼˜ç§€çš„æ¡†æ¶ï¼Ÿ</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day41-how_to_choose_structure/day41-how_to_choose_structure/</link>
      <pubDate>Wed, 22 Dec 2021 20:58:12 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day41-how_to_choose_structure/day41-how_to_choose_structure/</guid>
      
      <description>&lt;p&gt;åœ¨ç¼–ç¨‹å½“ä¸­ï¼Œå½“æˆ‘ä»¬æŒæ¡äº†ç¼–ç¨‹è¯­è¨€çš„åŸºç¡€çŸ¥è¯†ã€ç»è¿‡ä¸€æ®µæ—¶é—´ç¼–ç¨‹ç»ƒä¹ ä¹‹åä¼šå‘ç°ä¸‰ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¡¹ç›®å¤æ‚&lt;/strong&gt;ã€‚æœ€ç›´æ¥çš„å°±æ˜¯ä»£ç è¶Šå†™è¶Šå¤šï¼Œå¤¸å¼ åˆ°æ‰€æœ‰ä»£ç å †ç§¯åœ¨ä¸€ä¸ªæ–‡ä»¶ï¼Œæ¯”å¦‚å•æ–‡ä»¶ 10 w è¡Œä»£ç ã€‚è¿™æ˜¯å› ä¸ºæ²¡æœ‰åŸ¹å…»å¥½çš„ä»£ç ä¹ æƒ¯ã€æ²¡æœ‰è½¯ä»¶è®¾è®¡ä¸é‡æ„çš„ä¸€äº›ç†å¿µï¼Œè€Œå¦‚æœä»£ç ç´ å…»å¥½ä¸€ç‚¹ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæŠŠä»£ç æ‹†åˆ†æˆå‡ ä¸ªæ–‡ä»¶ï¼Œå¹¶æ ¹æ®ç›®å½•è¿›è¡Œåˆ†ç±»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ²¡æœ‰è§„èŒƒ&lt;/strong&gt;ã€‚æ¥ä¸Šä¸€æ¡ï¼Œä¹Ÿè®¸ä»£ç å¤šäº†æˆ‘ä»¬ä¼šå¼€å§‹è¯•ç€å°†ä»£ç æ‹†åˆ†æˆå‡ ä¸ªæ–‡ä»¶ï¼Œä½†å…¶å®æ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ€æƒ³ï¼Œæˆ‘ä»¬è¿˜æ˜¯å®¹æ˜“ç»§ç»­åœ¨æ‹†åˆ†å‡ºçš„æ–‡ä»¶ä¸­é‡æ–°å†™å‡ºä¸ª 10 w è¡Œä»£ç çš„å•æ–‡ä»¶ï¼Œå¹¶åœ¨éœ€è¦ä¿®æ”¹ä»£ç çš„æ—¶å€™ä¸œç¿»è¥¿ç¿»æ‰¾ï¼Œæµªè´¹äº†æ—¶é—´ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é‡å¤å†™ä»£ç &lt;/strong&gt;ã€‚æˆ‘ä»¬ä¼šå‘ç°å½“æƒ³è¦å®ç°å‡ ä¸ªä¸åŒåŠŸèƒ½çš„æ—¶å€™ï¼Œå®ƒä»¬çš„ä»£ç æ˜¯æœ‰å¾ˆå¤§éƒ¨åˆ†ä¸€æ ·çš„ç»“æ„ï¼Œæ¯”å¦‚æ¥å£å¼€å‘ä¸­çš„æŠ½è±¡ç±»ã€‚æˆ‘ä»¬å¾ˆå¸Œæœ›æœ‰ä¸€ä¸ªæ¨¡æ¿ï¼Œä¹Ÿä¼šè‡ªå·±å»åšä¸€äº›å¯ä»¥å¤ç”¨çš„ä»£ç æ¨¡æ¿ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºäº†è§£å†³è¿™ä¸‰ä¸ªå¸¸è§çš„é—®é¢˜ï¼Œäºæ˜¯æœ‰è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…æˆ–å›¢é˜Ÿå¼€å‘äº†è§£å†³æ–¹æ¡ˆï¼Œæ¡†æ¶ã€‚å…¶ä»–å¼€å‘è€…å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªæ¡†æ¶ï¼ŒåŸºäºä½œè€…è®¾è®¡å¥½çš„é¡¹ç›®æ¶æ„ã€æ–‡ä»¶ç»“æ„å’Œä»£ç è§„èŒƒï¼Œèƒ½å¤Ÿåœ¨çŸ­æ—¶é—´å†…å¼€å‘é¡¹ç›®æ›´æ¸…æ™°ï¼Œæ€§èƒ½æ›´ä¼˜è¶Šï¼Œç»´æŠ¤æ›´ç®€å•çš„è½¯ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;è€Œæœ‰äº›æ¡†æ¶è¦ä¹ˆå› ä¸ºå¤ªç®€å•ï¼Œè¦ä¹ˆå› ä¸ºå¤ªå¤æ‚ï¼Œè€Œä¸èƒ½ç›´æ¥æ‹¿æ¥ç”¨ã€‚é™¤éç°æœ‰çš„æ¡†æ¶ä¸­çš„åŠŸèƒ½æ˜¯å’Œæˆ‘ä»¬ä¸šåŠ¡ä¸­çš„éœ€æ±‚æ˜¯å®Œå…¨åŒ¹é…ï¼Œè€Œä¸”å…¶ä¸­çš„ä»£ç ä¸æ˜¯å¤æ‚ã€èƒ½å¤Ÿå¾ˆå¿«é˜…è¯»å®Œï¼Œè¿™ç§æ¡†æ¶ç›´æ¥æ‹¿æ¥ç”¨æ˜¯éå¸¸åˆé€‚çš„ã€‚ä½†å®é™…ä¸­æœ‰ä¸€ä¸ªå’Œéœ€æ±‚æ¯”è¾ƒå¥‘åˆçš„æ¡†æ¶ä¹Ÿæ˜¯å¾ˆéš¾æ‰¾çš„ã€ç”šè‡³æ²¡æœ‰çš„ï¼Œæ‰¾å¾—åˆ°çš„è¯é‚£éƒ½æ˜¯è¿æ°”å¥½çš„æƒ…å†µäº†ã€‚å°¤å…¶æ˜¯å¤§å…¬å¸ï¼Œåšå¤§äº†ä¹‹åï¼Œè‚¯å®šä¼šæœ‰å’Œåˆ«äººä¸ä¸€æ ·è‡ªå·±çš„å®šåˆ¶éœ€æ±‚ï¼Œè¿™ä¸ªå°±ä¸åœ¨ä»Šå¤©è®¨è®ºçš„æ¡†æ¶èŒƒç•´å†…äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå¤©æ¥èŠèŠä¸€äº›åä¸»è§‚ç‚¹çš„å†…å®¹ï¼Œæ€ä¹ˆåˆ¤æ–­æ¡†æ¶çš„ä¼˜åŠ£ï¼Ÿè¿™é‡Œæˆ‘ä»¬ä¸è®¨è®ºå…·ä½“æŸä¸ªæ¡†æ¶ã€ä»£ç å†™å¾—å¥½ä¸å¥½ã€‚æœ‰å‡ ä¸ªæ¡†æ¶è®¾è®¡æ—¶éœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼Œå¦‚æœæ¡†æ¶ç¬¦åˆäº†ï¼Œé‚£ä¹ˆè¯´æ˜å¯èƒ½ä¼šæ˜¯ä¼˜ç§€çš„é¡¹ç›®ï¼šä»£ç è§„èŒƒã€è‡ªåŠ¨åŒ–ã€å¹³å°åŒ–ã€é›†æˆåŒ–ã€ç»„ä»¶åŒ–ã€æ’ä»¶åŒ–ã€é€šç”¨åŒ–ã€‚å¦‚æœæˆ‘ä»¬åœ¨ä¼ä¸šä¸­æ˜¯æ‰®æ¼”ä¼ä¸šè‡ªç ”æ¡†æ¶çš„è®¾è®¡è€…ï¼Œè€ƒè™‘è¿™å‡ ä¸ªé—®é¢˜ä¹Ÿæ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç è§„èŒƒ&#34;&gt;ä»£ç è§„èŒƒ&lt;/h2&gt;
&lt;p&gt;ä¸è€ƒè™‘ä¸€ä¸ªæ¡†æ¶çš„å·¥ç¨‹è´¨é‡ï¼Œå¦‚æœæˆ‘ä»¬äº²è‡ªå»çœ‹ï¼Œä»…å‡­è‡ªå·±çš„æ„Ÿå—ï¼Œäº²è‡ªå»çœ‹ä»£ç çš„å…¶å®æ¯”è¾ƒå®¹æ˜“å‘ç°ä»£ç å†™å¾—æ˜¯å¦å¥½ã€‚è¿™é‡Œä»¥ Golang çš„æ¡†æ¶ä¸ºä¾‹ï¼Œä¸€ä¸ªä»£ç è§„èŒƒçš„æ¡†æ¶ï¼Œæ˜¯è€è€å®å®è§„è§„çŸ©çŸ©ç”¨ä¸Šé™æ€ä»£ç æ£€æŸ¥å·¥å…· GolangCI-Lint å¹¶ä¸”éµå®ˆç€ Go ç¤¾åŒºçš„è§„èŒƒã€‚è€Œä¸è§„èŒƒçš„æ¡†æ¶è™½ç„¶å£°åŠ¿æµ©å¤§çš„ï¼Œä½†æ³¨é‡Šå†™å¾—å¾ˆå°‘ï¼Œä»£ç å¾ˆä¹±ï¼Œéšå¤„å¯è§ä¸çŸ¥é“å“ªé‡Œæ¥çš„ä¸‹åˆ’çº¿çš„å‘½åï¼ˆGolang ä¸­çš„å‘½åæ˜¯ä»¥å°é©¼å³°å‘½åæ³•ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è‡ªåŠ¨åŒ–&#34;&gt;è‡ªåŠ¨åŒ–&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Layout ä»£ç è‡ªåŠ¨ç”Ÿæˆï¼ˆDDD/Clean Atchï¼‰&lt;/li&gt;
&lt;li&gt;æœåŠ¡ä¸Šçº¿è‡ªåŠ¨å‘å¸ƒ&lt;/li&gt;
&lt;li&gt;è‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£&lt;/li&gt;
&lt;li&gt;æœåŠ¡æ¥å…¥ SDK è‡ªåŠ¨ç”Ÿæˆ&lt;/li&gt;
&lt;li&gt;å¸¸è§ code snippetï¼ˆboilerplateï¼‰å†…ç½®åœ¨ CLI å·¥å…·å†…&lt;/li&gt;
&lt;li&gt;ä¸è¦è®©ç”¨æˆ·å»å¤åˆ¶ç²˜è´´ï¼Œæˆ‘ä»¬æ¥å¸®ä»–è‡ªåŠ¨å†™å¥½&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬æ—¢ç„¶è¦å†™ä¸€ä¸ªæ¡†æ¶ï¼Œé‚£ä¹ˆå†™æ–°æ¥å£çš„æ—¶å€™ï¼Œæ¶‰åŠåˆ°å¤§é‡çš„é‡å¤ä»£ç ï¼Œæ¯”å¦‚åœ¨å…¥å£å†™ä¸€ä¸ª Controller æˆ–è€…åœ¨ logic ä¸­å†™ä¸€ä¸ªå…¥å£åˆæˆ–è€…åœ¨ Dao é‡Œé¢åˆè¦å†™ä¸€äº›å…¥å£ä¹‹ç±»çš„ä¸œè¥¿ç­‰ç­‰ã€‚è¿™äº›ä¸œè¥¿å…¶å®éƒ½æ˜¯åº”è¯¥æœ‰è‡ªåŠ¨çš„å·¥å…·å»ç”Ÿæˆçš„ï¼Œé€šè¿‡æ¨¡æ¿ç”Ÿæˆå·¥å…·å»å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒç‚¹è¯´çš„æ˜¯å…¬å¸ä¸­å†…éƒ¨çš„äº¤æ¥éœ€è¦æ‰“é€šï¼Œä¸€æ—¦æœåŠ¡ä¸Šçº¿ä¹‹åï¼Œå°±ä¼šè‡ªåŠ¨å‘å¸ƒåˆ°æœåŠ¡æ³¨å†Œç³»ç»Ÿé‡Œï¼Œä¸å†éœ€è¦æˆ‘ä»¬äººå·¥å»åšä¸€å¤§å †çš„ç”³è¯·æµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;è‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£ï¼Œè¿™ä¸ªåŠŸèƒ½åœ¨ Golang é¢†åŸŸæœ€æ—©å‘ç°äº Beego æ¡†æ¶ã€‚å¯ä»¥ç›´æ¥æŠŠ Swagger é›†æˆåˆ°é‡Œé¢ï¼Œé€šè¿‡æ³¨è§£çš„æ–¹å¼ï¼Œèƒ½æŠŠæˆ‘ä»¬å¼€å‘çš„æ¥å£ç›¸åº”çš„æ–‡æ¡£éƒ½ç”Ÿæˆå‡ºæ¥ã€‚ç›®å‰ï¼Œåœ¨å…¬å¸å†…ï¼Œæœ‰äº›å¼€å‘ä¸ä¸€å®šä¼šç”¨åˆ° HTTPï¼Œé‚£å°±éœ€è¦æœ‰ä¸€å¥—ä¸“é—¨çš„æ¥å£å®šä¹‰ï¼Œå°±æ¯”å¦‚ Thrift å®šä¹‰çš„ IDLï¼ŒgRPC çš„ Protobufã€‚æœ‰äº›æ–°å…´å…¬å¸ä¼šç”¨åˆ° gRPCï¼Œè¿™ç§æƒ…å†µè¿˜æ˜¯ç”¨ pb å»åšæœåŠ¡çš„å®šä¹‰ï¼Œå› æ­¤å°±éœ€è¦æŠŠ pb å’Œå®¢æˆ·ç«¯çš„ç”Ÿæˆå°½é‡éƒ½åšå‡ºå¹³å°ï¼Œå¹¶ä¸”å†™ä¸€äº›æ³¨é‡Šï¼Œç„¶åè‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£ï¼Œåšå¥½è‡ªåŠ¨åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬å››ç‚¹æ˜¯è¯´å¦‚æœæˆ‘ä»¬æƒ³æ¥å…¥ä¸€ä¸ªå¤–éƒ¨çš„æœåŠ¡ï¼Œä¸èƒ½è¯´è¦åˆ°å¤„æ‰¾æ€ä¹ˆæ¥å…¥ï¼Œæœ€å¥½æ˜¯æœ‰å¹³å°æ”¯æŒï¼Œé€šè¿‡å¹³å°èƒ½å¤Ÿæœåˆ°ç›¸å…³çš„æœåŠ¡æ¥å£ï¼Œç›´æ¥åœ¨æ¥å£çš„ç½‘é¡µä¸Šèƒ½ç›´æ¥æŠŠæˆ‘ä»¬çš„ SDK ç”Ÿæˆå¥½ï¼Œå¹¶ä¸”æœ€å¥½æ˜¯èƒ½å¤ŸæŠŠæˆ‘ä»¬çš„ä»£ç ç³»ç»Ÿä¹Ÿæ‰“é€šï¼Œç›´æ¥å°±èƒ½æŠŠç›¸åº”çš„ä»£ç ç”Ÿæˆåœ¨æˆ‘ä»¬çš„ä»£ç åº“ä¸­ï¼Œç„¶åç”¨ä¸ªç®€å•çš„ git pull å°±å¥½äº†ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åæ˜¯å¸¸è§çš„æ¨¡æ¿ä»£ç  code snoppet æœ€å¥½å°±å†…ç½®åœ¨ CLI å·¥å…·é‡Œé¢ï¼ŒåŒæ—¶ä¸è¦è®©ç¨‹åºå‘˜å»å…¶ä»–é¡¹ç›®ä¸­ä¸æ–­å¯»æ‰¾ï¼Œç„¶åç²˜è´´è¿‡æ¥ï¼Œè¿™æ˜¯æ¯”è¾ƒå®¹æ˜“å‡ºå¤„çš„ï¼Œä¸å¤ªå»ºè®®ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”å¹¶å‘æ¨¡å‹ï¼ˆ3ï¼‰</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day40-memory_model_3/day40-memory_model_3/</link>
      <pubDate>Fri, 17 Dec 2021 07:24:03 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day40-memory_model_3/day40-memory_model_3/</guid>
      
      <description>&lt;p&gt;åœ¨ Go è¯­è¨€çš„å†…å­˜æ¨¡å‹æ–‡æ¡£ä¸­ä¼šä¸“é—¨å¯¹ Happen-before è¿›è¡Œæè¿°ï¼Œç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šåˆ†ææ–‡ç« å¯¹è¿™ä¸ªæ¦‚å¿µè¿›è¡Œäº†é˜è¿°ï¼Œä½†å­˜åœ¨ä¸€äº›åœºæ™¯çš„è¯¯åŒºã€‚é‚£ä¹ˆ Happen-before åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç‰¹å¾ï¼Ÿåœ¨æ­¤ä¹‹å‰æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹ goroutine çš„ä¸‰ä¸ªåŸºæœ¬ç‰¹å¾ã€‚&lt;/p&gt;
&lt;h2 id=&#34;goroutine&#34;&gt;Goroutine&lt;/h2&gt;
&lt;p&gt;åœ¨ Go è¯­è¨€ä¸­ï¼Œ&lt;strong&gt;åŒä¸€ä¸ª goroutine å†…çš„é€»è¾‘æœ‰ä¾èµ–çš„è¯­å¥æ‰§è¡Œï¼Œæ»¡è¶³é¡ºåºå…³ç³»&lt;/strong&gt;ã€‚æ¯”å¦‚æˆ‘åœ¨ä¸€ä¸ª goroutine é‡Œæ‰§è¡Œäº†ä¸€ä¸ªå¾ˆç®€å•çš„å‡½æ•°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;printA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åªè¦åœ¨å…¶ä»– goroutine ä¸­æ²¡æœ‰å¯¹è¿™ä¸ª a åšä¿®æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬é¢„æœŸå’Œå®é™…çš„ç¨‹åºè¿è¡Œç»“æœä¸€å®šæ˜¯ 1ï¼Œä¸ä¼šæ˜¯ a=0 çš„æƒ…å†µã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸ªåŸºæœ¬çš„é€»è¾‘ä¿è¯ï¼Œå¦‚æœè¯´ä¿è¯ä¸äº†çš„è¯ï¼Œç›¸å½“äºæˆ‘ä»¬çš„ä»£ç ç»“æœæ²¡æœ‰åŠæ³•å»åšé¢„æµ‹äº†ã€‚æ‰€ä»¥ä»ç›´è§‰ä¸Šæˆ‘ä»¬å°±èƒ½ç†è§£è¿™å¥è¯ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ªç‰¹å¾æ˜¯è¯´ï¼š&lt;strong&gt;ç¼–è¯‘å™¨/CPU å¯èƒ½å¯¹åŒä¸€ä¸ª goroutine ä¸­çš„è¯­å¥æ‰§è¡Œè¿›è¡Œæ‰“ä¹±ï¼Œä»¥æé«˜æ€§èƒ½ï¼Œä½†ä¸èƒ½ç ´åå…¶åº”ç”¨åŸæœ‰çš„é€»è¾‘&lt;/strong&gt;ã€‚æ¯”å¦‚æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œåˆ†åˆ«ä¼šä¿®æ”¹ x å’Œ y å˜é‡çš„å€¼ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹ä¸­ä¿®æ”¹äº† x çš„å€¼ï¼Œå¹¶ä¸”è½½å…¥äº†å˜é‡ yã€‚è™½ç„¶æ²¡æœ‰ä¿®æ”¹ yï¼Œä½†æå‰é¢„åŠ è½½æé«˜äº†æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åä¸ªç‰¹å¾ï¼Œ&lt;strong&gt;ä¸åŒçš„ goroutine è§‚å¯Ÿåˆ°çš„å…±äº«å˜é‡çš„ä¿®æ”¹é¡ºåºå¯èƒ½ä¸ä¸€æ ·&lt;/strong&gt;ã€‚å…¶å®ä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ä¸ŠæœŸæ–‡ç« ä¸­æåˆ°çš„å†…å­˜é‡æ’ã€‚åœ¨ Go è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬è¯´åˆ°åŒæ­¥çš„æ—¶å€™æ˜¯æŒ‡åœ¨ goroutine ä¹‹é—´å‘ç”Ÿçš„æ“ä½œï¼Œå…¶å®åœ¨å…¶ä»–è¯­è¨€ä¸­æ˜¯å’Œçº¿ç¨‹çš„æ¦‚å¿µå’Œæ“ä½œæ˜¯ä¸€æ ·çš„ã€‚è¯´åˆ°åº•ï¼Œgoroutine åœ¨è¿è¡Œçš„æ—¶å€™å°±æ˜¯åœ¨çº¿ç¨‹ä¸Šå»æ‰§è¡Œçš„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ŠæœŸæ–‡ç« æˆ‘ä»¬è¿˜çŸ¥é“äº†å¯ä»¥é€šè¿‡ä½¿ç”¨ Litmus å·¥å…·æµ‹è¯•å’Œè§‚å¯Ÿå†…å­˜é‡æ’ï¼Œä¸ä»…å¦‚æ­¤ï¼Œæˆ‘ä»¬åœ¨ç”¨ Go è¯­è¨€è¿›è¡Œå¹¶å‘ç¼–ç¨‹çš„æ—¶å€™ï¼Œå¦‚æœå†™çš„ä»£ç ä¸å¤Ÿä¸¥è°¨ï¼Œåœ¨çº¿ä¸Šäº§ç”Ÿé”™è¯¯çš„å¯èƒ½æ€§æœ‰ 1/100wï¼Œé‚£åœ¨æ‰¾ bug çš„æ—¶å€™çœŸçš„æ˜¯å¾ˆè¦å‘½çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211217075309734&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202112170753914.png&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;happen-before&#34;&gt;Happen-before&lt;/h2&gt;
&lt;p&gt;åœ¨å®˜æ–¹çš„å¹¶å‘æ¨¡å‹æ–‡æ¡£ä¸­ï¼ŒHappen-before è¯´çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªç‰¹å¾ï¼šInit å‡½æ•°ä¸€å®šåœ¨ main.main ä¹‹å‰æ‰§è¡Œï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A pkg importt B pkgï¼Œé‚£ä¹ˆ B pkg çš„ init å‡½æ•°ä¸€å®šåœ¨ A pkg çš„ init å‡½æ•°ä¹‹å‰æ‰§è¡Œã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”å¹¶å‘æ¨¡å‹ï¼ˆ2ï¼‰</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day39-memory_model_2/day39-memory_model_2/</link>
      <pubDate>Wed, 15 Dec 2021 10:45:03 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day39-memory_model_2/day39-memory_model_2/</guid>
      
      <description>&lt;p&gt;ä¸ŠæœŸæ–‡ç« è¯´åˆ° Go è¯­è¨€ä¸­ï¼Œå•å˜é‡çš„åŸå­çš„è¯»æˆ–å†™æ“ä½œï¼ŒCPU çš„å¤šæ ¸å¿ƒä½¿ç”¨äº† mesi åè®®æ¥ç¡®ä¿æ­£ç¡®æ€§ï¼Œä¹Ÿå°±è¶³å¤Ÿäº†ã€‚ä½†æ˜¯ mesi åè®®è¿˜å­˜åœ¨ä¸€äº›ç¼ºé™·ï¼šå¦‚æœå¯¹æŸä¸ªå˜é‡è¿›è¡Œå…ˆè¯»ï¼Œç„¶åä¿®æ”¹ï¼Œå†å†™ï¼Œè¿™æ ·çš„å¤šæ­¥æ“ä½œï¼Œmesi åè®®æ˜¯æ— æ³•è§£å†³çš„ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦é™¤äº†è¯»å’Œå†™ä¹‹å¤–çš„æŒ‡ä»¤ï¼Œèƒ½å¤Ÿä¿è¯è¿™ç§ä¸€ç³»åˆ—æ“ä½œçš„åŸå­æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å†…å­˜é‡æ’&#34;&gt;å†…å­˜é‡æ’&lt;/h2&gt;
&lt;p&gt;mesi èƒ½å¤Ÿä¿è¯å•å˜é‡å…¨å±€é¡ºåºçš„æ­£ç¡®æ€§ï¼Œä½†å…¶ä»–å¤šå˜é‡çš„å…¨å±€é¡ºåºå…¶å®æ˜¯ä¿è¯ä¸äº†çš„ã€‚åœ¨ Go è¯­è¨€çš„å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œæœ‰ä¸ªå«åšå†…å­˜é‡æ’ï¼ŒæŒ‡çš„æ˜¯å†…å­˜çš„è¯»/å†™æŒ‡ä»¤é‡æ’ã€‚ä¸ºä»€ä¹ˆä¼šç”¨åˆ°å†…å­˜é‡æ’å‘¢ï¼Ÿä¸€äº›ç¡¬ä»¶æˆ–è€…ç¼–è¯‘å™¨ä¼šå¯¹ç¨‹åºè¿›è¡Œä¸€äº›æŒ‡ä»¤ä¼˜åŒ–ï¼Œä¼˜åŒ–åçš„ç»“æœå¯èƒ½ä¼šå¯¼è‡´ç¨‹åºç¼–ç æ—¶çš„é¡ºåºä¸ä»£ç ç¼–è¯‘åçš„å…ˆåé¡ºåºä¸ä¸€è‡´ã€‚å› æ­¤ï¼Œå†…å­˜é‡æ’å°±ä¸“é—¨ä¸ºå…¶é€‚é…ï¼Œæå‡ç¨‹åºæ‰§è¡Œæ•ˆç‡ï¼Œå‡å°‘ä¸€äº›IOæ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å·¥å…· &lt;strong&gt;litmus&lt;/strong&gt; æ¥éªŒè¯å†…å­˜é‡æ’ï¼Œå…·ä½“æš‚æ—¶ä¸æ¼”ç¤ºäº†ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šæ–‡ç« ã€‚å®ƒä¼šæ¨¡æ‹Ÿæœ¬æœºä¸Šä¸€äº›å¤šçº¿ç¨‹çš„è¯»å†™æŒ‡ä»¤ï¼Œæ¥å¯¹å…¶ç»“æœåšä¸€äº›åˆ¤æ–­ã€‚è¿™éƒ¨åˆ†å†…å®¹ä¸éš¾ï¼Œåˆšæ¯•ä¸šçš„å­¦ç”Ÿåœ¨é¢è¯•çš„æ—¶å€™ä¹Ÿä¼šé‡åˆ°é¢è¯•å®˜é—®å…¶ä¸­çš„ä¸€äº›æ±‡ç¼–æŒ‡ä»¤æ˜¯ä»€ä¹ˆæ„æ€ã€‚å…¶ä¸­æ¶‰åŠåˆ°çš„æ±‡ç¼–æºç ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥ç®€åŒ–ä¸ºä»¥ä¸‹çš„ä¼ªä»£ç &lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211215232733958&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202112152327098.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;Litmus æµ‹è¯•è§‚å¯Ÿå†…å­˜é‡æ’çš„ä¼ªä»£ç &lt;/center&gt;
&lt;p&gt;å…³é”®æ¥äº†ï¼Œæˆ‘ä»¬åœ¨å†™å¹¶å‘ä»£ç çš„æ—¶å€™ï¼Œå¦‚ä½•è€ƒè™‘å†…å­˜é‡æ’å‘¢ï¼Ÿå¯¹å¤§å¤šæ•°ç¨‹åºå‘˜æ¥è¯´ï¼Œä¸ç”¨è€ƒè™‘è¿™ä¸ªï¼Œæ—¢ç„¶çŸ¥é“åœ¨å¹¶å‘çš„æ—¶å€™è¯¸å¦‚ä»¥ä¸Šçš„æ“ä½œéƒ½å¯èƒ½æœ‰å†…å­˜é‡æ’ï¼Œé‚£ä¹ˆéœ€è¦ä¿è¯å…¶é¡ºåºæ€§çš„æ—¶å€™ï¼Œç›´æ¥&lt;strong&gt;åœ¨ä¸¤éåŠ ä¸Šäº’æ–¥é”&lt;/strong&gt;å°± OK äº†ã€‚è€Œå¦‚æœè¿˜è¦è€ƒè™‘æ›´é«˜çš„æ€§èƒ½ï¼Œå°±éœ€è¦ä½¿ç”¨ä¸€äº›å·¥å…·ã€‚&lt;/p&gt;
&lt;h2 id=&#34;memory-barrier&#34;&gt;Memory barrier&lt;/h2&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬è¦é˜»æ­¢å†…å­˜é‡æ’çš„å‘ç”Ÿï¼Œåªèƒ½ä½¿ç”¨ Memory barrierã€‚é¦–å…ˆï¼Œå®ƒå’Œå†…å­˜å›æ”¶ GC ä¸­çš„ write barrier å’Œ read barrier ä¸æ˜¯ä¸€å›äº‹ã€‚ç½‘ä¸Šä¸€äº›æ–‡ç« ä¸­ä¼šæŠŠå®ƒä»¬æ··æ·†èµ·æ¥ï¼Œå› ä¸ºå®ƒä»¬çœ‹èµ·æ¥éƒ½æœ‰ä¸ª barrierã€‚è™½ç„¶çœ‹èµ·æ¥éƒ½æœ‰ barrierï¼Œä½†å…¶å®å®Œå…¨ä¸æ˜¯ä¸€å›äº‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211215233343872&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202112152333933.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ ï¼ŒMemory barrier æ˜¯ä¸ºäº†é˜²æ­¢å„ç§ç±»å‹çš„è¯»å†™é‡æ’è€Œä¸“é—¨è®¾è®¡å‡ºçš„å·¥å…·ã€‚æ¯”å¦‚è¯´ atomic loadï¼Œåœ¨å…¶ä»–è¯­è¨€ä¸­éƒ½éœ€è¦åŠ æ¡ä»¶ï¼Œè¯¸å¦‚ requireã€flag çº¿æ€§ä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ GC ä¸­çš„ write/read barrier å…¶å®æ˜¯æŒ‡åœ¨å †ä¸Šçš„æŒ‡é’ˆä¿®æ”¹ä¹‹å‰ï¼Œæ’å…¥çš„ä¸€å°æ®µçš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šçš„ barrier å…¶å®å¯¹äºåš Go åº”ç”¨å¼€å‘çš„ç¨‹åºå‘˜æ¥è¯´å¯ä»¥ä¸ç”¨è¯¦ç»†äº†è§£ï¼Œåªè¦çŸ¥é“ç¨‹åºåœ¨åŠ é”çš„æ—¶å€™èƒ½å¤Ÿä¿è¯æ­£ç¡®æ€§å°± OK äº†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;false-sharing&#34;&gt;False sharing&lt;/h2&gt;
&lt;p&gt;ä¸ŠæœŸæ–‡ç« æˆ‘ä»¬è¯´åˆ°äº† CPU é‡‡å–çš„æ˜¯åˆ†å±‚å­˜å‚¨ç»“æ„ï¼ŒL1 cache æ˜¯ 64 ä¸ªå­—èŠ‚ã€‚è€Œå®é™…ä¸Šæˆ‘ä»¬å…±äº«å˜é‡è¿˜ä¸åˆ° 64 å­—èŠ‚ã€‚æ¯”å¦‚æˆ‘è‡ªå®šä¹‰äº†ä¸€ä¸ª structï¼Œå®ƒåªæœ‰ 16 å­—èŠ‚ã€‚ä½†å¯¹ CPU æ¥è¯´ï¼Œå®ƒä»å†…å­˜å»åœ¨åŠ è½½è¿™ä¸ª struct çš„æ—¶å€™ï¼Œå®ƒä¼šæŠŠè¿™ä¸ª struct ä¸´è¿‘çš„å†…å­˜ä¹Ÿä¸€èµ·åŠ è½½åˆ° L1 cache ä¸­ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”å†…å­˜æ¨¡å‹</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day38-memory_model/day38-memory_model/</link>
      <pubDate>Mon, 13 Dec 2021 20:06:42 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day38-memory_model/day38-memory_model/</guid>
      
      <description>&lt;p&gt;ä»Šå¤©èŠä¸€èŠ Go è¯­è¨€ä¸­çš„å†…å­˜æ¨¡å‹ï¼Œè¿™éƒ¨åˆ†å†…å®¹åœ¨å¯¹äºåˆ©ç”¨ sync åº“åœ¨è¿›è¡Œåº”ç”¨å¼€å‘ä¸­ç”¨å¤„ä¸å¤§ï¼Œä¸è¿‡æˆ‘ä»¬åœ¨é¢è¯•è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°ï¼Œè¿™é‡Œåšä¸ªè®°å½•ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ—¥å¸¸çš„å¼€å‘ä¸­ï¼Œ&lt;strong&gt;åªè¦çŸ¥é“ä½¿ç”¨æ˜¾ç¤ºåŒæ­¥å°±å¯ä»¥ä¿è¯æ­£ç¡®æ€§&lt;/strong&gt;ã€‚ä¹Ÿå°±æ˜¯è¯´åªè¦å‘ç”Ÿäº†å¹¶å‘çš„æƒ…å†µï¼Œé‚£ä¹ˆä¸€å®šè¦æ˜¾ç¤ºåœ°ä½¿ç”¨åŒæ­¥æ‰‹æ®µã€‚æ˜¾ç¤ºåŒæ­¥æ‰‹æ®µï¼Œé€šå¸¸æ˜¯æŒ‡ channel æˆ–è€…é”ã€‚å¹¶ä¸”ï¼Œèƒ½å¤Ÿç”¨ channel å’Œé”çš„æƒ…å†µä¸‹ï¼ŒåŸºæœ¬ä¸Šï¼Œåªè¦æ²¡æœ‰ race å‡ºç°ï¼Œå°±èƒ½å¤Ÿä¿éšœç¨‹åºçš„æ­£ç¡®æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æˆ‘ä»¬åœ¨å¼€å‘ä¸­æœ‰æ—¶å€™ä¼šç»™åˆ«äººæä¾›ååº•å±‚çš„åº“ï¼Œé‚£ä¹ˆéœ€è¦å¯¹åº•å±‚æœ‰äº†è§£æ‰èƒ½åšå¾—å‡ºæ¥ã€‚å› æ­¤å°±é‡åˆ°äº† Memory Model å†…å­˜æ¨¡å‹ã€‚&lt;/p&gt;
&lt;h1 id=&#34;memory-model&#34;&gt;Memory Model&lt;/h1&gt;
&lt;p&gt;åœ¨å…·ä½“äº†è§£ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦äº†è§£ç›®å‰çš„ CPU æ¶æ„ã€‚ç°ä»£çš„ CPU å†…éƒ¨çš„å­˜å‚¨å…¶å®éƒ½æ˜¯åˆ†çº§çš„ï¼Œæ¯”å¦‚ä»¥ä¸‹å°±æ˜¯ä¸ªå¤šæ ¸ CPU çš„å…¸å‹æ¶æ„å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211213211849363&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202112132118518.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;ç°ä»£è®¡ç®—æœºçš„å¤šçº§å­˜å‚¨ç»“æ„&lt;/center&gt;
&lt;p&gt;åœ¨è¿™ä¸ªå†…éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° L1 cacheï¼Œå…·ä½“çš„ä¿¡æ¯å¯ä»¥é€šè¿‡å‘½ä»¤ &lt;strong&gt;lscpu&lt;/strong&gt; æŸ¥çœ‹åˆ°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211213212551827&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202112132125962.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;lscpu å‘½ä»¤ç»“æœ&lt;/center&gt;
&lt;p&gt;L1 cache æœ‰ä¸¤ç§ç±»å‹ï¼š L1 Data cache å’Œ L1 Structure cacheã€‚æˆ‘ä»¬å¹³æ—¶åœ¨ç¼–ç¨‹ä¸­ç»å¸¸é‡åˆ°çš„å°±æ˜¯ L1 Data cacheï¼Œä¹Ÿå°±æ˜¯åœ¨ä¿®æ”¹å†…å­˜ä¸­å˜é‡çš„æ—¶å€™ï¼Œä¸€å®šéœ€è¦ä»å†…å­˜ä¸­ä¸€çº§ä¸€çº§åœ°æŠŠå®ƒåŠ è½½åˆ° L3 â†’ L2 â†’ L1â†’ core æœ€ç»ˆæ‰èƒ½è®© CPU æ ¸å¿ƒå»å¤„ç†æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;L1 cache åˆä¼šè¢«åˆ’åˆ†ä¸ºå¤šä¸ªæ›´ç»†ç²’åº¦çš„ cache lineï¼Œæ¯ä¸ª cache line çš„å¤§å°ä¸º 64 bytesã€‚è¿™å°±æ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆåœ¨ç¨‹åºä¸­ç»å¸¸ä¼šçœ‹åˆ°ï¼Œæœ‰äº›æ•°æ®ç»“æ„ä¼šåœ¨å…¶æœ€åä¸è¶³çš„æƒ…å†µä¸‹è¡¥è¶³ä¸º 64 å­—èŠ‚æˆ– 128 å­—èŠ‚ï¼Œéƒ½æ˜¯æœ‰å¯èƒ½å‘ç”Ÿçš„ã€‚æˆ‘ä»¬åœ¨ Linux ä¸­ä¹Ÿå¯ä»¥å†åŠ¨åŠ¨æ‰‹å»åšäº›å®è·µå°è¯•ä¸€ä¸‹è¿™ä¸ªå‘½ä»¤ï¼š&lt;strong&gt;getconf LEVEL1_DCACHE_LINESIZE&lt;/strong&gt;ï¼Œå¯ä»¥çœ‹åˆ° Data cache çš„ cache line é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯ 64 ä¸ªå­—èŠ‚ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”å¸¸è§å¹¶å‘ bugï¼ˆ3ï¼‰</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day37-normal_sync_bug_3/day37-normal_sync_bug_3/</link>
      <pubDate>Fri, 10 Dec 2021 21:18:46 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day37-normal_sync_bug_3/day37-normal_sync_bug_3/</guid>
      
      <description>&lt;p&gt;&lt;img alt=&#34;img&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202112102120452.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;è¿™åªåœ°é¼ åˆæ¥äº†ï¼Œè¯´æ˜ä»Šå¤©æˆ‘åˆæ¥è®² Go è¯­è¨€å¹¶å‘ä¸­å¸¸è§çš„ä¸€äº›bugï¼Œçœ‹ä»£ç å’¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¼•ç”¨ä¼ é€’&#34;&gt;å¼•ç”¨ä¼ é€’&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;17&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;21&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// write
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* Create a new goroutine */&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;   &lt;span class=&#34;c1&#34;&gt;// before modify
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// modified
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;apiVersion&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;v1.%d&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// read
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}()&lt;/span&gt;   &lt;span class=&#34;c1&#34;&gt;// before modify
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// modified
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œè¯´çš„æ˜¯ï¼Œæ›´æ”¹ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å¯åŠ¨ä¸€ä¸ª goroutineï¼Œè¿™ä¸ª goroutine ç”¨çš„æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œé—­åŒ…æ•è·äº†å¤–é¢çš„å˜é‡ iï¼Œè€Œè¿™ä¸ª i ç”¨çš„è¿˜æ˜¯åœ°å€ã€‚è€Œè¿­ä»£å™¨ for ç”¨çš„ä¹Ÿæ˜¯åŒä¸€ä¸ª i çš„åœ°å€ï¼Œæ‰€ä»¥åˆ° goroutine æ‰§è¡Œçš„æ—¶å€™ï¼Œæœ€å Print å‡ºæ¥çš„ i å°±æ˜¯æœ€åä¸€ä¸ªäº†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„ä¿®æ”¹æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯æŠŠ i å½“ä½œå‚æ•°ä¼ è¿‡å»ï¼Œå› ä¸ºæ˜¯å€¼ä¼ é€’ï¼Œä¹Ÿå°±è§£å†³é—®é¢˜äº†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;waitgroup&#34;&gt;WaitGroup&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;peer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;send&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mu&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mu&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;idle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;   &lt;span class=&#34;c1&#34;&gt;// modified
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;   &lt;span class=&#34;c1&#34;&gt;// before modify
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;o&#34;&gt;......&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;stopped&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;peer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;stop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mu&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;stopped&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mu&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Wait&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œä»£ç è¿˜æ˜¯æ¶‰åŠåˆ° WaitGroup çš„ç”¨æ³•ï¼Œåœ¨ä¿®æ”¹ä»£ç ä¹‹å‰ï¼ŒAdd æ˜¯æ”¾åœ¨ go func ä¸­ï¼Œæœ‰å¯èƒ½ WaitGroup ä¾æ—§æ˜¯ 0ï¼ŒWaitGroup çš„ Wait å°±ä¸éœ€è¦ç­‰å¾…ä»»ä½• goroutine å°±èƒ½æ‰§è¡Œå®Œæˆï¼Œæ•´ä¸ªç¨‹åºä¹Ÿå°±æ‰§è¡Œç»“æŸäº†ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”å¸¸è§å¹¶å‘ bugï¼ˆ2ï¼‰</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day36-normal_sync_bug_2/day36-normal_sync_bug_2/</link>
      <pubDate>Wed, 08 Dec 2021 16:20:11 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day36-normal_sync_bug_2/day36-normal_sync_bug_2/</guid>
      
      <description>&lt;p&gt;ä¸ŠæœŸæ–‡ç« è¯´åˆ°äº†ä¸€äº›å¸¸è§å¹¶å‘ bug çš„åœºæ™¯ï¼Œæœ¬æœŸæ–‡ç« ç»§ç»­èŠèŠ Go è¯­è¨€ä¸­å¸¸è§çš„ä¸€äº› bugï¼Œç»§ç»­å†™ bugï¼ˆå½“ç„¶ä¸æ˜¯ï¼‰ï¼Œå¹¶é€šè¿‡ä»£ç æ¡ˆä¾‹æ¥è®²è§£ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;img&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202112081853217.png&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;k8s&#34;&gt;K8S&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œæœ‰æ®µä¸€ç¯‡è®ºæ–‡çš„ä»£ç ï¼Œè¿™ç¯‡è®ºæ–‡æ€»ç»“äº†ä¸šç•Œæ¯”è¾ƒçŸ¥åçš„ bugï¼Œæœ‰ä¸€äº›æ˜¯ k8sã€docker ç­‰è€³ç†Ÿèƒ½è¯¦çš„åº”ç”¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å‘ç°ï¼Œå³ä¾¿æ˜¯ Google çš„å·¥ç¨‹å¸ˆï¼Œä»–ä»¬è¿˜æ˜¯ä¼šå†™å‡ºæ¥ä¸€äº› bugï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;finishReq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Duration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ob&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ob&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// before modify
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ob&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// modified
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// block
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;After&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ®µä»£ç çš„æ€è·¯å…¶å®å¾ˆç®€å•ï¼šæˆ‘ç°åœ¨æƒ³å¾€å¤–éƒ¨å‘ä¸€ä¸ªè¯·æ±‚ï¼ŒåŒæ—¶è¦æ§åˆ¶è¶…æ—¶ã€‚å¦‚æœè¯·æ±‚è¶…æ—¶é‚£ä¹ˆå°±ä¼šç»™ç”¨æˆ·è¿”å›ä¸€ä¸ªç©ºã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œå‰ä¸¤è¡Œåˆ†åˆ«æœ‰ä¸¤æ®µæ³¨é‡Šï¼Œè¯´çš„æ˜¯å®˜æ–¹ä¿®æ”¹å‰çš„ä»£ç  channel æ²¡æœ‰ç¼“å†²ï¼Œè¿˜æœ‰æ®µæ˜¯ä¿®æ”¹åçš„ä»£ç  channel ä¸­åŠ å…¥äº† 1 çš„ç¼“å†²ã€‚å¦‚æœæ˜¯æœªä¿®æ”¹å‰çš„ä»£ç ï¼Œåœ¨æ•´ä¸ªç¨‹åºè·‘èµ·æ¥åï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å…ˆæƒ³ä¸€ä¸‹å¯èƒ½ä¼šå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åœ¨å¯åŠ¨äº† goroutine å»å‘è¿œç«¯å‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼Œå¦‚æœå‘ç”Ÿäº†è¶…æ—¶ï¼Œå°±ä¼šè§¦å‘ select ç›´æ¥è¿”å›ç©ºã€‚è¯´æ˜ channel çš„å¯¹ç«¯å·²ç»æ²¡æœ‰æ¶ˆè´¹è€…åœ¨ç­‰å¾…ç»“æœï¼Œè€Œæ²¡æœ‰ç¼“å†²æ—¶ï¼Œchannel çš„ buffer ä¸º 0ï¼Œé‚£ä¹ˆå¾€ channel å‘é€ç»“æœçš„ goroutine ä¸€å®šä¼šé˜»å¡ï¼Œä¹Ÿå°±æ„å‘³ç€è¿™ä¸ª goroutine æ°¸è¿œé‡Šæ”¾ä¸äº†ï¼Œæœ€ç»ˆé€ æˆ goroutine æ³„éœ²ã€‚ä¹Ÿå°±æ˜¯è¶…æ—¶ä¸€æ¬¡å°±æ³„éœ²ä¸€ä¸ª goroutineï¼Œå¦‚æœè¶…æ—¶è¶Šå¤šï¼Œæ³„éœ²çš„ goroutine æ¶¨å¹…ä¹Ÿè¶Šå¤šã€‚&lt;/p&gt;
&lt;h2 id=&#34;syncwaitgroup&#34;&gt;sync.WaitGroup&lt;/h2&gt;
&lt;p&gt;è¿™ä¸ªæ˜¯ sync.WaitGroup çš„ bug&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WaitGroup&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;plugins&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;plugins&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Dont&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Wait&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;   &lt;span class=&#34;c1&#34;&gt;// before modify
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Wait&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;   &lt;span class=&#34;c1&#34;&gt;// modified
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;çœ‹åˆ°ä»£ç å¤§å®¶å¯ä»¥æ€è€ƒä¸€äº›è¿™æ®µä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”å¸¸è§å¹¶å‘ bug</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day35-normal_sync_bug/day35-normal_sync_bug/</link>
      <pubDate>Mon, 06 Dec 2021 22:30:43 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day35-normal_sync_bug/day35-normal_sync_bug/</guid>
      
      <description>&lt;p&gt;è¿™æœŸæ–‡ç« æ¥èŠä¸€èŠ Go è¯­è¨€ä¸­å¸¸è§çš„å¹¶å‘ bug æœ‰å“ªäº›ï¼Œå¹¶ä¸æ˜¯è¯´è¦å†™ bugï¼Œè€Œæ˜¯åœ¨å‡ºç°è¿™äº›æƒ…å†µçš„æ—¶å€™ï¼Œæœ‰ç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;img&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202112062349044.png&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;æ­»é”&#34;&gt;æ­»é”&lt;/h2&gt;
&lt;p&gt;æ­»é”åº”è¯¥æ˜¯æœ€å¸¸è§çš„ï¼Œæ¥çœ‹çœ‹ä»£ç ï¼Œåº”è¯¥æ˜¯æœ€ç›´è§‚çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RLock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RUnlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RLock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RUnlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// do some logic
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œä¸¾çš„ä¾‹å­éƒ½æ˜¯å¯¹å¯¹è±¡ a åŠ é”ï¼Œå¯ä»¥è®¤ä¸ºå®ƒæ˜¯ä¸ªå…¨å±€å˜é‡ã€‚a.RLock() åŠ äº†è¯»é”ï¼Œdefer å»¶è¿Ÿè§£é” a.RUnlock()ï¼Œè¿™æ—¶å€™è°ƒç”¨äº†ä¸€ä¸ªå‡½æ•° yã€‚è¿›å…¥å‡½æ•° y ä»¥åï¼Œå†æ¬¡æ‰§è¡Œ a.RLock()å’Œ defer è§£é” a.RUlock()ã€‚è¿™ä¸ªè¿‡ç¨‹ç›¸å½“äºé€’å½’åœ°æ‰§è¡Œäº†ä¸¤æ¬¡ a.RLock()ï¼Œå°±ä¼šå‘ç”Ÿæ­»é”ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰æ®µè¾ƒä¸ºç®€å•çš„ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ‰ä¸¤ä¸ªå‡½æ•° x å’Œ yï¼Œéƒ½æœ‰ a.Lock() å’Œ b.Lock()ï¼Œåªä¸è¿‡é¡ºåºä¸ä¸€æ ·ã€‚åœ¨ä¸»ç¨‹åºä¸­ï¼Œå¹¶å‘æ‰§è¡Œè¿™ä¸¤ä¸ªå‡½æ•°æ—¶ï¼Œå°±ä¼šå‡ºç°å¾ªç¯ç­‰å¾…ï¼Œæ²¡æœ‰åŠæ³•å¯¹é”è¿›è¡ŒæŠ¢å ï¼Œä¹Ÿå°±å‡ºç°äº†æ­»é”ã€‚&lt;/p&gt;
&lt;p&gt;é¢å¯¹æ­»é”é—®é¢˜ï¼Œæˆ‘ä»¬å¸¸è§çš„è§£å†³åŠæ³•æ˜¯é€šè¿‡ pprof è¿›å…¥ goroutine é¡µé¢æŸ¥çœ‹ã€‚Go è¯­è¨€è‡ªå¸¦äº† pprof å·¥å…·ï¼Œåªè¦è¿›ç¨‹ä¸æŒ‚æ‰å°±å¯ä»¥è¿›å…¥ goroutine é¡µé¢æ’ä»¶ã€‚ä½†æ˜¯æœ‰ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚æœæ­»é”æ˜¯å¶å‘çš„æƒ…å†µï¼Œé‚£å°±éœ€è¦æƒ³åŠæ³•åœ¨æ•´ä¸ªè¿›ç¨‹å´©æºƒæ‰ä¹‹å‰å®Œæ•´åœ°æŠŠ goroutine çš„æ ˆä¿å­˜ä¸‹æ¥ï¼ˆåˆæ˜¯å¦ä¸€ä¸ªè¯é¢˜äº†ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¹¶å‘è¯»å†™&#34;&gt;å¹¶å‘è¯»å†™&lt;/h3&gt;
&lt;p&gt;Map concurrent writes/readsï¼ŒMap çš„å¹¶å‘è¯»å†™ä¹Ÿæ˜¯å®¹æ˜“å‡ºç°æ­»é”çš„æƒ…å†µã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”å¹¶å‘ç¼–ç¨‹æ¨¡å¼</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day34-sync_programming_pattern/day34-sync_programming_pattern/</link>
      <pubDate>Fri, 03 Dec 2021 20:32:49 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day34-sync_programming_pattern/day34-sync_programming_pattern/</guid>
      
      <description>&lt;p&gt;é€šå¸¸æˆ‘ä»¬åœ¨å†™ Go ä»£ç çš„æ—¶å€™ï¼Œå¬å¾—æ¯”è¾ƒå¤šçš„æ˜¯ Go å’Œä¼ ç»Ÿå¹¶å‘æ¨¡å¼ä¸ä¸€æ ·ã€‚Go è¯­è¨€é‡‡ç”¨çš„æ˜¯ CSP æ¨¡å¼ï¼Œå³ &amp;ldquo;Do not communicate by sharing memory; instead, share memory by communicating.&amp;rdquo;&lt;/p&gt;
&lt;p&gt;è¿™å¥è‹±æ–‡çœ‹èµ·æ¥æœ‰äº›ç„ä¹ï¼Œä½†å…¶å®æ˜¯åœ¨è¯´ï¼Œé™¤äº† runtime ä¸­çš„ hchan ç»“æ„ï¼Œæ²¡æœ‰å…¶ä»–ç»“æ„èƒ½å¤Ÿå…±äº«å†…å­˜ã€‚è€Œå¦‚æœæˆ‘ä»¬æƒ³è¦å…±äº«æ•°æ®çš„è¯ï¼Œå°±éœ€è¦ chan å»åšä»»åŠ¡å‘é€ï¼Œè¿™æ—¶å€™åšçš„å…¶å®æ˜¯ä¸€äº›æ‹·è´çš„å·¥ä½œã€‚å¬èµ·æ¥æœ‰ç‚¹æŠ½è±¡ï¼Œæ¥çœ‹ä¸€äº›åˆ«äººå†™çš„ä»£ç ç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªä¾‹å­ Fan-in æ‰‡å…¥ï¼Œä¹Ÿå°±æ˜¯å¤šä¸ªåˆ†æ”¯åˆå¹¶ä¸ºä¸€ä¸ªåˆ†æ”¯ï¼Œæˆ–åˆå¹¶ä¸ºå°‘æ•°çš„åˆ†æ”¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211203230406497&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202112032304677.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 1-1ï¼šFan-in åˆå¹¶å¤šä¸ª channel ä¾‹å­&lt;/center&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211203230942784&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202112032309871.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 1-2ï¼šFan-in åˆå¹¶å¤šä¸ª channel ä¾‹å­&lt;/center&gt;
&lt;p&gt;è¿™é‡Œçš„ä»£ç æ„æ€æ˜¯è¦æŠŠå¤šä¸ª channel çš„ç»“æœåˆå¹¶åˆ°åŒä¸€ä¸ª channel ä¸­å»ï¼Œè¿™æ ·æ¶ˆè´¹è€…åªç”¨å»æ¶ˆè´¹ä¸€ä¸ªå°±å¥½äº†ã€‚å‡½æ•°ä¸­ç¬¬ä¸€è¡Œæ˜¯é€šè¿‡åˆ¤æ–­è¾“å…¥çš„ channel æ•°ç»„çš„é•¿åº¦æ¥å®ç°çš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœæ˜¯ 0ï¼Œè¯´æ˜é€’å½’ç»“æŸç›´æ¥è¿”å›ï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœæ˜¯ 1ï¼Œå°±è¿”å›å½“å‰çš„ channelï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœæ˜¯ 2ï¼Œå°±éœ€è¦è°ƒç”¨ mergeTwo å‡½æ•°ã€‚è¿™ä¸ª mergeTwo å‡½æ•°ä¹Ÿå°±æ˜¯ç®€å•çš„ for å¾ªç¯ + select ç»“åˆæ¥å®ç°çš„ã€‚&lt;/li&gt;
&lt;li&gt;æœ€å defaultï¼Œå°±æ˜¯ä¸æ–­å¯¹ channel çš„é•¿åº¦é™¤ 2 ï¼Œç„¶åé€’å½’åœ°è°ƒç”¨ mergeTwo æœ€ç»ˆæ¥å®ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¦åˆå¹¶ channel çš„è¯ï¼Œæ•°é‡ä¸ä¼šå¾ˆå¤šå‡ ç™¾ä¸Šåƒä¸ªï¼Œå¸¸è§çš„æ˜¯ 5-6 ä¸ªã€‚å¹¶ä¸”æ›´åŠ å®é™…ç¯å¢ƒä¸­ï¼Œæ¯ä¸ª channel è¿˜æœ‰å…¶å…·ä½“çš„åå­—çš„ï¼Œä¹Ÿå°±åªéœ€è¦å†™ä¸€ä¸ª select å°±å¯ä»¥äº†ï¼Œä¸ç”¨åƒä»¥ä¸Šä»£ç ä¸­ä¸å®šé•¿çš„ channel å®ç°æ–¹å¼è¦ç®€å•å¾—å¤šã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”å¹¶å‘æ•°æ®ç»“æ„ï¼ˆ3ï¼‰</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day33-sync_structure_3/day33-sync_structure_3/</link>
      <pubDate>Wed, 01 Dec 2021 13:46:40 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day33-sync_structure_3/day33-sync_structure_3/</guid>
      
      <description>&lt;p&gt;ä¸€ä¸ªä¼˜è´¨çš„ç¨‹åºã€ä¼˜ç§€çš„è®¾è®¡ä¸æ˜¯å‡­ç©ºäº§ç”Ÿçš„ï¼Œè€Œæ˜¯ç»è¿‡ç”±ç®€è‡³ç²¾ï¼Œä¸æ–­è¿­ä»£äº§ç”Ÿå‡ºæ¥çš„ã€‚åœ¨ä¸ŠæœŸæ–‡ç« ä¸­ï¼Œæˆ‘ä»¬äº†è§£äº† Go è¯­è¨€ä¸­çš„ä¿¡å·é‡ semaphore å’Œäº’æ–¥é” sync.Mutexï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæˆ‘ä»¬è¿˜å¯ä»¥å®ç°æ›´åŠ å¤æ‚çš„é”ã€‚&lt;/p&gt;
&lt;h2 id=&#34;syncrwmutex&#34;&gt;sync.RWMutex&lt;/h2&gt;
&lt;p&gt;è¯»å†™é” (&lt;strong&gt;sync.RWMutex&lt;/strong&gt;)ï¼Œå¯ä»¥æ¥çœ‹ä¸‹å®ƒçš„æ•°æ®ç»“æ„å’Œè¿ä½œé€»è¾‘ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;sync.RWMutex ç»“æ„ (2)&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202112012248318.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 1ï¼šsync.RWMutex ç»“æ„ä¸é€»è¾‘&lt;/center&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°å®ƒçš„ç¬¬ä¸€ä¸ªç»“æ„å«åš w å…¶å®å°±æ˜¯äº’æ–¥é” sync.Mutexã€‚åœ¨è¿™é‡Œçš„ä½œç”¨æ˜¯ä¸ºäº†æŒ¡ä½å¤§éƒ¨åˆ†å†™æ“ä½œçš„ Goroutineï¼Œåªè®©ç¬¬ä¸€ä¸ªè¿›æ¥çš„èƒ½å¤Ÿå’Œå…¶ä»–çš„è¯»æ“ä½œçš„ Goroutine å»åšç«äº‰ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æœ‰ä¸€ä¸ªå†™ Goroutine writer è¿›æ¥äº†ï¼Œå¦‚æœè¿˜æœ‰å…¶ä»– reader åœ¨åšæ“ä½œï¼Œå°±ä¼šæŠŠè¿™ä¸ªè¿›å…¥çš„æŒ‚è½½åœ¨ writerSem åé¢çš„ sudogã€‚å¦‚æœåé¢æ¥äº†æ–°çš„ writerï¼Œå‰é¢çš„ writer è¿˜æ²¡æœ‰é€€å‡ºçš„è¯ï¼Œé‚£ä¹ˆæ–°çš„ writer å°±éœ€è¦æŒ‚è½½åœ¨ä¹‹å‰çš„äº’æ–¥é” sync.Mutex ä¸Šçš„ sudog åé¢ã€‚åŒæ ·çš„ writer å’Œ reader ä¹Ÿä¼šåœ¨ä¸åŒé˜¶æ®µå»åšäº›ç«äº‰å’Œå”¤é†’çš„æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦æœ‰ä¸€ä¸ª writer è¿›å…¥å¹¶ä¸”è°ƒç”¨äº† lockï¼Œé‚£ä¹ˆå°±ä¼šåœ¨ writerSem åé¢æŒ‚è½½ä¸€ä¸ªé˜»å¡çš„ sudogï¼Œå¹¶ä¸”æŠŠ readerCount å‡å»ä¸€ä¸ªæœ€å¤§çš„å€¼ï¼Œå³å›¾ä¸­ 1 å·¦ç§» 30 çš„å€¼ï¼Œæœ€ç»ˆè®© readerCount å˜ä¸ºè´Ÿæ•°ã€‚å½“ readerCount å˜ä¸ºè´Ÿæ•°æ—¶ï¼Œreader åœ¨æ‰§è¡Œ Runlcok çš„æ“ä½œä»¥åï¼Œä¼šå‘ç°å½“å‰å·²ç»å˜ä¸ºç‰¹æ®Šæ¨¡å¼äº†ï¼Œæ‰€ä»¥å°±ä¼šåæ¥è¿›æ¥æ–°æ¥çš„ readerï¼Œè¿™äº›æ–°çš„ reader  ä¼šå»è°ƒç”¨ Rlockï¼Œé‚£ä¹ˆå°±ä¼šæŒ‚è½½åœ¨ readerSem é˜Ÿåˆ—ä¸­ã€‚readerSem å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªä¿¡å·é‡ï¼Œæœ€ç»ˆä¼šå¯¹åº”ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œå¹¶ä¸”æœ€åçš„ç»“æ„ readerWait çš„æ•°é‡å…¶å®æ˜¯å’Œè¿™ä¸ªç­‰å¾…é˜Ÿåˆ—çš„æ•°é‡æ˜¯å¯¹åº”çš„ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”å¹¶å‘æ•°æ®ç»“æ„ï¼ˆ2ï¼‰</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day32-sync_structure_2/day32-sync_structure_2/</link>
      <pubDate>Mon, 29 Nov 2021 22:39:57 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day32-sync_structure_2/day32-sync_structure_2/</guid>
      
      <description>&lt;p&gt;æœ¬æœŸæ–‡ç« ç»§ç»­æ‹†è§£ Go è¯­è¨€ä¸­å¹¶å‘éƒ¨åˆ†çš„ä¸€äº›å†…ç½®æ•°æ®ç»“æ„ï¼Œäº†è§£å®ƒä»¬çš„è¿è¡Œé€»è¾‘ï¼Œæ¢³ç†å…¶ä¸­çš„è¦ç‚¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;syncpool&#34;&gt;sync.Pool&lt;/h2&gt;
&lt;p&gt;ä¸ŠæœŸè¯´åˆ° sync.Pool ç»“æ„ï¼Œå®ƒçš„åº”ç”¨åœºåˆéå¸¸å¤šï¼Œä¸è¿‡ä¸»è¦æ˜¯ç”¨äº GC æ ‡è®°é˜¶æ®µæ¶ˆè€—å¤§é‡ CPU æˆ–è€…è¿›ç¨‹ RSS å ç”¨è¿‡é«˜æƒ…å†µã€‚å¹¶ä¸”é€šè¿‡æ¢³ç†æºç å‘ç°å®ƒçš„é€»è¾‘æ˜¯å’Œç¼“å­˜çš„æœºåˆ¶å¾ˆåƒæ˜¯ï¼Œéƒ½æ˜¯å¤šçº§ç¼“å­˜ç»“æ„çš„ã€‚ä¸ŠæœŸä¹Ÿç•™ä¸‹äº†ä¸€ä¸ªæ‚¬å¿µï¼Œå½“ sync.Once å‘ç”Ÿ GC æ—¶ï¼Œsync.Pool çš„ä»£ç é€»è¾‘æœ‰æœ‰æ€æ ·çš„å˜åŒ–å‘¢ï¼Ÿè¿˜æ˜¯çœ‹å›¾ç›´è§‚ç‚¹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;sync.Pool GC æ—¶é€»è¾‘&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111292258979.svg&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 1ï¼šsync.Pool GC æ—¶çš„é€»è¾‘&lt;/center&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œå½“å‘ç”Ÿ GC çš„æ—¶å€™ï¼Œç›¸å½“äºå°† local å’Œ localSize ç›´æ¥å‘ä¸‹å¹³ç§»ï¼Œlocal èµ‹å€¼ç»™äº† victimï¼ŒlocalSize èµ‹å€¼ç»™äº† Pã€‚å¦‚æœä¹‹å‰ victim å’Œ victimSize æœ‰å€¼çš„è¯å°±ç›´æ¥ä¸¢å¼ƒæ‰ã€‚é€šè¿‡è¿™ç§æ–¹å¼å°†ä»¥å‰ä¸éœ€è¦çš„ã€å¤šå‡ºæ¥çš„å¯¹è±¡æ·˜æ±°æ‰ã€‚å¦‚æœæŠŠå…¶ä¸­çš„å€¼åˆšæ›¿æ¢æ‰ï¼Œå¹¶ä¸”åˆéœ€è¦ä» sync.Pool ä¸­ get è·å–å¯¹è±¡çš„æ—¶å€™ï¼Œlocal ä¸ºç©ºï¼Œå› æ­¤å°±ä¼šå» victim ä¸­å»å¯»æ‰¾å€¼ã€‚å…¶ä»–çš„é€»è¾‘ï¼Œå…¶å®å’Œä¹‹å‰çš„é€»è¾‘æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚æœ€ç»ˆï¼Œå¦‚æœ victim æ‰¾ä¸åˆ°å€¼ï¼Œå°±ä¼šå» P ä¸­å»æ‰¾å€¼ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå°æ’æ›²ã€‚sync.Pool æœ€æ—©çš„å®ç°ä¸­ï¼Œæ“ä½œ shared æ˜¯æœ‰é”çš„ã€‚è€Œä» Go 1.13 å¼€å§‹ï¼Œè¿™ä¸ªé”å°±ç›´æ¥è¢«å¹²æ‰äº†ï¼Œå˜æˆäº†å³ä¸‹æ–¹çœ‹èµ·æ¥æœ‰ç‚¹è¯¡å¼‚çš„åŒç«¯é“¾è¡¨ï¼Œå®ƒå°±å¯ä»¥æ— é”è¿›è¡Œæ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å¹¶ä¸”æ—©æœŸçš„ sync.Pool åœ¨è¿›è¡Œ GC çš„æ—¶å€™ä¼šå°†å…¶ä¸­çš„å¯¹è±¡å®Œå…¨æ¸…ç©ºæ‰çš„ã€‚å¦‚æœæˆ‘ä»¬çš„ç¨‹åºå¯¹ sync.Pool æœ‰é‡åº¦ä½¿ç”¨çš„æƒ…å†µï¼Œé‚£ä¹ˆåœ¨æ¯æ¬¡ GC å®Œæˆä¹‹åï¼Œå¦‚æœæ­£å¥½å‘ç”Ÿäº†ä¸€ä¸ªæµé‡è¯·æ±‚çš„æ•°é‡æ³¢åŠ¨ï¼Œå°±ä¼šé€ æˆåº”ç”¨ç¨‹åºå¤§é‡åœ°é˜»å¡åœ¨ä¸€ä¸ªé”ä¸Šï¼Œä¼šæœ‰çŸ­æ—¶é—´çš„å»¶è¿Ÿæ³¢åŠ¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;semaphore&#34;&gt;semaphore&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;ä¿¡å·é‡ ï¼ˆsemaphoreï¼‰&lt;/strong&gt;ï¼Œæ˜¯å’Œæ‰€æœ‰é”ç›¸å…³çš„å®ç°åŸºç¡€å’Œæ‰€æœ‰åŒæ­¥åŸè¯­çš„åŸºç¡€è®¾æ–½ã€‚å¯ä»¥çœ‹çœ‹è¿™å¹…å›¾ï¼š&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”å¹¶å‘æ•°æ®ç»“æ„</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day31-sync_structure/day31-sync_structure/</link>
      <pubDate>Thu, 25 Nov 2021 23:22:55 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day31-sync_structure/day31-sync_structure/</guid>
      
      <description>&lt;p&gt;æˆ‘ä»¬ä¹‹æ‰€ä»¥ä½¿ç”¨ Go è¯­è¨€ï¼Œå…¶ä¸­ä¸€ä¸ªå¾ˆå¤§çš„åŸå› æ˜¯å®ƒåŸç”Ÿæ”¯æŒé«˜å¹¶å‘ï¼Œé€šè¿‡ Goroutine å’Œ Channel å®Œç¾å®ç°ã€‚å¹¶ä¸” Go çš„å¹¶å‘æ˜¯å±äºä¸€ç§ CSP å¹¶å‘ç¼–ç¨‹æ¨¡å¼çš„å®ç°ã€‚å¦‚æœæˆ‘ä»¬æƒ³å¾ˆå¥½åˆ©ç”¨åˆ°è¿™ä¸ªç‰¹æ€§ï¼Œ&lt;strong&gt;çŸ¥å…¶ç„¶çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œæ˜¯å­¦ä¹ é˜¶æ®µæœ€å¥½çš„æˆæœ&lt;/strong&gt;ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­é‡åˆ°é—®é¢˜æ‰èƒ½æœ‰çš„æ”¾çŸ¢ã€‚ä¸‹é¢å°±ä»å®ƒçš„ä¸€äº›åŸºç¡€æ•°æ®ç»“æ„å¼€å§‹è®²èµ·ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å¹¶å‘å†…ç½®æ•°æ®ç»“æ„&#34;&gt;å¹¶å‘å†…ç½®æ•°æ®ç»“æ„&lt;/h1&gt;
&lt;h2 id=&#34;synconce&#34;&gt;sync.Once&lt;/h2&gt;
&lt;p&gt;åœ¨ Go è¯­è¨€çš„å¹¶å‘ç»“æ„ä¸­ï¼Œæ¯”è¾ƒç®€å•çš„æ˜¯ sync.Onceã€‚å¯ä»¥åœ¨æºç  sync/once.go ä¸­çœ‹åˆ°ä»£ç å¹¶ä¸å¤šï¼Œä½†æ³¨é‡Šå¾ˆå¤šï¼Œè¿˜æœ‰éƒ¨åˆ†æˆ‘ç”¨çœç•¥å·éšå»äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;img&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111262246986.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 1ï¼šonce.go æºç &lt;/center&gt;
&lt;p&gt;sync.Once åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼ŒDOã€‚ä¸è¿‡å…¶ä¸­æœ‰ä¸€äº›è¦ç‚¹ï¼Œå¦‚æœ done è¢«äººä¿®æ”¹äº†ï¼Œé‚£ä¹ˆå°±éœ€è¦åšä¸€ä¸ªåˆå§‹åŒ–ï¼›å¦‚æœæ˜¯éé›¶å°±å¯ä»¥ç›´æ¥è¿”å›äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ o.Do éœ€è¦ä¿è¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆå§‹åŒ–æ–¹æ³•å¿…é¡»ä¸”åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ã€‚&lt;/li&gt;
&lt;li&gt;Do è¿”å›åï¼Œåˆå§‹åŒ–ä¸€å®šå·²ç»æ‰§è¡Œå®Œæˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥ä¸Šä»£ç è™½ç„¶éå¸¸çŸ­ï¼Œä½†æˆ‘ä»¬åœ¨å¼€å‘çš„æ—¶å€™è¿˜æ˜¯ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ã€‚è¿™æ—¶è¿˜å¾—æ‰¾å®˜æ–¹ï¼Œä¸ºä»€ä¹ˆä¸€å®šè¦æœ‰ atomic æ“ä½œï¼Œä¸ºä»€ä¹ˆ doSlow å‡½æ•°ä¸­ä¸€å®šè¦ç”¨ defer æ¥å¤„ç†é”ã€‚å®˜æ–¹å¯¹è¿™äº›â€œçœ‹ä¼¼â€å¾ˆåŸºç¡€çš„é—®é¢˜æ„Ÿåˆ°çƒ¦ï¼Œäºæ˜¯å°±å†™äº†éå¸¸å¤šçš„æ³¨é‡Šï¼Œè®©è¯»è€…è‡ªå·±å»ææ‡‚è¿™äº›é—®é¢˜ï¼ˆä»å›¾ä¸­çœ‹åˆ°ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„åŠŸèƒ½å¯¹äºä¸šåŠ¡å±‚å¼€å‘çš„ Gopher æ¥è¯´æ¯”è¾ƒç®€å•ï¼šæœ‰ä¸ªå…¨å±€èµ„æºï¼Œåªèƒ½å¤Ÿåˆå§‹åŒ–ä¸€æ¬¡ï¼Œéœ€è¦åˆå§‹åŒ–å®Œæˆä¹‹åå»æ‰§è¡Œä¸€äº›æ“ä½œï¼Œä¸è¿‡åˆå§‹åŒ–çš„å…¥å£å¯èƒ½ä¼šè¢«å¾ˆå¤šåœ°æ–¹è°ƒç”¨åˆ°ã€‚è¿™ç§æƒ…å†µå¾ˆå¸¸è§ï¼Œä¸€æ–¹é¢æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨åšç½‘ç»œç¼–ç¨‹çš„æ—¶å€™è¦å¤„ç†è¿æ¥ï¼Œå¦‚æœå¤šæ¬¡ close è¿æ¥ä¼šå‡ºç°è¯¡å¼‚çš„é”™è¯¯ã€‚æ‰€ä»¥æœ‰å¾ˆå¤šç½‘ç»œç¨‹åºä¸­çš„ Connection å¯¹è±¡å†åŠ ä¸ª Once å¯¹è±¡ï¼Œæ¥ä¿è¯å…³é—­åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;syncpool&#34;&gt;sync.Pool&lt;/h2&gt;
&lt;p&gt;è¿™ä¸ªç»“æ„ç”¨çš„åœºåˆéå¸¸éå¸¸å¤šï¼Œä¸è¿‡ä¸»è¦åœ¨ä¸¤ç§åœºæ™¯ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿›ç¨‹ä¸­ inuse_objects æ•°è¿‡å¤šï¼Œ&lt;strong&gt;gc mark æ¶ˆè€—å¤§é‡ CPU&lt;/strong&gt;ã€‚è¿™ç§æƒ…å†µå¤šå‡ºç°äºå½“æˆ‘ä»¬å‘ç°ç¨‹åºååé‡å¾ˆä½æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;è¿›ç¨‹ä¸­ inuse_objects æ•°è¿‡å¤šï¼Œ&lt;strong&gt;è¿›ç¨‹ RSS å ç”¨è¿‡é«˜&lt;/strong&gt;ã€‚è¿™ç§æƒ…å†µæ˜¯æˆ‘ä»¬çš„ç¨‹åºå¯èƒ½è¿è¡Œåœ¨æ¯”è¾ƒè‹›åˆ»çš„ç¯å¢ƒä¸‹ï¼Œæ¯”å¦‚ docker ä¸­å†…å­˜é™åˆ¶ï¼Œåªæœ‰ 2GB çš„å†…å­˜ã€‚å¦‚æœè¶…è¿‡çš„è¯è¿™ä¸ªè¿›ç¨‹å°±ä¼šè¢« killã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•æ˜¯åœ¨è¯·æ±‚ç”Ÿå‘½å‘¨æœŸå¼€å§‹æ—¶ï¼Œè°ƒç”¨ pool.Get å»è·å–ç¼“å­˜çš„ struct æˆ–è€… sliceï¼Œå½“è¯·æ±‚ç»“æŸæ—¶ï¼Œå†è°ƒç”¨ pool.Put æŠŠä¹‹å‰æ‹¿å‡ºæ¥çš„å¯¹è±¡å†æ”¾å›å»ã€‚åœ¨è¿™ç§æµç¨‹åœ¨å¼€æºé¡¹ç›® fasthttp ä¸­æœ‰å¤§é‡åº”ç”¨ï¼šhttps://github.com/valyala/fasthttp/blob/b433ecfcbda586cd6afb80f41ae45082959dfa91/server.go#L402 è¿™ä¸ªæ¡†æ¶å¯¹æˆ‘ä»¬å‡ ä¹èƒ½å¤Ÿçœ‹åˆ°çš„ç»“æ„éƒ½åšäº†ä¸€æ¬¡ä»¥ä¸Šçš„å¤ç”¨ï¼Œä¹Ÿå°±æ˜¯å„ç§èŠ±å¼çš„ sync.Poolã€‚å¹¶ä¸”å› ä¸ºå®ƒåœ¨å†…å­˜ä¼˜åŒ–æ–¹é¢åšå¾—æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥å®ƒçš„æ€§èƒ½ä¹Ÿè¦æ¯”å…¶ä»–å‡ ä¹æ‰€æœ‰çš„ç¬¬ä¸‰æ–¹ http åº“å’Œå®˜æ–¹çš„åº“è¦å¥½ä¸€äº›ï¼ˆå½“ç„¶è¿™ç§ä¼˜åŒ–éƒ½æ˜¯æœ‰ä»£ä»·çš„ï¼‰ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”GC è¡¥å……ä¸æ€»ç»“</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day30-gc_lean_and_summary/day30-gc_lean_and_summary/</link>
      <pubDate>Wed, 24 Nov 2021 21:33:37 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day30-gc_lean_and_summary/day30-gc_lean_and_summary/</guid>
      
      <description>&lt;p&gt;æœ€åä¸€ç¯‡å…³äº Go è¯­è¨€å†…å­˜ç®¡ç†ä¸åƒåœ¾å›æ”¶çš„æ–‡ç« ï¼Œå†å¯¹ä¹‹å‰æµç¨‹ä¸­åšä¸€äº›è¡¥å……ï¼Œç„¶åå¯¹è¿™æœŸç³»åˆ—æ–‡ç« åšä¸ªæ€»ç»“ã€‚&lt;/p&gt;
&lt;h2 id=&#34;gc-è¡¥å……&#34;&gt;GC è¡¥å……&lt;/h2&gt;
&lt;p&gt;åœ¨ GC æ ‡è®°æµç¨‹ä¸­æœ‰ä¸€ä¸ªç¯èŠ‚èƒ½å¤Ÿè¾…åŠ©æ ‡è®°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Goroutine ä¸­æœ‰ gcAssistBytes å­—æ®µã€‚&lt;/li&gt;
&lt;li&gt;å½“åå° gcWorker æ ‡è®°æ—¶ï¼Œä¼šç´¯ç§¯ creditï¼Œè®°å½•åœ¨ gcController.gbScanCredit ä¸­&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211124233351199&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111242333365.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 1ï¼šååŠ©æ ‡è®°æºç -åˆ¤å®š&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;Goroutine æƒ³æ‰§è¡Œå†…å­˜åˆ†é…ï¼Œè¦å…ˆå°è¯•å» gcController.bgScanCredit ä¸­å»å€Ÿå€ºï¼Œå¦‚æœå€Ÿåˆ°äº†è¶³å¤Ÿçš„å€ºï¼Œé‚£ä¹ˆå°±ä¸ç”¨ååŠ©æ ‡è®°ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå€Ÿä¸åˆ°ï¼Œé‚£å°±å…ˆååŠ©æ ‡è®°ï¼Œæ ‡è®°å®Œæˆåå†å»åˆ†é…å†…å­˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211124233409903&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111242334952.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 2ï¼šååŠ©æ ‡è®°æºç -åˆ†é…å†…å­˜&lt;/center&gt;
&lt;p&gt;åœ¨æ ‡è®°æµç¨‹é˜¶æ®µï¼Œå †ä¸Šå¯¹è±¡å¯èƒ½å‡ºç°å¼•ç”¨äº¤å‰æƒ…å†µï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;æ ‡è®°æµç¨‹-å †å¯¹è±¡å¼•ç”¨äº¤å‰æƒ…å†µ&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111242342645.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 3ï¼šå †ä¸Šå¯¹è±¡å¼•ç”¨äº¤å‰æƒ…å†µ&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªæ˜¯ isMarked å‰ªæ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211124233904984&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111242339052.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 4ï¼šisMarked æºç &lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;å¦ä¸€ä¸ªæ˜¯ atomic.Or8&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211124233915764&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111242339838.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 5ï¼šatomic.Or8 æºç &lt;/center&gt;
&lt;p&gt;å†è¡¥å……ä¸€äº›é›¶é›¶ç¢ç¢çš„å°çŸ¥è¯†ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GC çš„ CPU æ§åˆ¶ç›®æ ‡æ˜¯æ•´ä½“çš„ 25%ã€‚&lt;/li&gt;
&lt;li&gt;å½“ P = 4 * N æ—¶ï¼Œåªè¦å¯åŠ¨ N ä¸ª wroker å°±å¯ä»¥ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;å½“ P æ— æ³•è¢« 4 æ•´é™¤æ—¶ï¼Œéœ€è¦åƒè‹¦è€åŠ³çš„ gcMarkWorker æ¥å¸®åŠ©åšä¸€éƒ¨åˆ†å·¥ä½œï¼š
&lt;ul&gt;
&lt;li&gt;ä½œä¸ºå…¨å±€ GC å‘˜å·¥ Dedicated workerï¼Œéœ€è¦ä¸€ç›´å¹²æ´»ï¼ŒçŸ¥é“è¢«æŠ¢å ã€‚&lt;/li&gt;
&lt;li&gt;ä½œä¸ºå…¼èŒ GC å‘˜å·¥ Fractional workerï¼Œè¾¾åˆ°ä¸šç»©ç›®æ ‡ï¼ˆfractionalUtilizationGoalï¼‰æ—¶ï¼Œå¯ä»¥ä¸»åŠ¨è®©å‡ºã€‚&lt;/li&gt;
&lt;li&gt;å¦å¤–ä¸€ç§ IDLE æ¨¡å¼ã€‚åœ¨è°ƒåº¦å¾ªç¯ä¸­å‘ç°æ‰¾ä¸åˆ°å¯æ‰§è¡Œçš„ g ï¼Œå¹¶ä¸”æœ‰æ ‡è®°ä»»åŠ¡æ²¡æœ‰å®Œæˆçš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥å¼€å¯ IDLE æ¨¡å¼å»å¸®å¿™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Worker è¿è¡Œæ¨¡å¼ä½äºï¼š_p_.gcMarkWorkerModeã€‚&lt;/li&gt;
&lt;li&gt;æ ˆæœ¬èº«çš„å†…å­˜ï¼šnewstackã€shrinkstackã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ allocManual å’Œ freeManual ç›¸å½“äºæ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œä¸è®¡å…¥ heap_inuse å’Œ heap_sysï¼Œè€Œæ˜¯è®¡å…¥ stackinuse å’Œ stacksysã€‚&lt;/li&gt;
&lt;li&gt;æ ˆä¸Šå˜é‡çš„å†…å­˜å˜åŒ–ï¼šSP ç§»åŠ¨é”€æ¯ï¼Œç®€å•å¿«é€Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h1&gt;
&lt;p&gt;æœ€åæ¥åšä¸ªæ€»ç»“ï¼Œè¿˜æ˜¯ç®€å•å›é¡¾ä¸€ä¸‹åƒåœ¾å›æ”¶ä»£ç çš„æµç¨‹ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”ç°ä»£åŒ–æ ‡è®°ä¸¢å¤±è§£å†³æ–¹æ¡ˆ</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day29-morden_write_barrier/day29-morden_write_barrier/</link>
      <pubDate>Mon, 22 Nov 2021 11:49:45 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day29-morden_write_barrier/day29-morden_write_barrier/</guid>
      
      <description>&lt;p&gt;åœ¨ Go è¯­è¨€ GC ä¸­ï¼Œä¸ºé¿å…å¯¹è±¡ä¸¢å¤±ï¼Œå¯ä»¥åœ¨æ‰€æœ‰æŒ‡é’ˆæ“ä½œä¸­åŠ  Dijkstra barrierï¼Œè€Œ Go å®˜æ–¹è®¾è®¡è€…ä¸ºäº†é™ä½ Go è¿è¡Œç¯å¢ƒä¸­çš„æˆæœ¬ï¼Œä¸å¸Œæœ›æ ˆä¸Šçš„æ“ä½œé¢‘ç‡å¾ˆé«˜ï¼Œæ‰€ä»¥é™åˆ¶äº† Go ä¸èƒ½åœ¨æ ˆä¸Šæ“ä½œæŒ‡é’ˆæ—¶åŠ  barrierã€‚å› æ­¤ Dijkstra barrier å’Œ Yuasa barrier éƒ½å¤±æ•ˆäº†ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸º Go è¯­è¨€ä¸åœ¨æ ˆä¸Šå»åŠ ä¸€ä¸ª writebarrierï¼Œæ‰€ä»¥ä»»ä½•ä¸€ä¸ª barrier å•ç‹¬æ‹¿å‡ºæ¥éƒ½æ²¡åŠæ³•è§£å†³ Go è¯­è¨€ GC æ ‡è®°çš„æ­£ç¡®æ€§é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœºæ™ºçš„è¯­è¨€è®¾è®¡è€…å°±æŠŠ Dijkstra barrier å’Œ Yuasa barrier ç»“åˆèµ·æ¥ï¼Œåšå‡ºäº†é›†å¤§æˆè€…â€”â€”Hybrid barrierï¼Œå¹¶ä¸”å†™äº†ä¸€ä¸ªææ¡ˆ preposalã€‚ç½‘ä¸Šæœ‰å¾ˆå¤šåšå®¢ä¼šå»è§£æ writebarrier çš„æºç ï¼Œå…¶å®å°±æ˜¯è¿™å¼ å›¾ä¸­çš„ï¼Œä¸­å’Œä¸¤ç§ç®—æ³•çš„é›†åˆä½“ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211122224523656&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111222245159.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 1ï¼šæ··åˆå±éšœ Hybrid barrier&lt;/center&gt;
&lt;p&gt;è¿™é‡Œçš„æ„æ€æ˜¯è¯´ï¼ŒæŠŠè¦ä¿®æ”¹çš„æŒ‡é’ˆæ‰€æŒ‡å‘çš„è€çš„å¯¹è±¡å…ˆæ ‡ç°ï¼Œç„¶ååˆ¤æ–­å½“å‰æ ˆæ˜¯å¦æ˜¯ç°è‰²ã€‚å¦‚æœæ˜¯ç°è‰²å°±å»æŠŠæ–°æ¥çš„å¯¹è±¡ä¹Ÿæ ‡ç°ã€‚æœ€åå†åšä¸ªèµ‹å€¼æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªç®—æ³•è™½ç„¶é›†æˆäº†ä¸¤ç§ç®—æ³•æ€æƒ³ï¼Œä½†ä¸¤ä¸ªç®—æ³•æ‰€é‡åˆ°çš„é—®é¢˜æ­£å¥½è¢«æœ‰æ•ˆé¿å…äº†ã€‚è™½ç„¶ä½œè€…å†™ä¸ªææ¡ˆ preposalï¼Œä½†åæ¥å› ä¸ºæ²¡æœ‰æ—¶é—´å°±æ²¡æœ‰å»å®ç°ã€‚åæ¥ä»–ä»¬è¿˜å‘ç°ï¼Œå¦‚æœè¦æ£€æŸ¥æ ˆçš„é¢œè‰²çš„å·¥ä½œè¯è¿˜éœ€è¦åšä¸€äº›åŒæ­¥æ“ä½œï¼Œè€Œè¿™ä¸ª stack check åŠ¨ä½œç»´æŠ¤æˆæœ¬å¤ªé«˜ï¼Œæ‰€ä»¥æš‚æ—¶æ”¾å¼ƒäº†ï¼Œè‡³ä»Šä¹Ÿæ²¡å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æˆ‘ä»¬äº²è‡ªå»çœ‹ Go è¯­è¨€æºç å¯ä»¥å‘ç°ï¼Œå®ƒä¸æ˜¯å†…éƒ¨å®ç°ï¼Œä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// slot is the destination in Go code.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// ptr is the value that goes into the slot in Go code.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;RealityWB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;slot&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Pointer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ptr&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Pointer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;shade&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;slot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;shade&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;slot&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ptr&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼ŒGo æºç ä¸­å…¶å®æ˜¯æ²¡æœ‰ä»»ä½• if åˆ¤æ–­ã€‚å¦‚æœå‘é€äº†ä»»ä½•å †ä¸ŠæŒ‡é’ˆçš„å˜åŒ–ï¼Œé‚£ä¹ˆä¸€å®šè¦æŠŠåŸæ¥çš„å¯¹è±¡å’Œæ–°æŒ‡å‘çš„å¯¹è±¡éƒ½æ ‡ç°ã€‚ç„¶åå†æ‰§è¡Œèµ‹å€¼æ“ä½œã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”GC æ ‡è®°ä¸¢å¤±è§£å†³åˆæ­¥æ–¹æ¡ˆ</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day28-mark-lost-solutions/day28-mark-lost-solutions/</link>
      <pubDate>Fri, 19 Nov 2021 21:31:07 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day28-mark-lost-solutions/day28-mark-lost-solutions/</guid>
      
      <description>&lt;p&gt;Go è¯­è¨€é‡‡ç”¨ä¸‰è‰²æ ‡è®°ç®—æ³•æ¥å®ç°åƒåœ¾å›æ”¶ï¼Œä½†æ ‡è®°è¿‡ç¨‹ä¸­å­˜åœ¨å¯¹è±¡æ¼æ ‡æƒ…å†µï¼Œæœ€ç»ˆå¯¼è‡´å˜é‡è¢«æ„å¤–å›æ”¶æ‰ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç†è®ºåŸºç¡€â€”â€”å¼ºå¼±ä¸‰è‰²æ€§ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å¼ºå¼±ä¸‰è‰²æ€§&#34;&gt;å¼ºå¼±ä¸‰è‰²æ€§&lt;/h1&gt;
&lt;p&gt;å¼ºä¸‰è‰²ä¸å˜æ€§å’Œå¼±ä¸‰è‰²ä¸å˜æ€§æ˜¯è§£å†³æ ‡è®°æµç¨‹ä¸­å¯¹è±¡æ¼æ ‡æˆ–é”™æ ‡çš„æ–¹æ¡ˆï¼Œè¿˜æ˜¯çœ‹å›¾å¥½ç†è§£ï¼š&lt;img alt=&#34;å¼ºå¼±ä¸‰è‰²æ€§&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111192153481.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 1ï¼šå¼ºå¼±ä¸‰è‰²ä¸å˜æ€§æµç¨‹&lt;/center&gt;
&lt;p&gt;å·¦è¾¹çš„å¼ºä¸‰è‰²ä¸å˜æ€§æ„å‘³ç€æ‰€æœ‰é»‘è‰²å¯¹è±¡ä¸èƒ½ç™½è‰²å¯¹è±¡ï¼Œæ¯”å¦‚ A â†’ B å°±æ˜¯ç§éæ³•çš„æƒ…å†µã€‚åªè¦è®©ç¨‹åºä¸­ä¸å‡ºç°è¿™ç§æƒ…å†µï¼Œé»‘è‰²åªèƒ½æŒ‡å‘ç°è‰²ï¼Œç°è‰²å¯ä»»æ„æŒ‡å‘ï¼Œé‚£ä¹ˆ GC æµç¨‹ä¸€å®šä¸ä¼šæœ‰æ¼æ ‡æˆ–é”™æ ‡çš„æƒ…å†µçš„ï¼Œè¿™æ˜¯ä¸€ç§æ¯”è¾ƒä¸¥æ ¼çš„é™åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;å³è¾¹çš„å¼±ä¸‰è‰²ä¸å˜æ€§æ˜¯è¯´é»‘è‰²å¯¹è±¡å¯ä»¥æŒ‡å‘ç™½è‰²å¯¹è±¡ï¼Œæ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯å¿…é¡»ä¿è¯è¿˜æœ‰æŒ‡å‘ç°è‰²å¯¹è±¡çš„å¯è¾¾è·¯å¾„ï¼Œæ¯”å¦‚ A â†’ Eï¼Œå‰ææ˜¯ A â†’ C â†’ Eã€‚å› ä¸ºæœ‰ç°è‰²å¯è¾¾è·¯å¾„ï¼Œæ‰€ä»¥é»‘è‰²å¯¹è±¡æŒ‡å‘ç™½è‰²å¯¹è±¡æ˜¯åˆæ³•çš„ï¼Œè¿™ç§æ–¹å¼é€‚å½“åœ°æ”¾å®½äº†å¼ºä¸‰è‰²ä¸å˜æ€§çš„æ¡ä»¶ï¼Œä¿è¯äº†æˆ‘ä»¬çš„ç®—æ³•å¯ä»¥é¡ºåˆ©éƒ½æ‰§è¡Œå®Œã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šéƒ½åªæ˜¯ç†è®ºï¼Œæˆ‘ä»¬è¦å®ç°è¿™ä¸¤ç§ä¸‰è‰²ä¸å˜æ€§ï¼Œæœ€ç»ˆè¿˜æ˜¯å›åˆ°äº† writebarrier æˆ– readbarrierï¼ˆGo è¯­è¨€ä¸­æ²¡æœ‰ï¼‰ã€‚&lt;strong&gt;éœ€è¦æ³¨æ„&lt;/strong&gt;ï¼šåœ¨ GC ä¸­çš„ writebarrier å’Œå¹¶å‘ä¸­çš„ writebarrier ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚GC ä¸­ barrier çš„æœ¬è´¨æ˜¯ï¼šæŒ‡é’ˆåœ¨ç¼–è¾‘ä¹‹å‰ï¼Œå¯ä»¥æ’å…¥ä¸€æ®µä»£ç  snippet of code insert before pointer modifyï¼Œè€Œ writebarrier å°±æ˜¯æŒ‡çš„è¿™æ®µä»£ç ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211119224915061&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111192249194.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 2ï¼šchan.go ä¸­ writebarrier çš„å®ç°ä½ç½®&lt;/center&gt;
&lt;p&gt;å›¾ä¸­ç”¨çº¢è‰²ä¸‹åˆ’çº¿å‹¾å‡ºæ¥çš„æ„æ€æ˜¯è¯´ï¼Œæˆ‘ä»¬å»è§¦å‘ runtime.gcWriteBarrier å‡½æ•°æ—¶ï¼Œå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆä¿®æ”¹æ“ä½œä¹‹å‰æ’å…¥çš„ä¸€ä¸ªå‡½æ•°è°ƒç”¨ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æºç ä¸­ç›´æ¥æœç´¢ gcWriteBarrier æ‰¾åˆ°è¿™ä¸ªå‡½æ•°ã€‚å› ä¸ºåç¼–è¯‘ä¹Ÿèƒ½å¤Ÿçœ‹å‡ºè¿™å¥å‡½æ•°è°ƒç”¨çš„æºç ä½ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯è¿›å…¥ç¡®è®¤ä¸€ä¸‹ï¼Œå®ƒä¸€å®šæ˜¯ä¸€ä¸ªæŒ‡é’ˆçš„æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211119225429746&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111192254821.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 3ï¼šgcWriteBarrier æºç å¯¹åº”ä½ç½®&lt;/center&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°åœ¨æºç çš„ 252 è¡Œï¼Œç¡®å®æ˜¯å°† waiting æŒ‡é’ˆæŒ‡å‘äº†ç©ºã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¼ºå¼±ä¸‰è‰²æ€§çš„å®ç°ä¾‹å­&#34;&gt;å¼ºå¼±ä¸‰è‰²æ€§çš„å®ç°ä¾‹å­&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸Šè¯´äº†å¼ºå¼±ä¸‰è‰²ä¸å˜æ€§å’Œ writebarrierï¼Œè¿˜éƒ½åæŠ½è±¡ã€ååŸºç¡€çš„ï¼Œå†æ¥çœ‹ä¸€ä¸‹å¼ºå¼±ä¸‰è‰²ä¸å˜æ€§åˆ†åˆ«é€šè¿‡å“ªäº› writebarrier æ¥å®ç°çš„ã€‚é¦–å…ˆæ¥ä¸€ç»„å®ç°ä¾‹å­ï¼šDijkstra barrier å’Œ Yuasa barrierã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”ä¸‰è‰²æ ‡è®°</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day27-three_color_mark/day27-three_color_mark/</link>
      <pubDate>Wed, 17 Nov 2021 15:16:20 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day27-three_color_mark/day27-three_color_mark/</guid>
      
      <description>&lt;p&gt;ä¸ŠæœŸæ–‡ç« è¯´äº†å¾ˆå¤šå…³äºæ ‡è®°çš„æ¦‚å¿µã€æµç¨‹ï¼Œè€Œæ ‡è®°çš„å…·ä½“å®ç°ä»Šå¤©å°±æ¥èŠä¸€èŠã€‚&lt;/p&gt;
&lt;p&gt;åœ¨äº†è§£æ ‡è®°ä¹‹å‰æˆ‘ä»¬éœ€è¦äº†è§£&lt;strong&gt;ä¸‰è‰²æŠ½è±¡&lt;/strong&gt;ã€‚åœ¨ Go è¯­è¨€çš„ MarkSweep ç®—æ³•ä¸­å®ƒä¼šæŠŠå¯¹è±¡åˆ†æˆä¸‰ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é»‘ï¼šå·²ç»æ‰«æå®Œæ¯•ï¼Œå­èŠ‚ç‚¹ä¹Ÿæ‰«æå®Œæ¯•ã€‚(ä¹Ÿå°±æ˜¯åœ¨ mSpan ç»“æ„ä¸­çš„ gcmarkbits = 1ï¼Œä½äºé˜Ÿåˆ—ä¹‹å¤–)&lt;/li&gt;
&lt;li&gt;ç°ï¼šå·²ç»æ‰«æå®Œæ¯•ï¼Œä½†å­èŠ‚ç‚¹æœªæ‰«æå®Œæ¯•ã€‚(ä¹Ÿå°±æ˜¯å­èŠ‚ç‚¹å¤§æ¦‚ç‡æ˜¯ç™½è‰²ï¼Œåœ¨ mSpan ç»“æ„ä¸­çš„ gcmarkbits = 1ï¼Œä½äºæ‰«æé˜Ÿåˆ— wbuf1 æˆ– wbuf2 æˆ–è€…å…¨å±€çš„ Globally unique work ä¹‹å†…)&lt;/li&gt;
&lt;li&gt;ç™½ï¼šæœªæ‰«æï¼Œcollector ä¸çŸ¥é“ä»»ä½•ç›¸å…³ä¿¡æ¯ã€‚ï¼ˆä¹Ÿå°±æ˜¯ gcmarkbits = 0ï¼Œå¹¶ä¸”æ²¡æœ‰åœ¨ä»»ä½•é˜Ÿåˆ—ä¸­ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é‡Œé»‘ã€ç™½ã€ç°ï¼Œæœ¬è´¨ä¸Šæ˜¯æŠ½è±¡çš„æ¦‚å¿µï¼Œåœ¨ä»£ç ä¸­ä¸ä¼šæ‰¾åˆ°æŸä¸ªå¯¹è±¡ï¼Œå®ƒæ˜¯è¡¨ç¤ºé¢œè‰²çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ–‡å­—æè¿°è¿˜æ˜¯æœ‰ç‚¹æŠ½è±¡ï¼Œå†æ¥çœ‹çœ‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;ä¸‰è‰²æ ‡è®°åŸºæœ¬æµç¨‹ (1)&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111172257917.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 1ï¼šä¸‰è‰²æ ‡è®°æµç¨‹å¼€å§‹&lt;/center&gt;
&lt;p&gt;æœ€å¼€å§‹æœ‰ä¸ª rootï¼Œå®ƒæ˜¯æŒ‡å…¨å±€å˜é‡æˆ–æ ˆä¸Šçš„æŒ‡é’ˆæˆ–æ ˆä¸Šçš„å¯¹è±¡ï¼Œå®ƒä»¬æ˜¯æ•´ä¸ª GC æ‰«æçš„èµ·ç‚¹ rootã€‚å¯ä»¥çœ‹å‡ºæ¥æ•´ä¸ª GC çš„è¿‡ç¨‹å°±æ˜¯ä¸ªç®€å•çš„å¹¿åº¦ä¼˜å…ˆéå†ç®—æ³•æµç¨‹ã€‚æœ€å¼€å§‹æ‰«ææ ¹å¯¹è±¡çš„æ—¶å€™ï¼Œä¼šæŠŠè¿™äº›æ ¹å¯¹è±¡æ”¾åœ¨ gcWorkBuf é‡Œé¢ï¼Œå¹¶ä¸”æŠŠ gcmarkbits ç½®ä¸º 1ï¼Œè¿™æ—¶å€™å°±&lt;strong&gt;å˜æˆäº†ç°è‰²&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åä» gcWorkBuf é‡Œå–å‡ºæŒ‡é’ˆï¼ŒæŠŠå®ƒä»¬çš„å­å¯¹è±¡å¾€é˜Ÿåˆ—ä¸­æ”¾ã€‚æ¯”å¦‚ A çš„ä¸¤ä¸ªå­èŠ‚ç‚¹çš„ gcmarkbits éƒ½è¢«ç½®ä¸ºäº† 1 å¹¶ä¸”è¿›å…¥äº†é˜Ÿåˆ—ï¼Œä¹Ÿå°±æ„å‘³ç€ A åº”è¯¥ä»é˜Ÿåˆ—ä¸­å‡ºæ¥ï¼Œè¿™æ—¶å€™å°±ä¼š&lt;strong&gt;å˜æˆé»‘è‰²&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å½“ E çš„å¯¹è±¡è¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­åï¼Œå®ƒçš„å­å¯¹è±¡ F ä¼šå˜ä¸ºç°è‰²ï¼ŒE ä¼šå˜æˆé»‘è‰²ã€‚æŒ‰ç…§è¿™ä¸ªè¿‡ç¨‹ä¸€ç›´æ‰§è¡Œä¸‹å»ï¼Œ&lt;strong&gt;ç›´åˆ°æ‰€æœ‰å¯¹è±¡éƒ½ä¼šè¢«æ‰«æåˆ°å¹¶ä¸”è¢«æ ‡è®°ä¸ºé»‘è‰²&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;ä¸‰è‰²æ ‡è®°åŸºæœ¬æµç¨‹&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111172315989.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 2ï¼šä¸‰è‰²æ ‡è®°æµç¨‹ç»“æŸ&lt;/center&gt;
&lt;p&gt;æœ€åå¯ä»¥å‘ç°è¿˜æœ‰ä¸ª G æ²¡æœ‰è¢«æ ‡è®°åˆ°ï¼Œè¿™å°±ä¹‹å‰è¯´çš„è¯­æ³•ä¸å¯è¾¾å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯­æ³•åƒåœ¾ï¼Œå®ƒæœ€ç»ˆä¼šè¢« sweeper å›æ”¶æ‰ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”æ ‡è®°æµç¨‹</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day26-go_garbage_collection_mark/day26-go_garbage_collection_mark/</link>
      <pubDate>Mon, 15 Nov 2021 09:07:46 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day26-go_garbage_collection_mark/day26-go_garbage_collection_mark/</guid>
      
      <description>&lt;p&gt;&lt;strong&gt;Go è¯­è¨€ä½¿ç”¨å¹¶å‘çš„ä¸‰è‰²æ ‡è®°ï¼ˆtricolor markingï¼‰ç®—æ³•ä½œä¸ºå…¶åƒåœ¾å›æ”¶ç®—æ³•&lt;/strong&gt;ï¼Œå¹¶ä¸”åœ¨ Go ä¸­çš„ GC æ²¡æœ‰åˆ†ä»£ï¼Œæ²¡æœ‰å‹ç¼©ï¼Œæ²¡æœ‰å¯¹è±¡ç§»åŠ¨ã€‚æ•´ä¸ª GC æµç¨‹å¦‚å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;gc&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111152027238.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 1ï¼šGC å…¨æµç¨‹&lt;/center&gt;
&lt;p&gt;æ•´ä¸ªå›¾çœ‹èµ·æ¥è§‰å¾—å¾ˆå¤æ‚ï¼Œä»£ç å¾ˆé•¿ï¼Œä½†å…¶å®é‡Œé¢çš„å…³é”®èŠ‚ç‚¹ä¸æ˜¯å¾ˆå¤šã€‚å·¦ä¸Šè§’å¯ä»¥çœ‹åˆ°ä¸‰ç§ GC çš„è§¦å‘çš„æ–¹å¼ï¼šåå°è§¦å‘ï¼Œç”¨æˆ·ä¸»åŠ¨è§¦å‘ï¼Œå†…å­˜åˆ†é…è§¦å‘ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è§¦å‘ä¹‹åä¼šè¿›å…¥ runtime.gcStart å‡½æ•°ã€‚å› ä¸ºå¾ˆå¤šå†…å­˜åˆ†é…å™¨éƒ½ä¼šè¿›æ¥ï¼Œä½†æœ€ç»ˆåªæœ‰ä¸€ä¸ªèƒ½å¤Ÿè¿›å»ï¼Œæ‰€ä»¥å®ƒä¼šæŠ¢ä¸€ä¸ªå…¨å±€é”ã€‚ç„¶åå¯åŠ¨æ‰€æœ‰åç«¯æ ‡è®°çš„ worker å¹¶ä¸”æŠŠå®ƒå’Œæ¯ä¸ª P ç»‘å®šã€‚æ¯ä¸ª P éƒ½ä¼šå¯¹åº”ä¸€ä¸ª BgMarkWorkerï¼Œä½†ä¸ä¸€å®šæ¯ä¸ª worker éƒ½èƒ½å…¨éƒ¨å¯åŠ¨ï¼Œå…¶å®æ˜¯æŒ‰æ¯”ä¾‹å¯åŠ¨çš„ã€‚æ‰€ä»¥åœ¨ cBgMarkStartWorkers å‡½æ•°ä¸­åˆå§‹åŒ–æ‰€æœ‰ worker éƒ½ä¼šè®©å®ƒä»¬è¿›å…¥ä¸€ä¸ªä¼‘çœ çŠ¶æ€ goParkï¼Œå®ƒä¼šåœ¨æ‰§è¡Œåˆ° schedule å‡½æ•°ä¸­çš„ finRunnableGCWorker æ—¶ä¹‹å‰ä¼‘çœ çš„ GC æ ‡è®°çº¿ç¨‹å”¤é†’ï¼Œä¹‹åæ˜¯ä» G runing çŠ¶æ€å˜ä¸º G waiting çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼Œåœ¨æ ‡è®°çš„æ—¶å€™ä¼šæ§åˆ¶æ‰€æœ‰æ ‡è®°åç¨‹çš„ CPUï¼Œæ‰€ä»¥ä¸èƒ½æŠŠæ‰€æœ‰çš„ P ä¸Šåç¨‹å…¨éƒ¨å”¤é†’ï¼Œå¦‚æœå…¨å”¤é†’æ„å‘³ç€ CPU å ç”¨ä¸­æ ‡è®°å°±å ç”¨äº†äº†80% åˆ° 90%ï¼Œåº”ç”¨ç¨‹åºä¹Ÿå°±è·‘ä¸èµ·æ¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;gcDrain æ˜¯æ•´ä¸ªæ ‡è®°çš„ä¸»æµç¨‹&lt;/strong&gt;ã€‚å…¶ä¸­ï¼Œmark æ ‡è®°æ ¹èŠ‚ç‚¹ï¼Œgc work å…¨å±€å’Œæœ¬åœ°çš„å¹³è¡¡ï¼Œscan å¯¹è±¡å¹¶è¿›è¡Œæ ‡ç°ã€‚æ•´ä¸ªæ¸…æ‰«è¿‡ç¨‹å®Œæˆä¹‹åä¼šï¼Œä¼šæœ‰ä¸€ä¸ªåˆ†å¸ƒå¼å®Œæˆç®—æ³•è¿›è¡Œåˆ¤æ–­ï¼Œç„¶åä¼šè¿›å…¥ gcMarkDone å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;gcMarkDone é˜¶æ®µä¼šå»æŠŠå‰©ä½™çš„ write buffer æˆ– gc worker é‡Œé¢çš„å·¥ä½œéƒ½æ¸…ç†æ‰ã€‚æ•´ä¸ªå‡½æ•°ä¸­è¿˜å¯èƒ½ä¼šæœ‰å›é€€æƒ…å†µå¾ªç¯æƒ…å†µã€‚æ ‡è®°å®Œæˆä¹‹åå°±æ˜¯ gcMarkTermniation ï¼Œä¹Ÿå°±æ˜¯ GC Mark çš„ç»ˆæé˜¶æ®µã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”Go è¯­è¨€åƒåœ¾å›æ”¶æµç¨‹</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day25-go_garbage_collection/day25-go_garbage_collection/</link>
      <pubDate>Thu, 11 Nov 2021 23:26:35 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day25-go_garbage_collection/day25-go_garbage_collection/</guid>
      
      <description>&lt;p&gt;&lt;strong&gt;Go è¯­è¨€çš„åƒåœ¾å›æ”¶æœºåˆ¶é‡‡ç”¨çš„æ˜¯æ ‡è®°æ¸…æ‰«&lt;/strong&gt;ã€‚è¿™ç§æ–¹æ³•çš„ç‰¹ç‚¹åœ¨äºï¼šæ ‡è®°æ¸…æ‰«å®Œæˆä¹‹åï¼Œæœ‰äº›å†…å­˜æ²¡åŠæ³•è¢«ä½¿ç”¨çš„ï¼Œæ‰€ä»¥æ ‡è®°æ¸…æ‰«å¾ˆå¤§çš„é—®é¢˜å°±æ˜¯æœ‰å¾ˆå¤šå†…å­˜ç¢ç‰‡ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨æ ‡è®°æ¸…æ‰«ç®—æ³•çš„æ—¶å€™ï¼Œéœ€è¦å†…å­˜åˆ†é…ç®—æ³•èƒ½å¤Ÿä¸€å®šç¨‹åº¦ä¸Šåº”å¯¹è¿™ç§ç¢ç‰‡é—®é¢˜ï¼Œä¹‹å‰åˆ†æè¿‡åˆ†çº§åˆ†é…çš„åˆ†é…å™¨å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šåº”å¯¹è¿™ä¸ªé—®é¢˜ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Go è¯­è¨€å¯ä»¥ä½¿ç”¨æ ‡è®°æ¸…æ‰«ç®—æ³•ï¼Œå› ä¸ºå®ƒä½¿ç”¨äº† tcmallocï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šèƒ½å¤Ÿç¼“è§£ç¢ç‰‡é—®é¢˜ï¼ˆä½†ä¹Ÿæ²¡æœ‰è§£å†³ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è€ç‰ˆæœ¬ Go è¯­è¨€ä¸­ï¼Œæ ‡è®°æ¸…æ‰«å¤§è‡´æ˜¯ä»¥ä¸‹æµç¨‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211112230308481&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111122303610.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 1ï¼šè€ç‰ˆæœ¬ Go çš„åƒåœ¾å›æ”¶æµç¨‹&lt;/center&gt;
&lt;ol&gt;
&lt;li&gt;æœ€å¼€å§‹ Off é˜¶æ®µï¼Œåº”ç”¨ç¨‹åºæ­£å¸¸æ‰§è¡Œï¼Œå¯èƒ½æ²¡æœ‰è°ƒç”¨ gcã€‚&lt;/li&gt;
&lt;li&gt;å½“åƒåœ¾æ”¶é›†å¼€å§‹å¤„äº Stack scan é˜¶æ®µï¼Œä¼šåšä¸€äº›æ ˆæ‰«æï¼Œä»æ ˆå’Œå…¨å±€å˜é‡ä¸­æ”¶é›†åˆ°ä¸€äº›åŸºæœ¬çš„æ ¹æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªå¯¹è±¡å›¾çš„æ ¹ï¼Œåœ¨å¼€å§‹æ”¶é›†æ—¶éœ€è¦å»å¼€å¯ write barrierã€‚é»„è‰²çš„çŸ©å½¢æ ‡è®°çš„æ˜¯è¦æŠŠ write barrier enable è¿™ç§å…¨å±€å˜é‡æ”¹æˆ Trueï¼Œä¹‹åæ‰€æœ‰çš„æŒ‡é’ˆå˜é‡éƒ½éœ€è¦ç»è¿‡è¿™ç§ç‰¹æ®Šçš„é€»è¾‘ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å †å¯¹è±¡æ”¶é›†å®Œæˆä¹‹åå°±å¼€å¯äº†æ ‡è®°æµç¨‹ Markï¼Œå…¶å®å°±æ˜¯ä¸ªåŸºç¡€çš„å¹¿åº¦ä¼˜å…ˆç®—æ³•ï¼Œä¹Ÿå¯ä»¥å½“ä½œå¤šå‰æ ‘æ¥ç†è§£ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚&lt;/li&gt;
&lt;li&gt;æ ‡è®°ç»“æŸé˜¶æ®µ Mark terminationï¼Œå› ä¸º write barrier å­˜åœ¨ç¼ºé™·ï¼Œæ‰€ä»¥åœ¨æ ‡è®°å®Œæˆä¹‹åè¿˜éœ€è¦å¯¹æœ‰å…¨å±€æˆ–è€…å·²ç»å˜æ›´çš„æ ˆåšä¸€æ¬¡æ‰«æï¼ŒæŠŠå·²ä¿®æ”¹çš„æŒ‡é’ˆé‡æ–°è¿›è¡Œ GC æ ‡è®°ï¼Œé˜²æ­¢åœ¨ GC é˜¶æ®µå‘ç”Ÿå¯¹è±¡çš„æ¼æ ‡æˆ–è€…é”™æ ‡æƒ…å†µã€‚&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰å¯¹è±¡æ ‡è®°å®Œæˆä¹‹åè¿›å…¥ Sweep é˜¶æ®µï¼Œåšä¸€äº›æ¸…æ‰«å·¥ä½œï¼Œè¿™æ®µæµç¨‹ä¹‹ååƒåœ¾å°±è¢«å›æ”¶æ‰äº†ã€‚è¢«åƒåœ¾å ç”¨è¿‡çš„ç©ºé—´å°±å¯ä»¥è¢«é‡æ–°æ‹¿æ¥åˆ†é…ã€‚å¦‚æœä¸éœ€è¦é‚£ä¹ˆå¤šå†…å­˜ï¼Œé‚£å°±ä¼šæŠŠåˆ†é…å™¨è¿˜ç»™æ“ä½œç³»ç»Ÿã€‚&lt;/li&gt;
&lt;li&gt;å®Œæˆæ•´ä¸ªæ¸…æ‰«ã€å›æ”¶è¿‡ç¨‹ä¹‹åï¼ŒæŠŠ GC è®¾ç½®ä¸º Offï¼Œä¹Ÿå°±é‡æ–°å›åˆ°åº”ç”¨ç¨‹åºæ‰§è¡Œé˜¶æ®µã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Go è¯­è¨€åœ¨ 1.8 ç‰ˆæœ¬ä»¥åï¼Œé€šè¿‡æ··åˆ write barrier æ¶ˆé™¤äº†ç¬¬äºŒä¸ª stw ä¸­çš„ stack re-scanï¼Œä¹Ÿå°±æ˜¯è¯´ stw æ—¶é—´å¤§å¤§å‡å°‘äº†ã€‚stw ä½äºå›¾ä¸­çº¢ç™½çš„çŸ©å½¢å—é˜¶æ®µï¼Œæ˜¯æŒ‡è¿™æ®µæ—¶é—´å†…åªæœ‰åƒåœ¾å›æ”¶åœ¨æ‰§è¡Œï¼Œåº”ç”¨ç¨‹åºæ˜¯è¢«é˜»å¡ä½çš„ï¼Œä¸¤ä¸ªçº¢è‰²é˜¶æ®µéƒ½æ˜¯è¢«é˜»å¡ä½çš„ã€‚æ—©æœŸç‰ˆæœ¬çš„ stw çš„æ—¶é—´æ˜¯æ¯”è¾ƒé•¿çš„ï¼Œå› ä¸ºå®ƒä¼šæ‰«ææ‰€æœ‰å…¨å±€æˆ–è€…å˜åŠ¨çš„æ ˆï¼Œè¿™é‡Œå°±éå¸¸è€—æ—¶äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ–°ç‰ˆæœ¬çš„åƒåœ¾å›æ”¶æµç¨‹å’ŒåŸæ¥æœ‰äº›åŒºåˆ«ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211112230254975&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111122302132.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 2ï¼šæ–°ç‰ˆæœ¬ Go çš„åƒåœ¾å›æ”¶æµç¨‹&lt;/center&gt;
&lt;p&gt;Go å®˜æ–¹åšäº†äº›ä¼˜åŒ–ï¼Œç¬¬äºŒä¸ª stw è¿‡ç¨‹ä¸­ä¸ç”¨å»åšå…¨æ ˆæ‰«æï¼Œå› æ­¤æ—¶é—´å¤§å¤§ç¼©çŸ­äº†ã€‚æ•´ä½“æµç¨‹ä¹Ÿå‘ç°äº†éå¸¸å¤§çš„å˜åŒ–ã€‚å¦‚æœå»çœ‹äº† Go è¯­è¨€æºç ï¼Œå¯ä»¥å‘ç°æ¯ä¸¤ä¸‰ä¸ªç‰ˆæœ¬åƒåœ¾å›æ”¶æ¨¡å—çš„é€»è¾‘å˜åŒ–æŒºå¤§ï¼Œå¾ˆå¤šå†…éƒ¨çš„å®ç°éƒ½å˜äº†ï¼Œæœ‰æ—¶å€™ä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´å¯èƒ½åªæœ‰ä¸»å‡½æ•°æˆ–å…³é”®æµç¨‹å·®ä¸å¤šã€‚å› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥å¾—å‡ºç»“è®ºï¼šGo è¯­è¨€åƒåœ¾å›æ”¶çš„æ¨¡å—æ˜¯å˜åŒ–éå¸¸é¢‘ç¹çš„ï¼Œå¦‚æœä¸æ˜¯å·¥ä½œéœ€è¦æˆ–å…´è¶£è¶‹åŠ¿ï¼Œç®€å•äº†è§£æµç¨‹å°±è¡Œäº†ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”åƒåœ¾å›æ”¶åŸºç¡€</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day24-garbage_collection_base/day24-garbage_collection_base/</link>
      <pubDate>Wed, 10 Nov 2021 15:18:35 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day24-garbage_collection_base/day24-garbage_collection_base/</guid>
      
      <description>&lt;p&gt;ä¹‹å‰è¯´çš„å†…å­˜å›æ”¶å¯ä»¥ç”¨è¿™å¼ å…¨å±€å›¾æ¥è§£é‡Šï¼Œæ€»å…± 6 ä¸ª level çš„åˆ†é…ç»“æ„ï¼ŒæŠŠè¿™å‡ ä¸ªé“¾è·¯éƒ½æ¢³ç†å¼„æ¸…æ¥šå°±èƒ½æœ‰ä¸ªæ¸…æ™°ç†è§£ã€‚&lt;/p&gt;
&lt;p&gt;åƒåœ¾å›æ”¶çš„ç†è§£æ›´ä¸ºéš¾ï¼Œéœ€è¦ä¸€äº›ç®—æ³•åŸºç¡€ï¼Œå¦åˆ™åœ¨çœ‹è¿™éƒ¨åˆ†çŸ¥è¯†çš„æ—¶å€™å¾ˆå¯èƒ½å®Œå…¨çœ‹ä¸æ‡‚ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç†è§£åƒåœ¾å›æ”¶ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦å…ˆå¯¹åƒåœ¾åšä¸€ä¸ªåˆ†ç±»ï¼Œç¨‹åºå½“ä¸­æœ‰ä¸¤ç±»çš„åƒåœ¾ï¼Œè¯­ä¹‰åƒåœ¾å’Œè¯­æ³•åƒåœ¾ã€‚&lt;/p&gt;
&lt;p&gt;è¯­ä¹‰åƒåœ¾(semantic garbage)ï¼Œæœ‰æ—¶ä¹Ÿç§°ä¸ºå†…å­˜æ³„éœ²ï¼Œæ˜¯æŒ‡ä»è¯­æ³•ä¸Šå¯è§¦è¾¾çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬å¯é€šè¿‡å±€éƒ¨ã€å…¨å±€å˜é‡å¼•ç”¨å¾—åˆ°çš„å¯¹è±¡ï¼‰ï¼Œä½†ä»è¯­ä¹‰ä¸Šæ¥è®²ä»–ä»¬éƒ½æ˜¯åƒåœ¾ï¼Œåƒåœ¾å›æ”¶å™¨å¯¹å®ƒä»¬æ— èƒ½ä¸ºåŠ›ã€‚&lt;/p&gt;
&lt;p&gt;è¯­æ³•åƒåœ¾(syntactic garbage)æ˜¯æŒ‡ä»è¯­æ³•ä¸Šæ— æ³•è§¦è¾¾çš„å¯¹è±¡ï¼Œè¿™äº›æ‰æ˜¯åƒåœ¾æ”¶é›†å™¨æ”¶é›†çš„ä¸»è¦ç›®æ ‡ã€‚æ¯”å¦‚æœ‰äº›å†…å­˜æ— è®ºç”¨æ€æ ·çš„ä»£ç å»æ“ä½œéƒ½æ˜¯æ— æ³•æ¥è§¦åˆ°çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæœ‰å‡ ä¸ªä¾‹å­æœ‰åŠ©äºç†è§£ï¼š&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”Go å†…å­˜ç®¡ç†ï¼ˆ2ï¼‰</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day23-go_memory_management_2/day23-go_memory_management_2/</link>
      <pubDate>Sat, 06 Nov 2021 16:55:34 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day23-go_memory_management_2/day23-go_memory_management_2/</guid>
      
      <description>&lt;p&gt;Go è¯­è¨€åœ¨å†…å­˜ç®¡ç†ä¸­ç”³è¯·ä½¿ç”¨ç¨€ç–å †æ—¶ï¼Œä½¿ç”¨ç³»ç»Ÿè°ƒç”¨ mmap ï¼Œå› æ­¤å¯ä»¥åˆ†é…å‡ºä¸è¿ç»­çš„åœ°å€ï¼ˆè€Œä¸æ˜¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨ brk æ¥è°ƒæ•´è™šæ‹Ÿç©ºé—´é‡Œå †çš„ program break æ¥åˆ†é…è¿ç»­å†…å­˜åœ°å€ï¼‰ã€‚åœ¨ä½¿ç”¨ç¨€ç–å †æ—¶ï¼Œæ•´ä½“çš„å †å†…å­˜æ€æ ·å¢é•¿çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;å †å†…å­˜å¢é•¿è¿‡ç¨‹&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111071005412.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 1ï¼šç¨€ç–å †å†…å­˜å¢é•¿è¿‡ç¨‹&lt;/center&gt;
&lt;p&gt;è¾ƒå¤§çš„å†…å­˜å— arenas å…¶å®æ˜¯ä¸ªå¤§çš„æŒ‡é’ˆæ•°ç»„ï¼Œæ¯ä¸ªæŒ‡é’ˆå°±æ˜¯ mheap arena ç»“æ„ï¼Œå®ƒä¼šæŒ‡å‘å…·ä½“çš„ 64 MB çš„å†…å­˜ï¼Œåœ¨å½“å‰çš„ mheap ç»“æ„ä¸­è¿˜ä¼šç»´æŠ¤æœ€åä¸€ä¸ªèµ·å§‹ä½ç½®å’Œç»“æŸåœ°å€ã€‚ä¸€æ—¦åˆ†é…å†…å­˜çš„æ—¶å€™çœŸå®ç»“æŸåœ°å€è¶…è¿‡äº† mheap ç»“æŸåœ°å€æ—¶ï¼Œè¯´æ˜è¿˜éœ€è¦ä»æ“ä½œç³»ç»Ÿè¦æ›´å¤šè™šæ‹Ÿå†…å­˜ï¼Œè¿™æ—¶è¿˜æ˜¯æ‰§è¡Œ  mmap å†åˆ†é…ä¸€ä¸ª 64 MB çš„åœ°å€ç©ºé—´ï¼Œå¹¶ä¸”ç»´æŠ¤å¥½å½“å‰çš„æ•°æ®ç»“æ„ï¼ŒæŠŠåŸæ¥çš„ n å˜ä¸º n+1 ç›¸å½“äºå¢åŠ äº†ä¸€ä¸ªå…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ Go è¯­è¨€ä¸­é™¤äº†ä»æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜çš„æ–¹å¼ä»¥å¤–ï¼Œåœ¨åˆ†é…æ—¶è¿˜è¦åŒºåˆ†å†…å­˜å¤§å°ï¼Œæœ‰ä¸‰ç§åˆ†é…å¤§å°åˆ†ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tinyï¼šsize &amp;lt; 16 bytes &amp;amp;&amp;amp; has no pointer(noscan)&lt;/li&gt;
&lt;li&gt;Small: has pointer(scan) || (size &amp;gt;= 16 bytes &amp;amp;&amp;amp; size &amp;lt;= 32KB)&lt;/li&gt;
&lt;li&gt;Large: size &amp;gt; 32KB&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¹¶ä¸”ï¼Œå†…å­˜åˆ†é…å™¨åœ¨ Go è¯­è¨€ä¸­ä¸ºäº†åšä¸€äº›ä¼˜åŒ–ï¼Œç»´æŠ¤äº†ä¸€ç§å¤šçº§ç»“æ„ï¼š&lt;/p&gt;
&lt;center&gt;mcache â†’ mcentral â†’ mheap&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;mcacheï¼šä¸ P ç»‘å®šï¼Œæœ¬åœ°å†…å­˜åˆ†é…æ“ä½œï¼Œä¸éœ€è¦åŠ é”ã€‚&lt;/li&gt;
&lt;li&gt;mcentralï¼šä¸­å¿ƒåˆ†é…ç¼“å­˜ï¼Œåˆ†é…æ—¶éœ€è¦ä¸Šé”ï¼Œä¸åŒ spanClass ä½¿ç”¨ä¸åŒçš„é”ã€‚&lt;/li&gt;
&lt;li&gt;mheapï¼šå…¨å±€å”¯ä¸€ï¼Œä» OS ç”³è¯·å†…å­˜ï¼Œå¹¶ä¿®æ”¹å™¨å†…å­˜å®šä¹‰ç»“æ„æ—¶ï¼Œéœ€è¦åŠ é”ï¼Œæ˜¯ä¸ªå…¨å±€é”&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨è·ç¦»åº”ç”¨ä»£ç æœ€è¿‘çš„ P çš„ä½ç½®ï¼Œæ¯ä¸ª P éƒ½ç»‘å®šäº† mcache ç»“æ„ï¼Œè¿™ä¸ªç»“æ„ä¼šæœ‰å¤§å°ç›¸åº”çš„ç¼“å­˜ã€‚æœ¬åœ°åˆ†é…å†…å­˜æ—¶ä¼šä¼˜å…ˆä» mcache ä¸­æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±è¦ä»å…¨å±€çš„ç¼“å­˜ä¸­å»æ‰¾ï¼Œå¦‚æœè¿˜æ˜¯æ²¡æœ‰ç›¸åº”çš„å†…å­˜å—å¯ä»¥ç”¨çš„è¯ï¼Œå°±éœ€è¦å»å…¨å±€å”¯ä¸€çš„  mheap è¯·æ±‚ï¼Œä»æ“ä½œç³»ç»Ÿé‡æ–°åˆ’åˆ†ä¸€éƒ¨åˆ†å†…å­˜å‡ºæ¥ã€‚ä¸è¿‡ mheap è¿˜æœ‰ area ç»“æ„ï¼Œå¦‚æœ area è¿˜æ²¡æœ‰ç”¨å®Œçš„è¯è¿˜æ˜¯ä¼šä» area é‡Œé¢å»åˆ‡åˆ†ï¼Œå¦‚æœç”¨å®Œäº†å°±ä¼šå»æ“ä½œç³»ç»Ÿä¸­å»ç”³è¯·ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”Goå†…å­˜ç®¡ç†ï¼ˆä¸¢å¤±ï¼‰</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day22-go_memory_management/day22-go_memory_management/</link>
      <pubDate>Wed, 03 Nov 2021 07:20:48 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day22-go_memory_management/day22-go_memory_management/</guid>
      
      <description></description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”è¿›ç¨‹ä¸è™šæ‹Ÿå†…å­˜çš„åˆ†å¸ƒ</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day21-virtual_memory_management/day21-virtual_memory_management/</link>
      <pubDate>Tue, 02 Nov 2021 22:19:25 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day21-virtual_memory_management/day21-virtual_memory_management/</guid>
      
      <description>&lt;p&gt;æ²¡æƒ³åˆ°ç»§ç»­æ›´æ–‡å·²ç»æ˜¯ä¸€ä¸ªæœˆåŠä»¥åäº†ã€‚ç«‹ä¸ªå°å°çš„ flagï¼Œåˆ°å¹´åº•æŠŠ Go åŸºç¡€ä¸æµ…å±‚çš„å†…æ ¸è¿‡ä¸€éã€‚ä¿æŒä¸¤å¤©ä¸€æ›´çš„èŠ‚å¥ã€‚è¿˜æ˜¯ç»§ç»­æ¥ç€ä¸ŠæœŸè¯´çš„å†…å­˜ç®¡ç†ã€‚äº†è§£äº†å†…å­˜ç®¡ç†æŠ½è±¡çš„åŸºç¡€æ¦‚å¿µä¹‹åï¼Œæ¥çœ‹ä¸€ä¸‹ä¸€äº›å…·ä½“çš„å®ç°ã€‚&lt;/p&gt;
&lt;h1 id=&#34;è™šæ‹Ÿå†…å­˜çš„åˆ†å¸ƒ&#34;&gt;è™šæ‹Ÿå†…å­˜çš„åˆ†å¸ƒ&lt;/h1&gt;
&lt;p&gt;é¦–å…ˆæ¥çœ‹ä¸€ä¸‹è™šæ‹Ÿå†…å­˜æ˜¯å¦‚ä½•å¸ƒå±€çš„ï¼Œè¿™éƒ¨åˆ†å…¶å®ç®—æ˜¯æ“ä½œç³»ç»Ÿçš„å†…å®¹ã€‚åœ¨ã€ŠThe Linux Programming Interfaceã€‹è¿™æœ¬ä¹¦ä¸­æåˆ°äº†ä¸€å¼ å›¾ï¼Œæè¿°äº† 32 ä½æ“ä½œç³»ç»Ÿå¤§è‡´çš„è™šæ‹Ÿåœ°å€ç©ºé—´çš„åˆ†å¸ƒæ˜¯æ€æ ·çš„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211102222059379&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111022220502.png&#34;&gt;&lt;/p&gt;
&lt;center&gt; å›¾ 1: 32 ä½æ“ä½œç³»ç»Ÿè™šæ‹Ÿå†…å­˜åœ°å€åˆ†å¸ƒ&lt;/center&gt;
&lt;p&gt;å› ä¸ºæ˜¯ 32 ä½æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥æ€»çš„åœ°å€ç©ºé—´æ˜¯ 4 GBã€‚å¯ä»¥çœ‹åˆ°ä¸Šæ–¹æ˜¯é«˜åœ°å€ï¼Œä¸‹æ–¹æ˜¯ä½åœ°å€ï¼Œæ‰€ä»¥å¯ä»¥çœ‹åˆ°ä»¥ä¸‹å‡ ä¸ªç‰¹å¾ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ ˆ Stack æ˜¯ä»é«˜åœ°å€å‘ä½åœ°å€å¢é•¿çš„ã€‚&lt;/li&gt;
&lt;li&gt;å † Heap æ˜¯ä»ä½åœ°å€å‘é«˜åœ°å€å¢é•¿çš„ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒæ•´å †é¡¶ä¸€èˆ¬æ¥è¯´æ˜¯è°ƒæ•´çš„ Program breakã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç„¶åå†æ¥çœ‹çœ‹æˆ‘ä»¬å¸¸ç”¨çš„ 64 ä½ç³»ç»Ÿä¸­è¿›ç¨‹è™šæ‹Ÿå†…å­˜çš„åˆ†å¸ƒæ˜¯æ€æ ·çš„ï¼Œæ‘˜è‡ªç½‘ç»œï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211102223150938&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111022231059.png&#34;&gt;&lt;/p&gt;
&lt;center&gt; å›¾ 2: 64 ä½æ“ä½œç³»ç»Ÿè™šæ‹Ÿå†…å­˜åœ°å€åˆ†å¸ƒ &lt;/center&gt;
&lt;p&gt;è¿™å¼ å›¾å¯èƒ½ä¸æ˜¯å¾ˆå‡†ç¡®ï¼Œæ„Ÿå…´è¶£å¯ä»¥å»å®˜æ–¹æ–‡æ¡£ï¼Œæè¿°æ›´åŠ è¯¦ç»†ï¼šhttps://www.kernel.org/doc/html/latest/x86/x86_64/mm.html ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ° 64 ä½æ“ä½œç³»ç»Ÿå¯ä½¿ç”¨çš„è™šæ‹Ÿå†…å­˜ç©ºé—´æ˜¯å¢åŠ çš„ï¼Œå¹¶ä¸”åŸºæœ¬ä¸Šéƒ½æ˜¯ä»¥ TB ä¸ºå•ä½ã€‚ä½†é€šè¿‡å¯¹æ¯”åŠŸèƒ½å¯ä»¥å‘ç°ï¼Œå…¶å® 64 ä½å†…å­˜çš„æ•´ä½“å¸ƒå±€å’Œ 32 ä½çš„å†…å­˜å¸ƒå±€å¤§å·®ä¸å·®ã€‚&lt;/p&gt;
&lt;p&gt;å‰é¢è¯´åˆ°çš„éƒ½æ˜¯å•çº¿ç¨‹çš„æƒ…å†µï¼Œè€Œåœ¨ Go ä¸­æˆ‘ä»¬ä¼šç»å¸¸ç”¨åˆ°å¤šçº¿ç¨‹ï¼Œé‚£ä¹ˆå¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œè¿›ç¨‹è™šæ‹Ÿå†…å­˜åˆæ˜¯æ€ä¹ˆåˆ†å¸ƒçš„å‘¢ï¼Ÿä¸€å›¾å°±æ‡‚ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20211102223936677&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202111022239800.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;å›¾ 3: å¤šè¿›ç¨‹ä¸‹ 32 ä½ç³»ç»Ÿè™šæ‹Ÿå†…å­˜åœ°å€åˆ†å¸ƒ&lt;/center&gt;
&lt;p&gt;ç›¸æ¯”å•è¿›ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°æ ˆçš„å˜åŒ–æœ€å¤§ã€‚ä¸»çº¿ç¨‹çš„æ ˆè¿˜æ˜¯ä»ä¸Šå¾€ä¸‹å¢é•¿ï¼Œä½†æ˜¯å…¶ä»–çš„çº¿ç¨‹ä¼šåˆ†å¸ƒåœ¨ä¸­é—´ï¼Œå¹¶ä¸”ä¸­é—´ä¼šç©¿æ’åŠ¨æ€é“¾æ¥åº“ Shared librariesã€å…±äº«å†…å­˜ shared memoryã€‚&lt;/p&gt;
&lt;p&gt;è€Œå †ç©ºé—´æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ï¼Œä½†ä¹Ÿæ„å‘³ç€å®ƒå¯¹å…¶ä»–çº¿ç¨‹æ¥è¯´éƒ½æ˜¯å…¬ç”¨çš„ã€‚æ‰€ä»¥çº¿ç¨‹è¦è®¿é—®å †ä¸Šçš„ä¸œè¥¿éƒ½ä¸€èˆ¬æ˜¯éœ€è¦åŠ é”çš„ã€‚&lt;/p&gt;
&lt;p&gt;OKï¼Œäº†è§£äº†è™šæ‹Ÿå†…å­˜åœ°å€åˆ†å¸ƒæƒ…å†µï¼Œé‚£ä¹ˆæ˜¯è°æ¥å¯¹å†…å­˜è¿›è¡Œåˆ†é…å‘¢ï¼Ÿæ²¡é”™ï¼Œæœ‰è¯·ä¸‹ä¸€ä½ä¸»è§’ç™»åœºã€‚&lt;/p&gt;
&lt;h1 id=&#34;å†…å­˜åˆ†é…å™¨&#34;&gt;å†…å­˜åˆ†é…å™¨&lt;/h1&gt;
&lt;p&gt;å†…å­˜åˆ†é…å™¨ Allocatorï¼Œç†è®ºä¸Šåˆ†ä¸ºä¸¤ç§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;çº¿æ€§åˆ†é…å™¨ Bump / Sequential Allocator&lt;/li&gt;
&lt;li&gt;ç©ºé—²é“¾è¡¨åˆ†é…å™¨ Free List Allocator&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;çº¿æ€§åˆ†é…å™¨åœ¨åˆ†é…å†…å­˜æ—¶éƒ½æ˜¯ä»è™šæ‹Ÿå†…å­˜ä¸­æ‰’ä¸€ç‚¹å‡ºæ¥ï¼Œä¸‹æ¬¡è¿˜è¦åˆ†é…åˆç»§ç»­æ‰’ï¼Œç»§ç»­æ‰’ &amp;hellip; å¦‚æœä¸­é—´æœ‰å†…å­˜é‡Šæ”¾æ‰äº† freeï¼Œè¿™äº›çº¿æ€§åˆ†é…å™¨ä¹Ÿä¸ä¼šå¯¹è¿™äº›è¢«é‡Šæ”¾æ‰çš„å†…å­˜è¿›è¡Œå¤ç”¨ã€‚è€Œå¦‚æœæˆ‘ä»¬ç°åœ¨çš„éœ€æ±‚å°±æ˜¯è¦å¯¹ç©ºé—´è¿›è¡Œå¤ç”¨çš„è¯ï¼Œå°±éœ€è¦é¢å¤–çš„é“¾è¡¨æ¥ç»´æŠ¤è¢«é‡Šæ”¾æ‰çš„å—ï¼Œè¿™ä¹Ÿå«åšç©ºé—²é“¾è¡¨åˆ†é…å™¨ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”å†…å­˜ç®¡ç†</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day20-memory_management/day20-memory_management/</link>
      <pubDate>Sun, 12 Sep 2021 10:01:17 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day20-memory_management/day20-memory_management/</guid>
      
      <description>&lt;p&gt;&lt;strong&gt;å‘ç”Ÿå†…å­˜æ³„éœ²æ—¶ï¼Œè¦çŸ¥é“å†…å­˜å¦‚ä½•è¿›è¡Œåˆ†é…ï¼Œåƒåœ¾å›æ”¶è¦æ‰¾å‡ºå“ªäº›å¯¹è±¡æœ‰ç”¨ï¼Œå“ªäº›å¯¹è±¡æ— ç”¨ã€‚å°¤å…¶å½“ç³»ç»Ÿåˆ°è¾¾é«˜å¹¶å‘ç“¶é¢ˆæ—¶ï¼Œæ›´éœ€è¦åƒåœ¾å›æ”¶è¿™ä¸€è§’è‰²åšå¥½é£é™©æŠŠæ§ï¼Œå¦åˆ™å°±æ˜¯å¤§å‹ç¾éš¾ç°åœº&lt;/strong&gt;ã€‚ä»Šå¤©å°±æ¥èŠèŠå†…å­˜ç®¡ç†ä¸åƒåœ¾å›æ”¶ã€‚&lt;/p&gt;
&lt;h1 id=&#34;èƒŒæ™¯ä»‹ç»&#34;&gt;èƒŒæ™¯ä»‹ç»&lt;/h1&gt;
&lt;p&gt;åƒåœ¾å›æ”¶ Garbage Collection ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç§°ä¸º GCã€‚åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œè¯´åˆ°åƒåœ¾ï¼ŒæŒ‡çš„å°±æ˜¯é‚£äº›ä¸è¯»çš„ä¹¦ã€ä¸ç©¿çš„è¡£æœç­‰ã€‚åœ¨è®¡ç®—æœºä¸­ï¼ŒGC æŠŠç¨‹åºä¸ç”¨çš„å†…å­˜ç©ºé—´è§†ä¸ºåƒåœ¾ã€‚ä½†ç©¶å…¶æœ¬è´¨ï¼Œ&lt;strong&gt;GC æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªç¨‹åº&lt;/strong&gt;ï¼Œå¦‚æœæ»¡è¶³ä¸¤é¡¹åŠŸèƒ½çš„ç¨‹åºï¼Œæˆ‘ä»¬å°±å¯ä»¥å«å®ƒ GCï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ‰¾åˆ°å†…å­˜ç©ºé—´ä¸­çš„åƒåœ¾&lt;/li&gt;
&lt;li&gt;å›æ”¶ç©ºé—´ï¼Œè®©ç¨‹åºå‘˜èƒ½å¤Ÿå†æ¬¡åˆ©ç”¨è¿™éƒ¨åˆ†ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨æ²¡æœ‰ GC çš„å¹´ä»£ï¼Œåƒ C è¯­è¨€ç¨‹åºå‘˜å¿…é¡»è‡ªå·±æ‰‹åŠ¨å»åˆ†é…å†…å­˜ï¼Œå¿…é¡»ç¡®ä¿ç”³è¯·å¤šå°‘å¤§å°çš„å†…å­˜ç©ºé—´ï¼Œåœ¨ç¨‹åºæ‰§è¡Œå®Œé‡Šæ”¾ä¸å†éœ€è¦çš„ç©ºé—´ã€‚å› ä¸ºåœ¨å½“æ—¶è®¡ç®—æœºçš„å†…å­˜èµ„æºæ˜¯ç¨€ç¼ºå’Œæ˜‚è´µçš„ï¼Œç°åœ¨æˆ‘ä»¬ä¹°ä¸€ä¸ª G å†…å­˜æ¡çš„ä»·æ ¼ç›¸å½“äºå½“æ—¶ä¹° 1 KB çš„ä»·æ ¼ï¼Œæ‰€ä»¥ç¨‹åºå‘˜å†™ä»£ç æ—¶æ“ä½œéƒ½æ˜¯å°å¿ƒè°¨æ…çš„ã€‚&lt;/p&gt;
&lt;p&gt;äººä¸ºæ“ä½œï¼Œéš¾å…æœ‰ç–å¿½çš„åœ°æ–¹ã€‚å¦‚æœå¿˜è®°é‡Šæ”¾å†…å­˜ç©ºé—´ï¼Œè¯¥å†…å­˜ç©ºé—´å°±ä¼šå‘ç”Ÿæ³„éœ²ã€‚æ„å‘³ç€è¿™å—ç©ºé—´å°†ä¼šç»§ç»­ç»´æŒè¢«ä½¿ç”¨çš„çŠ¶æ€ï¼Œæ— æ³•è¢«ä½¿ç”¨ã€‚ä¸€éƒ¨åˆ†å†…å­˜æ³„éœ²æ”¾ä»»ä¸ç®¡ï¼Œç›´åˆ°æ‰€æœ‰å†…å­˜è¢«å æ»¡äº†ï¼Œæ•´ä¸ªç³»ç»Ÿä¹Ÿå°±å´©æºƒäº†ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œåœ¨é‡Šæ”¾å†…å­˜ç©ºé—´æ—¶ï¼Œå¦‚æœå¿˜è®°åˆå§‹åŒ–ç”¨äºé‡Šæ”¾å†…å­˜çš„æŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆå°±ä¼šä¸€ç›´æŒ‡å‘é‡Šæ”¾å®Œæˆçš„å†…å­˜ç©ºé—´ã€‚æ›´æœ‰ç”šè€…ï¼Œé‡Šæ”¾çš„ç©ºé—´é”™è¯¯ï¼Œå¯¼è‡´ä¸‹æ¬¡ç¨‹åºä½¿ç”¨è¿™ä¸ªç©ºé—´æ—¶å‘ç”Ÿæ•…éšœã€‚è¿™äº›å†…å­˜ä¸Šçš„ bug éƒ½æ˜¯éš¾ä»¥ç¡®å®šçœŸå®åŸå› çš„ï¼Œå› ä¸ºä¸å†…å­˜åˆ†é…æ—¶ç–å¿½é€ æˆçš„ bug å’ŒçœŸå®åœºæ™¯ä¸‹å‘ç”Ÿçš„ä½ç½®ï¼ˆæˆ–æ—¶é—´ï¼‰æ˜¯ä¸ä¸€è‡´çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ç•¥å»ä»¥ä¸Šç§ç§çš„éº»çƒ¦ä¸å›°éš¾ï¼Œèªæ˜çš„äººä»¬ç ”å‘äº† GCï¼Œå³æŠŠå†…å­˜ç®¡ç†çš„å·¥ä½œäº¤ç»™è®¡ç®—æœºï¼Œç¨‹åºå‘˜å°±ä¸ç”¨æƒ³ç€ä»€ä¹ˆæ—¶å€™è¦é‡Šæ”¾å†…å­˜ï¼Œä¸ç”¨å†æ‹…å¿ƒå¿˜è®°é‡Šæ”¾å†…å­˜æ‰€å¯¼è‡´çš„ bugï¼Œä»è€Œå¤§å¤§å‡è½»è´Ÿæ‹…ï¼Œå°†æ›´å¤šç²¾åŠ›å’Œæ³¨æ„åŠ›æ”¾åœ¨ä¸šåŠ¡å¼€å‘ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å­¦ä¹ éš¾åº¦ä¸Šï¼Œå¦‚æœè¯´å†…å­˜åˆ†é…éš¾åº¦åœ¨ 2 ï¼Œé‚£ä¹ˆåƒåœ¾å›æ”¶çš„éš¾åº¦å°±åœ¨ 4ï¼Œç›¸æ¯”ä¹‹ä¸‹éš¾åº¦ç¿»å€ã€‚å¹¶ä¸”å­¦ä¹ åƒåœ¾å›æ”¶å¿…é¡»æŒæ¡æ‰å®çš„ç†è®ºåŸºç¡€ï¼Œå¦åˆ™éš¾ä»¥è¯»æ‡‚ä»£ç ï¼Œä¸çŸ¥é“åœ¨å¹²ä»€ä¹ˆã€‚æœ‰ä¸‰æœ¬å…³äºåƒåœ¾å›æ”¶çš„ä¹¦ï¼Œå¯ä»¥å»è¯»ä¸€è¯»ï¼šã€Šåƒåœ¾å›æ”¶çš„ç®—æ³•ä¸å®ç°ã€‹ã€ã€Šåƒåœ¾å›æ”¶ç®—æ³•æ‰‹å†Œ-è‡ªåŠ¨å†…å­˜ç®¡ç†çš„è‰ºæœ¯ã€‹ã€ã€Šæ·±å…¥ Java è™šæ‹Ÿæœºã€‹ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å®é™…ä¸Šï¼ŒGo å®˜æ–¹çš„ runtime ä½œè€…ä¸­èƒ½å¤Ÿå»ç»´æŠ¤ GC ä»£ç çš„äººä¹Ÿå¾ˆå°‘ã€‚&lt;/p&gt;
&lt;p&gt;æ®è¯´ï¼ŒGC æ˜¯å› ä¸º Java çš„å‘å¸ƒè€Œä¸€ä¸¾æˆåã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;åŸºç¡€æ¦‚å¿µ&#34;&gt;åŸºç¡€æ¦‚å¿µ&lt;/h1&gt;
&lt;p&gt;æˆ‘ä»¬&lt;strong&gt;åœ¨å­¦ä¹ å†…å­˜åˆ†é…çš„å’Œ GC çš„æ—¶å€™éœ€è¦ç»å¸¸å»é—®è‡ªå·±ä¸€äº›é—®é¢˜ï¼Œé¡ºç€é—®é¢˜çš„æ€è·¯å»æ‰¾ä»£ç ä¼šæ–¹ä¾¿äº›&lt;/strong&gt;ã€‚å¦‚æœç›´æ¥åŸ‹å¤´å»çœ‹ Go è¯­è¨€å†…å­˜ç›¸å…³çš„ä»£ç è‚¯å®šä¼šå¾ˆè’™è”½çš„ï¼Œæ¯•ç«Ÿå†…éƒ¨æ•°æ®ç»“æ„çœŸçš„å¾ˆå¤šã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å†…å­˜åˆ†é…ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å†…å­˜ä»å“ªé‡Œæ¥ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å†…å­˜è¦åˆ°å“ªé‡Œå»ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;GC ä¸­æ ‡è®°æµç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ ‡è®°å¯¹è±¡ä»å“ªé‡Œæ¥ï¼Ÿ&lt;/li&gt;
&lt;li&gt;æ ‡è®°å¯¹è±¡åˆ°å“ªé‡Œå»ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;GC ä¸­æ¸…æ‰«ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åƒåœ¾ä»å“ªé‡Œæ¥ï¼Ÿ&lt;/li&gt;
&lt;li&gt;åƒåœ¾åˆ°å“ªé‡Œå»ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;å½“æŒæ¡äº†å¯¹è±¡çš„æµå‘ä»¥åï¼Œä¸€äº›ä¸­é—´é‡åˆ°çš„æ•°æ®ç»“æ„å°±èƒ½å¤Ÿè¿æ¥èµ·æ¥ã€‚è¿™åœ¨å¾€æœŸæ–‡ç« è°ˆâ€œè°ƒåº¦â€çš„æ—¶å€™æåˆ°çš„â€œç”Ÿäº§-æ¶ˆè´¹â€æµç¨‹éå¸¸ç›¸ä¼¼ã€‚åªè¦æˆ‘ä»¬ä¸ºè¿™äº›é—®é¢˜æ‰¾åˆ°äº†ç­”æ¡ˆï¼Œä¹Ÿå°±æ…¢æ…¢åœ°å­¦ä¼šæ¯ä¸€ä¸ªæµç¨‹å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œå¹¶ä¸”å†™å‡ºè‡ªå·±çš„æ€»ç»“ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä»»ä½•ä¸€é—¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œéƒ½ä¼šæœ‰æ ˆåˆ†é…å’Œå †åˆ†é…çš„æ¦‚å¿µã€‚&lt;/p&gt;
&lt;p&gt;æ ˆåˆ†é…ï¼Œæ˜¯æŒ‡å‡½æ•°è°ƒç”¨è¿”å›åï¼Œå‡½æ•°æ ˆå¸§è‡ªåŠ¨é”€æ¯ï¼ˆSP ä¸‹ç§»ï¼‰ã€‚å‡½æ•°è°ƒç”¨æ—¶ï¼Œä¼šæœ‰å‡½æ•°æ ˆå¸§ï¼Œè¿™ä¸ªæ ˆå¸§ä¸Šé¢æ‰€æœ‰çš„å˜é‡éƒ½æ˜¯å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œåœ¨åšå‡½æ•°è°ƒç”¨çš„æ—¶å€™å°±ç›¸å½“äºæŠŠæ ˆä»é«˜åœ°å€å‘ä½åœ°å€å¢é•¿çš„è¿‡ç¨‹ï¼Œç„¶åç§»åŠ¨æ ˆé¡¶çš„å¯„å­˜å™¨ã€‚åœ¨å‡½æ•°åœ°å€è¿”å›ä»¥åï¼Œè¢«è°ƒç”¨æ ˆä¸Šçš„å†…å®¹ä¹Ÿå°±æ— æ•ˆäº†ã€‚æŠŠè¿™ä¸ªæ ˆç›´æ¥å¹²æ‰ï¼Œè¿”å›å›å»ï¼Œè¿™éƒ¨åˆ†å†…å­˜å°±å¾—åˆ°é‡Šæ”¾äº†ã€‚è¿™ä¸ªæ‰åšéå¸¸è½»é‡åŒ–ï¼Œæ—¢ä¸éœ€è¦å¯¹è¿™æ®µå†…å­˜ä¸Šçš„ä¸œè¥¿è¿›è¡Œä»»ä½•ç½®é›¶æ“ä½œï¼Œä¹Ÿä¸éœ€è¦å…³å¿ƒè¿™æ®µä»£ç åšäº†ä»€ä¹ˆäº‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;ç¤ºä¾‹ä»£ç è°ƒç”¨è§„çº¦&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202109121231501.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;æ ˆåˆ†é…å›æ”¶ç¤ºä¾‹&lt;/center&gt;
&lt;p&gt;è€Œå †åˆ†é…å°±ä¸æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ“ä½œã€‚ä¸€ä¸ª C è¯­è¨€ç¤ºä¾‹ï¼Œæ€è€ƒä¸€ä¸‹ï¼šè¿”å›å‡½æ•°çš„å±€éƒ¨å˜é‡ä¼šæ€æ ·å˜åŒ–ï¼Ÿ&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>GO ç¿»å±±è¶Šå²­â€”â€”ç³»ç»Ÿè°ƒç”¨è°ƒè¯•å·¥å…·</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day19-tools_and_sys/day19-tools_and_sys/</link>
      <pubDate>Thu, 09 Sep 2021 22:43:41 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day19-tools_and_sys/day19-tools_and_sys/</guid>
      
      <description>&lt;p&gt;&lt;strong&gt;äº†è§£ç³»ç»Ÿè°ƒç”¨å°±èƒ½åœ¨ä¸šåŠ¡å‘ç”Ÿé—®é¢˜æ—¶æœ‰æ›´å¤šæ‹›æ•°ï¼Œè§æ‹›æ‹†æ‹›&lt;/strong&gt;ã€‚çŸ¥é“äº†ç³»ç»Ÿè°ƒç”¨çš„æ¦‚å¿µï¼Œæœ‰æ—¶å€™æˆ‘ä»¬è¿˜éœ€è¦ç”¨å·¥å…·å»å®é™…è§‚å¯Ÿè¿›ç¨‹æ˜¯å¦‚ä½•å‘èµ·ç³»ç»Ÿè°ƒç”¨ï¼Œå¯¹æ“ä½œç³»ç»Ÿåšäº†å“ªäº›è¯·æ±‚ï¼Œä»Šå¤©å°±æ¥èŠä¸€èŠã€‚&lt;/p&gt;
&lt;h1 id=&#34;è§‚å¯Ÿç³»ç»Ÿè°ƒç”¨å·¥å…·&#34;&gt;è§‚å¯Ÿç³»ç»Ÿè°ƒç”¨å·¥å…·&lt;/h1&gt;
&lt;p&gt;åœ¨ Linux ä¸­æˆ‘ä»¬å¸¸ç”¨ç”¨è§‚å¯Ÿç³»ç»Ÿè°ƒç”¨çš„å·¥å…·æ˜¯ straceï¼Œåœ¨ macOS ç³»ç»Ÿä¸Šå¸¸ç”¨çš„æ˜¯ dtruss&lt;/p&gt;
&lt;p&gt;æ¡ˆä¾‹1ï¼Œé€šè¿‡ strace å¯ä»¥çœ‹åˆ°ä¸€ä¸ª Go è¿›ç¨‹çš„å¯åŠ¨è¿‡ç¨‹åˆ°åº•è°ƒç”¨äº†å“ªäº›ç³»ç»Ÿè°ƒç”¨ï¼Œè¿™é‡Œæœ‰ä¸ªä¾‹å­ï¼ˆå…·ä½“ä»£ç ä¸ç”¨å…³æ³¨ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20210909230308944&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202109092303708.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;ç³»ç»Ÿè°ƒç”¨ç¤ºä¾‹&lt;/center&gt;
&lt;p&gt;ä½¿ç”¨ strace æŒ‡ä»¤ + å¯æ‰§è¡Œæ–‡ä»¶xï¼Œçœ‹åˆ°äº†æœ‰å“ªäº›ç³»ç»Ÿè°ƒç”¨å‡½æ•°è¢«è°ƒç”¨ã€‚execve æ‰§è¡Œå“ªä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œarch_prctlã€sched_getaffinity è®¾è®¡ CPU äº²å’Œåº¦ï¼Œoepnat åŠ è½½ç›¸å…³æ–‡ä»¶ï¼Œmmap ç³»ç»Ÿæ˜ å°„ï¼Œgettid è·å–çº¿ç¨‹ IDã€‚&lt;/p&gt;
&lt;p&gt;æ¡ˆä¾‹2ï¼Œé€šè¿‡ strace è¿˜å¯ä»¥æŸ¥çœ‹ä¸€äº›è½¯ä»¶çš„åšäº†å“ªäº›ç³»ç»Ÿè°ƒç”¨ï¼Œæ¯”å¦‚æŸ¥çœ‹ nginx çš„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20210909231712937&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202109092317098.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;æŸ¥çœ‹nginx ç³»ç»Ÿè°ƒç”¨&lt;/center&gt;
&lt;p&gt;æˆ‘ä»¬çŸ¥é“ nginx åœ¨å¹³æ—¶ä¸æœåŠ¡çš„æ—¶å€™éƒ½æ˜¯é˜»å¡çš„çŠ¶æ€ï¼Œå³é˜»å¡åœ¨æŸä¸ªç³»ç»Ÿè°ƒç”¨ä¸Šã€‚ä½¿ç”¨ strace æŒ‡ä»¤ + -f å‚æ•° + nginx å¯ä»¥è§‚å¯Ÿå®ƒå¯åŠ¨çš„è¿‡ç¨‹ã€‚å¦‚æœè¿™ä¸ªè½¯ä»¶éœ€è¦åˆ›å»ºå¤šä¸ªè¿›ç¨‹ï¼Œå°±éœ€è¦è¿™é‡Œçš„ -f çš„ flag å‚æ•°ï¼Œè·Ÿè¸ªæ‰€æœ‰åˆšå¯åŠ¨çº¿ç¨‹åˆ›å»ºçš„å…¶ä»–è¿›ç¨‹ã€‚æœ€åæˆ‘ä»¬å¯ä»¥å‘ç° nginx é˜»å¡åœ¨ pid ä¸º 224 çš„ epoll_wait ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šåœ¨ docker ä¸­ç”¨è¿™ä¸ªå‘½ä»¤å¯èƒ½ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªé“¾æ¥ã€ŠWhy strace doesn&amp;rsquo;t work in Dockerã€‹https://jvns.ca/blog/2020/04/29/why-strace-doesnt-work-in-docker/&lt;/p&gt;
&lt;p&gt;æ¡ˆä¾‹3ï¼Œé€šè¿‡ strace è§‚å¯Ÿä¸€ä¸ª Go è¯­è¨€ Hello world ç¨‹åºç”Ÿå‘½å‘¨æœŸä¸­ç³»ç»Ÿè°ƒç”¨æƒ…å†µã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>GO ç¿»å±±è¶Šå²­â€”â€”Go å¸¸è§ç³»ç»Ÿè°ƒç”¨</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day18-go_and_sys/day18-go_and_sys/</link>
      <pubDate>Tue, 07 Sep 2021 07:28:31 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day18-go_and_sys/day18-go_and_sys/</guid>
      
      <description>&lt;p&gt;ç³»ç»Ÿè°ƒç”¨ï¼Œæ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸ä¸ºåº”ç”¨æä¾›çš„ APIã€‚ä»Šå¤©ç»§ç»­æ¥è®²ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨æ¡ˆä¾‹å’Œ Go ä¸­å¸¸è§ç³»ç»Ÿè°ƒç”¨&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th style=&#34;text-align: center&#34;&gt;arch&lt;/th&gt;
          &lt;th style=&#34;text-align: center&#34;&gt;syscall NR&lt;/th&gt;
          &lt;th style=&#34;text-align: center&#34;&gt;return&lt;/th&gt;
          &lt;th style=&#34;text-align: center&#34;&gt;arg0&lt;/th&gt;
          &lt;th style=&#34;text-align: center&#34;&gt;arg1&lt;/th&gt;
          &lt;th style=&#34;text-align: center&#34;&gt;arg2&lt;/th&gt;
          &lt;th style=&#34;text-align: center&#34;&gt;arg3&lt;/th&gt;
          &lt;th style=&#34;text-align: center&#34;&gt;arg4&lt;/th&gt;
          &lt;th style=&#34;text-align: center&#34;&gt;arg5&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;213&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;epoll_create&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;man/ cs/&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;0xd5&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;int size&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;-&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;-&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;-&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;-&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ¥æºï¼šhttps://chromium.googlesource.com/chromiumos/docs/+/master/constants/syscalls.md#x86_64-64_bit&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ Linux ä¸­çš„ç³»ç»Ÿè°ƒç”¨ï¼Œç¼–å·æ˜¯ 213ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸€ä¸‹ä»£ç äº†è§£æ›´å¤šä¿¡æ¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ABAP&#34; data-lang=&#34;ABAP&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;define&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;SYS_epoll_create&lt;/span&gt;    &lt;span class=&#34;mi&#34;&gt;213&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;TEXT&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;epoll_create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;SB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;NOSPLIT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nv&#34;&gt;MOVL&lt;/span&gt;	&lt;span class=&#34;k&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;DI&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nv&#34;&gt;MOVL&lt;/span&gt;	&lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;SYS_epoll_create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nv&#34;&gt;SYSCALL&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nv&#34;&gt;MOVL&lt;/span&gt;	&lt;span class=&#34;nv&#34;&gt;AX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nv&#34;&gt;RET&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç¼–å· 213 æŒ‰ç…§è°ƒç”¨è§„çº¦ä¼šè¢«å­˜å‚¨åœ¨ rax å¯„å­˜å™¨ä¸­ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„ AX å¯„å­˜å™¨ã€‚epoll_create åªæœ‰ä¸€ä¸ªé˜è¿°ä¼ é€’ï¼Œä¹Ÿå°±æ˜¯ int ç±»å‹çš„ sizeã€‚SYSCALL ç›´æ¥è¿›å…¥å†…æ ¸å»äº†ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ SYSCALL ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆï¼Œå³æˆ‘ä»¬å†™å¥½åº”ç”¨ç¨‹åº Application program æ‰§è¡Œäº†å“ªäº› SYSCALL é€»è¾‘ã€‚ä»ä¸‹å›¾å¯ä»¥å¾—çŸ¥ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;SYSCALL ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆ&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202109072232527.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;å½“æˆ‘ä»¬è°ƒç”¨äº† syscall.EpollCreate ä¹‹åè¿›å…¥äº† syscall åŒ…ä¸­çš„ä¸€æ®µä»£ç ï¼Œç„¶åæ ¹æ®ä¸€å®šçš„è§„åˆ™ç¿»è¯‘æˆ runtime.RawSyscallï¼Œé‡Œé¢ä¼šæœ‰ä¸€å †å‡†å¤‡å‚æ•°å’Œé€»è¾‘ï¼Œå®Œäº†ä¹‹åå°±æ˜¯æ‰§è¡Œ SYSCALL æŒ‡ä»¤ã€‚ä¸ŠæœŸè¯´çš„æˆ‘ä»¬å†™çš„ä»£ç å¤„äº CPU åˆ†çº§ä¿æŠ¤åŸŸ ring-3ï¼Œæ‰§è¡Œè¿™ä¸ªæŒ‡ä»¤ä¹‹åå°±èƒ½å¸®åŠ©æˆ‘ä»¬ä» ring-3 åˆ‡æ¢åˆ° ring-0ï¼Œç„¶åå»æ‰§è¡Œå†…æ ¸ç›¸å…³çš„ä»£ç äº†ã€‚ring-0 å†…æ ¸æ¨¡å¼ä¸‹ä»€ä¹ˆæ“ä½œéƒ½èƒ½å¤Ÿè¿›è¡Œï¼Œæ²¡æœ‰ç‰¹åˆ«çš„æƒé™é™åˆ¶ã€‚å†…æ ¸ä¹Ÿæœ‰ç›¸å…³çš„ç³»ç»Ÿè°ƒç”¨è¡¨ï¼ˆåœ¨æœ€ä¸Šé¢çš„é“¾æ¥ä¸­ï¼‰ï¼Œä¼šå»è°ƒç”¨å…·ä½“çš„ç³»ç»Ÿè°ƒç”¨å®ç°ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”ç³»ç»Ÿè°ƒç”¨åŸºç¡€</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day17-lang_and_sys/day17-lang_and_sys/</link>
      <pubDate>Mon, 06 Sep 2021 20:26:32 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day17-lang_and_sys/day17-lang_and_sys/</guid>
      
      <description>&lt;p&gt;ç¼–ç¨‹è¯­è¨€å’Œæ“ä½œç³»ç»Ÿä¹‹é—´çš„æ¡¥æ¢ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ç³»ç»Ÿè°ƒç”¨ã€‚ä»Šå¤©æ¥èŠèŠï¼Œç³»ç»Ÿè°ƒç”¨çš„åŸºç¡€æ¦‚å¿µã€‚&lt;/p&gt;
&lt;h1 id=&#34;ä»€ä¹ˆæ˜¯ç³»ç»Ÿè°ƒç”¨&#34;&gt;ä»€ä¹ˆæ˜¯ç³»ç»Ÿè°ƒç”¨&lt;/h1&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨äº†è§£ç³»ç»Ÿè°ƒç”¨ä¹‹å‰ï¼Œéœ€è¦å¯¹æ“ä½œç³»ç»Ÿæœ‰ä¸ªç®€å•çš„äº†è§£ã€‚æ“ä½œç³»ç»Ÿï¼ˆoperating system,OSï¼‰æ˜¯&lt;strong&gt;èµ„æºçš„ç®¡ç†å™¨&lt;/strong&gt;ï¼Œä¹Ÿæ˜¯è®¡ç®—æœºç³»ç»Ÿçš„å†…æ ¸ä¸åŸºçŸ³ï¼Œå…¶ç®¡ç†çš„èµ„æºéƒ½æ˜¯ç»è¿‡äº†æŠ½è±¡ã€‚è€Œå¯¹è®¡ç®—æœºæ¥è¯´ï¼Œèµ„æºæ˜¯ç¡¬ä»¶ä¿¡æ¯ï¼šCPUã€RAM å†…å­˜ã€I/O è®¾å¤‡ï¼Œä»¥åŠè¿›ä¸€æ­¥æŠ½è±¡çš„è½¯ä»¶èµ„æºï¼Œå¦‚è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆè¯´æ“ä½œç³»ç»Ÿæ˜¯å¯¹èµ„æºè¿›è¡Œäº†æŠ½è±¡å‘¢ï¼Ÿå› ä¸ºæ“ä½œä¸æ–¹ä¾¿ã€æ“ä½œä¸å®‰å…¨ï¼Œæˆ‘ä»¬å¹³æ—¶æ¥è§¦åˆ°çš„ä¸æ˜¯ç›´æ¥çš„ç¡¬ä»¶ï¼Œæ¯”å¦‚ç£ç›˜æ“ä½œï¼Œä¸ä¼šå»æ“ä½œæ‰‡åŒºï¼ˆåµŒå…¥å¼ç³»ç»Ÿé™¤å¤–ï¼‰ã€‚è€Œæˆ‘ä»¬æ‰€é¢å¯¹çš„éƒ½æ˜¯è¿™äº›ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç£ç›˜æŠ½è±¡ï¼šæ–‡ä»¶å¤¹&lt;/li&gt;
&lt;li&gt;å†…å­˜æŠ½è±¡ï¼šè™šæ‹Ÿå†…å­˜&lt;/li&gt;
&lt;li&gt;CPU æŠ½è±¡ï¼šæ—¶é—´ç‰‡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ‰äº†æ“ä½œç³»ç»Ÿï¼Œæˆ‘ä»¬å¯¹è®¡ç®—æœºçš„è°ƒåº¦è¿˜æ˜¯ä¸å¤Ÿçš„ã€‚è¯´ç™½äº†ï¼Œæ“ä½œç³»ç»Ÿä¹Ÿæ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œåº•å±‚è¿˜æ˜¯ä¸€å †ä»£ç å’Œæ±‡ç¼–æŒ‡ä»¤ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ç”±ç¡¬ä»¶æä¾›æ”¯æŒï¼Œåœ¨åº”ç”¨å’Œæ“ä½œç³»ç»Ÿä¹‹é—´è¿›è¡Œä¸€å±‚æˆ–å¤šå±‚éš”ç¦»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20210906210117219&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202109062101385.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;åˆ†çº§ä¿æŠ¤åŸŸ&lt;/center&gt;
&lt;p&gt;CPU å·²ç»ä¸ºæ“ä½œç³»ç»Ÿæä¾›äº†ç‰¹æ®Šçš„å®‰å…¨æ”¯æŒâ€”â€”åˆ†çº§ä¿æŠ¤åŸŸï¼ˆprotection ringï¼‰ã€‚æ“ä½œç³»ç»Ÿå†…æ ¸è¿è¡Œåœ¨ç‰¹æ®Šæ¨¡å¼ä¸‹ï¼Œå³å›¾ä¸­çš„ ring-0 ï¼Œè€Œåº”ç”¨è¿è¡Œåœ¨ ring-3ï¼Œä½†æƒé™è¢«ä¸¥æ ¼é™åˆ¶ã€‚å› æ­¤ï¼Œåœ¨ä»£ç ä¸­æˆ‘ä»¬æ²¡åŠæ³•ç›´æ¥å»è°ƒç”¨ç³»ç»Ÿèµ„æºï¼Œå°±éœ€è¦æ“ä½œç³»ç»Ÿå¸®åŠ©æˆ‘ä»¬å»è°ƒç”¨ï¼Œå¹¶æŠŠç›¸åº”çš„æ“ä½œæŠ½è±¡æˆ API æ¥ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Intel64 æœ‰å››ä¸ªç‰¹æƒçº§åˆ«ï¼Œä¸è¿‡å®é™…ä¸Šåªç”¨åˆ°äº†å…¶ä¸­ä¸¤ä¸ª ring-0 å’Œ ring-3ã€‚ring-1 å’Œ ring-2 æœ¬æ¥è®¡åˆ’æ˜¯ä¸ºäº†é©±åŠ¨ç¨‹åºå’Œ OS æœåŠ¡ç”¨ï¼Œä¸è¿‡æµè¡Œçš„ OS ä»¬éƒ½æ²¡æœ‰æ¥å—è¿™ä¸ªæ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¯´åˆ°è¿™é‡Œï¼Œç­”æ¡ˆå·²ç»æ­æ™“ã€‚&lt;strong&gt;ç³»ç»Ÿè°ƒç”¨ï¼Œæ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸ä¸ºåº”ç”¨æä¾›çš„ API&lt;/strong&gt;ã€‚å¯ä»¥ç†è§£ä¸ºå†…æ ¸ä¸ºåº”ç”¨æä¾›æœåŠ¡ï¼Œæ“ä½œç³»ç»Ÿå°±ä½æˆ‘ä»¬çš„ä¸Šå±‚åº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç³»åˆ—â€œæ ‡å‡†åº“â€ã€‚æ¯”å¦‚æˆ‘ä»¬å¸¸è§çš„åç«¯æœåŠ¡ï¼šAPP å‘èµ·è¯·æ±‚ request â†’ æ“ä½œç³»ç»Ÿ Operating System æ¥æ”¶ã€å¤„ç†å¹¶å“åº” â†’  APP æ¥æ”¶ responseã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹äºåº”ç”¨æ¥è¯´ï¼Œç³»ç»Ÿè°ƒç”¨å¯ä»¥å®ç°è¶…å‡ºè‡ªå·±èƒ½åŠ›ä»¥å¤–çš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é‚£ä¹ˆ Go è¯­è¨€ä¸­çš„ç³»ç»Ÿè°ƒç”¨æ˜¯æ€æ ·çš„å‘¢ï¼Ÿåœ¨æ­¤ä¹‹å‰ï¼Œè¿˜éœ€è¦æåŠ &lt;strong&gt;Go è¯­è¨€è°ƒç”¨è§„çº¦&lt;/strong&gt;ã€‚æˆ‘ä»¬åœ¨åšå‡½æ•°è°ƒç”¨çš„æ—¶å€™æ²¡æœ‰ä½¿ç”¨å¯„å­˜å™¨ï¼Œè€Œæ˜¯å°†å‚æ•°éƒ½æ”¾åœ¨æ ˆä¸Šã€‚ä½†åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­åšå‚æ•°ä¼ é€’å’Œå‡½æ•°è°ƒç”¨éƒ½æ˜¯ç”¨åˆ°äº†å¯„å­˜å™¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;hello&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;z&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;multi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;multi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ®µä»£ç çš„è°ƒç”¨è§„çº¦å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;æœªå‘½åæ–‡ä»¶ (5)&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202109062141634.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;ç¤ºä¾‹ä»£ç è°ƒç”¨è§„çº¦&lt;/center&gt;
&lt;p&gt;è¿™é‡Œä¹Ÿè¯´æ˜ä¸€ä¸‹ä»€ä¹ˆæ˜¯å¯„å­˜å™¨ã€‚å¯„å­˜å™¨ï¼Œæ˜¯CPU å†…éƒ¨çš„ç‰¹æ®Šå­˜å‚¨å•å…ƒã€‚ä¸€èˆ¬æ˜¯ç”¨äºŒæç®¡åšçš„ï¼Œä»·æ ¼æ¯”è¾ƒé«˜ï¼Œæ•°é‡æ¯”è¾ƒå°‘ã€‚åˆå› ä¸ºå¯„å­˜å™¨å°‘ï¼Œæ‰€ä»¥æœ‰å…·ä½“çš„åå­—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;CPU ä¸å†…å­˜ (1)&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202109062206995.png&#34;&gt;&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”å†…ç½®æ•°æ®ç»“æ„-Context</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day16-data-structure_context/day16-data-structure_context/</link>
      <pubDate>Sun, 05 Sep 2021 15:48:38 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day16-data-structure_context/day16-data-structure_context/</guid>
      
      <description>&lt;p&gt;Go è¯­è¨€åœ¨ 1.16 ç‰ˆæœ¬ä¹‹ååŠ å…¥äº†æ–°çš„å†…ç½®æ•°æ®ç»“æ„ Contextï¼Œè™½ç„¶åœ¨ä»£ç ä¸­ä½¿ç”¨éƒ½æ¯”è¾ƒç®€å•ï¼Œä½†è¯­è¨€å†…éƒ¨è¿˜æ˜¯åšäº†è®¸å¤šåŒºåˆ†ï¼Œä»Šå¤©æ¥åˆ†æä¸€ä¸‹ Contextã€‚&lt;/p&gt;
&lt;h1 id=&#34;context&#34;&gt;Context&lt;/h1&gt;
&lt;p&gt;è™½ç„¶åœ¨ä½¿ç”¨ context çš„æ—¶å€™ï¼Œçœ‹èµ·æ¥éƒ½æ˜¯ context.* çš„ç»“æ„ï¼Œä½† Go è¯­è¨€å†…éƒ¨åšäº†è¿™æ ·ä¸€ä¸ªåŒºåˆ†ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Context æ“ä½œ&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202109051711081.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;context æ“ä½œ&lt;/center&gt;
&lt;p&gt;å…·ä½“è¯´æ˜å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;emptyCtxï¼šæ‰€æœ‰ ctx ç±»å‹çš„æ ¹&lt;/li&gt;
&lt;li&gt;valueCtxï¼šä¸»è¦ä¸ºäº†åœ¨ ctx ä¸­åµŒå…¥ä¸Šä¸‹æ–‡æ•°æ®ï¼Œä¸€ä¸ªç®€å•çš„ k å’Œ v ç»“æ„ï¼ŒåŒä¸€ä¸ª ctx å†…åªæ”¯æŒä¸€å¯¹ kvï¼Œéœ€è¦æ›´å¤šçš„ kv çš„è¯ï¼Œä¼šå½¢æˆæ ‘å½¢ç»“æ„ã€‚&lt;/li&gt;
&lt;li&gt;cancelCtxï¼šå–æ¶ˆç¨‹åºçš„æ‰§è¡Œæ ‘&lt;/li&gt;
&lt;li&gt;timerCtxï¼šåœ¨ cancelCtx ä¸ŠåŒ…äº†ä¸€å±‚ï¼Œæ”¯æŒåŸºäºæ—¶é—´çš„ cancel&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸ªä¾‹å­&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;context&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;orderID&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;TODO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;WithValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;orderID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;1234&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;WithValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;orderID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;2345&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;WithValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;orderID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;3456&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;orderID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…·ä½“æµç¨‹å¦‚ä¸‹ï¼Œå‰ä¸€ä¸ªèŠ‚ç‚¹æ˜¯åä¸€ä¸ªèŠ‚ç‚¹çš„ parent&lt;/p&gt;
&lt;p&gt;valueCtx{ k: 3, v: 3456 }  â†’  valueCtx{ k: 2, v: 2345 } â†’ valueCtx{ k: 1, v: 1234} â†’ emptyCtx&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”å†…ç½®æ•°æ®ç»“æ„-Map</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day15-data-structure_map/day15-data-structure_map/</link>
      <pubDate>Thu, 02 Sep 2021 23:23:12 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day15-data-structure_map/day15-data-structure_map/</guid>
      
      <description>&lt;p&gt;Map æœ‰æ—¶èƒ½å¤Ÿè¿”å›ä¸€ä¸ªå€¼ï¼Œæœ‰æ—¶å€™èƒ½å¤Ÿè¿”å›å¤šä¸ªå€¼ï¼Œè¿™æ˜¯ &lt;strong&gt;Map çš„ç‰¹æƒè¯­æ³•&lt;/strong&gt;ã€‚ä»Šå¤©ç»§ç»­ä»åº•å±‚è§’åº¦æ¥èŠèŠ Go è¯­è¨€å†…ç½®æ•°æ®ç»“æ„ï¼ŒMapã€‚&lt;/p&gt;
&lt;h1 id=&#34;map&#34;&gt;Map&lt;/h1&gt;
&lt;p&gt;Map ä¸­å¤§é‡ç±»ä¼¼ä½†åˆå†—ä½™çš„å‡½æ•°ï¼ŒåŸå› ä¹‹ä¸€ä¾¿æ˜¯æ²¡æœ‰æ³›å‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;v1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åˆ©ç”¨ä¹‹å‰æåˆ°çš„å·¥å…· go tool objdump èƒ½å¤Ÿè·å¾—åæ±‡ç¼–åçš„å‡½æ•°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;make â†’ runtime.makemap&lt;/li&gt;
&lt;li&gt;10 â†’ hint&lt;/li&gt;
&lt;li&gt;m[1] â†’ runtime.mapaccess1_fast64&lt;/li&gt;
&lt;li&gt;m[2] â†’ runtime.mapaccess2_fast64&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥ä¸Šè¿™äº›è¿‡ç¨‹éƒ½æ˜¯ç¼–è¯‘å™¨å¸®æˆ‘å®Œæˆçš„ï¼Œç¼–è¯‘å™¨åˆ¤æ–­èµ‹å€¼è¯­å¥ï¼Œå¦‚å·¦è¾¹æœ‰ä¸€ä¸ªå€¼å°±ç¿»è¯‘ä¸º runtime.mapaccess1_fast64ï¼Œ éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸‰ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å½“ hint  å¤§å°å¤§äº 8 æ—¶ï¼Œé‡‡ç”¨çš„æ˜¯ makemap&lt;/li&gt;
&lt;li&gt;å½“ hint å°äº 8 æ—¶ï¼Œé‡‡ç”¨çš„æ˜¯ makemap_small&lt;/li&gt;
&lt;li&gt;map åˆ†é…æ ˆä¸Šæ—¶ï¼Œä¸ä¸€å®šä¼šè°ƒç”¨ makemap&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt=&#34;Map å‡½æ•°ä¸€è§ˆ&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202109042253388.png&#34;&gt;&lt;/p&gt;
&lt;center&gt;Map åº•å±‚å‡½æ•°ä¸€è§ˆ&lt;/center&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆä¸€ä¸ª Go è¯­è¨€å†…ç½®æ•°æ®ç»“æ„å°±æœ‰è¿™ä¹ˆå¤šæƒ…å†µï¼Œé‚£å¦‚æœ Go çš„ 20 æ¥ä¸ªå†…ç½®æ•°æ®ç»“æ„éƒ½æœ‰è¿™ç§åˆ¤å®šï¼Œå²‚ä¸æ˜¯åº•å±‚å°±æœ‰å·®ä¸å¤š 60 ä¸ªä¸åŒåˆ¤å®šç»“æ„ï¼Ÿç¡®å®æ˜¯è¿™æ ·çš„ï¼Œmap ä¸­å­˜åœ¨å¤§é‡ç±»ä¼¼ä½†åˆå†—ä½™çš„å‡½æ•°ï¼Œä½†ä¸è‡³äºæŠŠæ€§èƒ½æ‹‰ä½å¾ˆå¤šã€‚è¿™ç§é—®é¢˜ä¸»è¦æ˜¯åŸå› ä¹‹ä¸€æ˜¯ Go è¯­è¨€åœ¨ 1.16 ç‰ˆæœ¬å‰æ²¡æœ‰æ³›å‹ã€‚å¯å–œçš„æ˜¯ï¼Œåœ¨ Go 1.17 ç‰ˆæœ¬ä¹‹åå°†ä¼šå¼•å…¥æ³›å‹ï¼Œå¤§å®¶æ„Ÿå…´è¶£å·²ç»å¯ä»¥è‡ªå·±å»å°è¯•äº†ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”å†…ç½®æ•°æ®ç»“æ„-Timer</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day14-data-structure_timer/day14-data-structure_timer/</link>
      <pubDate>Mon, 30 Aug 2021 23:13:54 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day14-data-structure_timer/day14-data-structure_timer/</guid>
      
      <description>&lt;p&gt;ä¸ŠæœŸ Go æ–‡ç« è¯´é“äº† Go å†…ç½®æ•°æ®ç»“æ„ï¼Œä»åº•å±‚æºç è§’åº¦ç®€å•åœ°æè¿°äº† channelã€‚ä»Šå¤©ç»§ç»­åˆ†æå…¶ä»–çš„å†…ç½®æ•°æ®ç»“æ„ Timerã€‚&lt;/p&gt;
&lt;h1 id=&#34;timer&#34;&gt;Timer&lt;/h1&gt;
&lt;p&gt;Timer åœ¨ golang 1.14 ç‰ˆæœ¬ä»¥å‰æ¯”è¾ƒç®€å•ï¼Œæ•´ä¸ª Timer.go æ–‡ä»¶ä¸­ä»£ç  æ‰ 700 è¡Œå·¦å³ã€‚æ•´ä¸ªä»£ç å°±æ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„å’Œè®¸å¤š goroutineã€‚ä½† golang åˆ°äº† 1.14 ç‰ˆæœ¬ä»¥åï¼Œç”±äºå®˜æ–¹çš„å‡çº§ç»´æŠ¤å°±å˜å¾—éå¸¸å¤æ‚ã€‚æ‰€ä»¥è¿™é‡Œç¬”è€…ç®€å•è®²ä¸€ä¸‹ Timer çš„è¿­ä»£å†å²ï¼ŒçŠ¶æ€æœºåˆ¶ä¸ä¼šæ¶‰åŠåˆ°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;æœªå‘½åæ–‡ä»¶ (1)&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202108302359026.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä»è¿™å¼ å›¾å¯ä»¥çœ‹åˆ°**ï¼Œæœ€æ—©çš„ Timer å°±æ˜¯ä¸€ä¸ªå››å‰å †**ã€‚æˆ‘ä»¬å¹³æ—¶å†™ç®—æ³•çš„æ—¶å€™äºŒå‰å †è§å¾—æ¯”è¾ƒå¤šï¼Œé‚£æ˜¯ä¸æ˜¯ç†è§£è¿™ä¸ªæ›´å›°éš¾ï¼Ÿä¸æ˜¯çš„ï¼Œæˆ‘ä»¬ç€é‡çœ‹ Timer çš„ç»“æ„å’Œæ¼”è¿›ã€‚åƒæœ€æ—©çš„ time.Sleep æˆ–è€… time.After è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œå®é™…ä¸Šæˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ª Timer ç±»ï¼Œè¿™ä¸ª Timer ä¼šæœ€ç»ˆåŠ åˆ°æˆ‘ä»¬çš„ runtime ç»´æŠ¤çš„å››å‰å †é‡Œé¢ã€‚è¿™ä¸ªå››å‰å †å…¶å®æ˜¯å¾ˆå¥½ç†è§£çš„ï¼Œå…¶å®æ˜¯æœ‰ä¸ªåŸºå‡†çš„ã€‚&lt;/p&gt;
&lt;p&gt;å †é¡¶è¦æ”¾ä»€ä¹ˆå…ƒç´ ï¼Œå…ƒç´ å¦‚ä½•æ’åˆ—ï¼Ÿéƒ½æ˜¯ä»¥è§¦å‘æ—¶é—´ä¸ºå‡†ã€‚ä¹Ÿå°±æ˜¯è¯´ç¦»å½“å‰æ—¶é—´æœ€è¿‘çš„ï¼Œä¸€å®šæ˜¯åœ¨å †é¡¶çš„ã€‚å¦‚æœæ¥äº†ä¸€ä¸ªæ–°çš„ Timer ï¼Œå®ƒæ˜¯åœ¨è¿™ä¸ªæ—¶é—´ä¹‹åï¼Œå®ƒå°±ä¼šç»§ç»­å¾€å †ä¸‹é¢èµ°ã€‚å¦‚æœæ¯”å †é¡¶å°å°±ä¼šæ¶‰åŠåˆ°å¯¹å½“å‰å››å‰å †çš„è°ƒæ•´äº†ï¼Œè¿™ä¸ªå’Œå†™äºŒå‰å †è°ƒæ•´ç®—æ³•å¾ˆç±»ä¼¼ã€‚&lt;/p&gt;
&lt;p&gt;æœ€è€çš„ Timer å®ç°å…¨å±€åªæœ‰ä¸€ä¸ªå››å‰å †ï¼Œè¿™ä¸ªå››å‰å †ä¸“é—¨å¯ç”¨ä¸€ä¸ªå«åš timerproc çš„ goroutineã€‚è¿™ä¸ª goroutine çš„é€»è¾‘ä¹Ÿä¸å¤æ‚ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ª for å¾ªç¯ã€‚è¿™ä¸ª for å¾ªç¯ä¼šä¸æ–­åœ°æ£€æŸ¥å †é¡¶å…ƒç´ æ˜¯ä¸æ˜¯å·²ç»åˆ°æœŸäº†ï¼Œå¦‚æœåˆ°æœŸäº†å°±ä¼šè§¦å‘ï¼Œåœ¨è§¦å‘çš„åŒæ—¶ä¼šé€æ¸åœ°è°ƒæ•´å †ï¼Œç›´åˆ°æŠŠæ‰€æœ‰éœ€è¦è§¦å‘çš„ Timer éƒ½è§¦å‘å®Œæ¯•ä¸ºæ­¢ï¼Œç»§ç»­å»ä¼‘çœ ã€‚&lt;/p&gt;
&lt;p&gt;ä½†è¿™ç§å•ä¸€çš„å››å‰å †ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ã€‚å½“å‰ Go ç¨‹åºæ‰€æœ‰çš„ goroutine åœ¨æ‰§è¡Œ Timer ç›¸å…³æ“ä½œçš„æ—¶å€™éƒ½éœ€è¦å»æŠ¢å æ“ä½œè¿™ä¸ªå †çš„å…¨å±€é”ï¼Œè€Œå…¶å®è¿™ä¸ªé”éƒ½æ˜¯å†™é”ã€‚å¦‚æœå¹¶å‘é‡å¾ˆé«˜ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´ç¨‹åºæ•´ä½“çš„ååé‡ä¸‹é™ã€‚å…¨å±€é”å¯¹äºä»»ä½•ç¨‹åºæ¥è¯´ï¼Œæ€§èƒ½å½±å“éƒ½æ¯”è¾ƒå¤§ï¼Œè¿™ä¸ªé—®é¢˜å¯¼è‡´äº† go ç¨‹åºåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šæ€§èƒ½ä¸ä½³ï¼Œæœ‰äººä¸“é—¨æäº†ä¸€ä¸ª issuesï¼šhttps://github.com/golang/go/issues/15133ã€‚ï¼ˆå°± python æ¥è¯´ï¼Œ è™½ç„¶ python æ”¯æŒå¤šè¿›ç¨‹ï¼Œä¹Ÿæ”¯æŒå¤šçº¿ç¨‹ã€‚ä½†å› ä¸º GIL å…¨å±€è§£é‡Šå™¨é”çš„å­˜åœ¨ï¼Œpython çš„å¤šçº¿ç¨‹ç¨‹åºåœ¨åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è¿è¡Œã€‚æ‰€ä»¥å¤šçº¿ç¨‹ Python ç¨‹åºåªæ˜¯å¹¶å‘ï¼Œè€Œä¸æ˜¯å¹¶è¡Œï¼‰&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”å†…ç½®æ•°æ®ç»“æ„-Channel</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day13-data-structure_channel/day13-data-structure_channel/</link>
      <pubDate>Sun, 29 Aug 2021 14:47:52 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day13-data-structure_channel/day13-data-structure_channel/</guid>
      
      <description>&lt;p&gt;&lt;strong&gt;å†…ç½®æ•°æ®ç»“æ„æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€çš„åŸºç¡€æ ¸å¿ƒ&lt;/strong&gt;ï¼Œäº†è§£åŸºæœ¬è¯­æ³•å°±èƒ½å¤Ÿè®©æˆ‘ä»¬è¿›è¡Œç®€å•çš„å¼€å‘ã€‚ä»Šå¤©å¼€å§‹ï¼Œå°±æ¥ç³»ç»Ÿåœ°ç ”ç©¶ Go è¯­è¨€å†…ç½®æ•°æ®ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œå…ˆæ¥çœ‹çœ‹æ‰€æœ‰çš„Go è¯­è¨€æ‰€æœ‰å†…ç½®æ•°æ®ç»“æ„éƒ½æœ‰å“ªäº›ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåˆ—å‡ºäº†æ€ç»´å¯¼å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;æœªå‘½åæ–‡ä»¶&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202108291453518.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶æ˜¯ç³»ç»Ÿåœ°ç ”ç©¶ï¼Œè¿™é‡Œå°±éœ€è¦ç”¨åˆ°æš´åŠ›ç ´è§£çš„æ€æƒ³â€”â€”æŠŠæ¯ä¸ªæ•°æ®ç»“æ„éƒ½éå†åƒé€ã€‚&lt;/p&gt;
&lt;h1 id=&#34;channel&#34;&gt;Channel&lt;/h1&gt;
&lt;p&gt;ä¹‹å‰çš„æ–‡ç« ä¸­æåˆ°äº†é€šè¿‡åæ±‡ç¼–è°ƒè¯•å·¥å…·æ¥æŸ¥çœ‹ Go è¯­è¨€çš„æºç ã€‚è¿˜æåˆ°äº†ä¸‰ç§æƒ…å†µä¼šå¯¼è‡´ panic çš„å…³é”®å‡½æ•° chansendã€chanrecvï¼Œä¸‹é¢æ¥è¿›è¡Œæºç é€»è¾‘åˆ†æã€‚å¿½ç•¥ä¸€äº›ç»†èŠ‚å®ç°ï¼Œæ¥çœ‹çœ‹ chansend çš„æµç¨‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;chansend æµç¨‹å›¾&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202108291706892.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;å›¾ä¸Šçœç•¥äº†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;select dafault çš„æƒ…å†µã€‚&lt;/li&gt;
&lt;li&gt;é€»è¾‘æ‰§è¡Œæ—¶ç¢°åˆ° ch å·² close çš„æƒ…å†µã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»æµç¨‹å›¾ï¼Œèƒ½å¤Ÿæ¸…æ™°åœ°çœ‹åˆ° åœ¨ chansend çš„å†…ç½®å‡½æ•°ä¸­ï¼ŒGo è¯­è¨€æ˜¯å¦‚ä½•å¤„ç†æˆ‘ä»¬å‘é€çš„æ•°æ®ã€‚ç´§æ¥ç€æˆ‘ä»¬å†æ¥çœ‹çœ‹ chanrecv çš„æµç¨‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;chanrecv æµç¨‹å›¾&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202108291706194.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;å›¾ä¸Šä¹Ÿçœç•¥äº†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;select default çš„æƒ…å†µã€‚&lt;/li&gt;
&lt;li&gt;é€»è¾‘æ‰§è¡Œæ—¶ç¢°åˆ° ch å·²ç» close çš„æƒ…å†µã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯¹æ¯”å‘ç°ï¼Œä¸¤ä¸ªæµç¨‹å·®ä¸å¤šï¼Œå› æ­¤ channel çš„å‘é€å’Œæ¥æ”¶çš„é€»è¾‘éƒ½æ˜¯å·®ä¸å¤šçš„ï¼Œéƒ½è¦åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œæ˜¯å¦é˜»å¡ï¼Œç„¶åçœ‹ç¼“å­˜æƒ…å†µï¼Œä¸€ä¸ªæ˜æ˜¾ä¸ä¸€æ ·çš„ç‰¹å¾æ˜¯ chansend è¦åˆ¤æ–­æ»¡ï¼Œchanrecv è¦åˆ¤æ–­ç©ºã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¸¸è¯´Go è¯­è¨€ä¸­ channel æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä»ä¸Šé¢çš„æµç¨‹å¯ä»¥å‘ç°ï¼šchansendã€chanrecvã€closechan éƒ½æ˜¯è¦åŠ é”çš„ã€‚å³ä¾¿å¦‚æ­¤ï¼Œä»ä»£ç å±‚é¢æˆ‘ä»¬è¿˜æ˜¯çœ‹ä¸åˆ°è¿™äº›é”ï¼Œé‚£æˆ‘ä»¬èƒ½å¦é€šè¿‡ä»£ç æ¥çœ‹ï¼Œâ€œå¹¶å‘å®‰å…¨â€å…·ä½“è€Œè¨€æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä¸‹é¢ç½—åˆ—äº†ä¸‰è€…çš„æºç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// chansend æºç 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;chansend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;hchan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ep&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Pointer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;block&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;callerpc&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uintptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;block&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;gopark&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;waitReasonChanSendNilChan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;traceEvGoStop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;unreachable&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// chanrecv æºç 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;chanrecv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;hchan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ep&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Pointer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;block&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;selected&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;received&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;block&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;gopark&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;waitReasonChanReceiveNilChan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;traceEvGoStop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;unreachable&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// closechan æºç 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;closechan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;hchan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nb&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;plainError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;close of nil channel&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è™½ç„¶æˆ‘ä»¬åœ¨ç”¨æˆ·æ€å®Œå…¨çœ‹ä¸åˆ°ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä»åº•å±‚æºç çœ‹åˆ°è¿™ä¸ªæ˜æ˜¾çš„åŠ é”æ“ä½œï¼Œå¹¶ä¸”è¿™ä¸ªåŠ é”çš„æ“ä½œåŸºæœ¬ä¸Šéƒ½æ˜¯åœ¨å‡½æ•°å¼€å§‹åŠ é”ï¼Œå‡½æ•°ç»“æŸè§£é”ï¼Œé™¤äº† goready() è¦æ”¾åœ¨é”å¤–é¢ï¼Œå…¶ä»–ä¹Ÿæ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„ï¼Œè¿™ä¾¿æ˜¯è¾¾æˆå¹¶å‘å®‰å…¨çš„æ¡ä»¶ä¹‹ä¸€ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”ç¼–è¯‘å™¨åº”ç”¨ï¼ˆ3ï¼‰</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day12-parser_app/day12-parser_app/</link>
      <pubDate>Sat, 28 Aug 2021 15:14:37 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day12-parser_app/day12-parser_app/</guid>
      
      <description>&lt;p&gt;ä¸ŠæœŸè¯´åˆ°ä¸¤ç§å¤æ‚çš„ Parseråœºæ™¯ï¼Œé€šè¿‡å€Ÿé‰´ä¸šç•Œæˆç†Ÿçš„æŠ€æœ¯æ–¹æ¡ˆï¼Œèƒ½å¤Ÿå¤§å¤§èŠ‚çº¦æˆ‘ä»¬è‡ªå·±çš„æ—¶é—´ã€‚ä»Šå¤©å†æ¥è°ˆè°ˆæœ€åä¸€ä¸ª Parser åº”ç”¨åœºæ™¯å’Œ Parser æ€»ç»“ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å®¢æˆ·å®šåˆ¶éœ€æ±‚&#34;&gt;å®¢æˆ·å®šåˆ¶éœ€æ±‚&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;åœºæ™¯8ï¼Œæˆ‘ä»¬å…¬å¸æ˜¯åš ToB çš„æœåŠ¡ï¼Œæˆ‘ä»¬çš„è½¯ä»¶ä¼šå…ˆç¼–è¯‘å®Œå†å–å‡ºå»ï¼Œæ¯”å¦‚æˆ‘ä»¬å…¬å¸æ˜¯ç”¨ Go å¼€å‘çš„ï¼Œå‡å¦‚æˆ‘ä»¬æ˜¯å– gRPC æœåŠ¡çš„ï¼Œè€Œç”¨æˆ·æƒ³è¦åœ¨æ­¤åŸºç¡€ä¸Šåšä¸€äº›å®šåˆ¶ï¼Œä»–ä»¬ä¹Ÿæœ‰è‡ªå·±çš„å¼€å‘äººå‘˜ï¼Œæ¯”å¦‚è¯´å®ç°å†…éƒ¨çš„ RPC åè®®ã€‚ç”¨æˆ·æƒ³å®šåˆ¶ï¼Œè€Œæˆ‘ä»¬æƒ³ä¸ç»™ä»–ä»¬æºä»£ç å¹¶ä¸”èƒ½å¤Ÿæ”¯æŒä»–ä»¬çš„å®šåˆ¶éœ€æ±‚ï¼Œè¿™å°±éœ€è¦äº›æŠ€æœ¯æ‰‹æ®µæ¥è§£å†³ã€‚ï¼ˆç‰¹åˆ«æ˜¯ Go è¯­è¨€çš„ç”Ÿæ€è¿˜ä¸æ˜¯å¾ˆå®Œå–„ï¼Œå¹¶ä¸”æ¯ä¸ªæ–¹æ¡ˆéƒ½æœ‰è‡ªå·±çš„ç¼ºé™·ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ç»™å®¢æˆ·äº¤æ¥ç³»ç»Ÿçš„æ—¶å€™ï¼Œå®¢æˆ·æƒ³è¦è‡ªå·±çš„ RDå»åšäº›å¼€å‘å·¥ä½œï¼ˆä¸€èˆ¬æŒ‡ç ”å‘å·¥ç¨‹å¸ˆï¼‰ã€‚è€Œæˆ‘ä»¬çŸ¥é“ï¼ŒGo ç¨‹åºéœ€è¦ç¼–è¯‘æˆäºŒè¿›åˆ¶æ–‡ä»¶æ‰èƒ½ä½¿ç”¨ï¼Œå› æ­¤è®© Go æ¨¡å—å»åšçƒ­æ›´æ–°æ˜¯éå¸¸éš¾çš„ã€‚ä¸ºäº†æ»¡è¶³è¿™æ ·çš„éœ€æ±‚ï¼Œæˆ‘ä»¬åº”è¯¥æ€æ ·æ¥åšæ‰©å±•å‘¢ï¼Ÿä¸šç•Œç›®å‰æœ‰å››ç§æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;RPC&lt;/li&gt;
&lt;li&gt;go-plugin&lt;/li&gt;
&lt;li&gt;REPLï¼Œç¤¾åŒºçš„è§£é‡Šå™¨æ–¹æ¡ˆ&lt;/li&gt;
&lt;li&gt;WASM&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»¥ä¸Š&lt;strong&gt;å››ç§æ–¹æ¡ˆéƒ½æœ‰ä¸è¶³ï¼Œå…·ä½“è¿˜æ˜¯è¦çœ‹æˆ‘ä»¬åœ¨çœŸå®ä¸šåŠ¡åœºæ™¯ä¸­èƒ½å¤Ÿæ¥å—å“ªç§æŠ˜ä¸­çš„&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;RPC ä¸­ï¼Œåœ¨ä¸¤ä¸ªç³»ç»Ÿä¹‹é—´å®šä¹‰å¥½äº¤äº’çš„ APIï¼Œè¦åšæ‰©å±•é‚£ä¹ˆå°±å°†æ–°ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ‰©å±•åšæˆ APIï¼Œè¦å®ç°è¿™ä¸ªæ‰©å±•ï¼Œå°±åœ¨åŸç³»ç»Ÿä¸­è°ƒç”¨ä¸€ä¸‹å°±å¥½ã€‚ä½† RPC è‡ªèº«ä¹Ÿæœ‰ä¸€å®š&lt;strong&gt;æ€§èƒ½é—®é¢˜&lt;/strong&gt;ï¼Œå¦‚åšäº›ç½‘å…³ä¹‹ç±»çš„æ‰©å±•å°±ä¸é€‚åˆã€‚&lt;/p&gt;
&lt;p&gt;go-plugin åœ¨Go 1.8ç‰ˆæœ¬å°±æœ‰ï¼Œä½†ä¹Ÿæ˜¯æœ‰ç¼ºé™·çš„ï¼šä¸åŒç‰ˆæœ¬ç¼–è¯‘ä¸å…¼å®¹ã€‚ç”¨æˆ·ç¼–è¯‘å‡ºçš„ plugin å’Œæˆ‘ä»¬çš„åŸå§‹äºŒè¿›åˆ¶æ–‡ä»¶å¿…é¡»è¦ç”¨ç›¸åŒçš„ç‰ˆæœ¬å»ç¼–è¯‘æ‰èƒ½é€šè¿‡ã€‚&lt;/p&gt;
&lt;p&gt;REPLï¼Œç¤¾åŒºçš„è§£é‡Šå™¨æ–¹æ¡ˆä¾‹å¦‚ gopherjsã€gopherluaï¼Œè¿™äº›éƒ½æ˜¯ä¸é”™çš„é¡¹ç›®ï¼Œåœ¨å¯ä»¥åœ¨çº¿ä¸Šå»ç”¨è¿™äº›ä¸œè¥¿ï¼Œå¹¶ç»™ç”¨æˆ·æä¾›å±€éƒ¨çƒ­æ›´æ–°çš„åŠŸèƒ½ã€‚ä½†é—®é¢˜å°±åœ¨äºï¼Œæœ‰äº›ä¸šåŠ¡éœ€æ±‚ä¸ä¸€å®šç¤¾åŒºæœ‰ã€‚&lt;/p&gt;
&lt;p&gt;WASMï¼ˆwebAssembleï¼‰æ˜¯ä¸€ç§ä¸é’ˆå¯¹ç‰¹å®šå¹³å°çš„äºŒè¿›åˆ¶æ ¼å¼æ–‡ä»¶ï¼Œä¹Ÿæ˜¯ç›®å‰æ¯”è¾ƒæ–°çš„æ–¹æ¡ˆã€‚ç†è®ºä¸Šåœ¨æ¯ä¸ªè¯­è¨€ç›´æ¥äº’ç›¸è°ƒç”¨æ²¡æœ‰æ€§èƒ½æŸå¤±çš„ï¼Œä½† Go è¯­è¨€ç‰ˆæœ¬ä¸æ˜¯å¾ˆå®Œå–„ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆä¹Ÿæ˜¯åœ¨è°ƒç ”é˜¶æ®µã€‚æœ‰äº›å…¬å¸åªæ˜¯åœ¨åšäº›å®£ä¼ ã€&lt;/p&gt;
&lt;h1 id=&#34;parser-æ€»ç»“&#34;&gt;Parser æ€»ç»“&lt;/h1&gt;
&lt;p&gt;OKï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬äº†è§£äº†ç¼–è¯‘å’Œåç¼–è¯‘å·¥å…·å»æ‰¾ Go ç¨‹åºçš„è¯­æ³•å…·ä½“å®ç°ï¼Œä»¥åŠç”¨åˆ° Parser çŸ¥è¯†å¯ä»¥åœ¨å®é™…å…¬å¸çš„ä¸šåŠ¡é‡Œé¢å»åšäº›æ¢ç´¢ã€‚ä½†è¯´åˆ°åº•ï¼Œå¦‚æœæˆ‘ä»¬æŒæ¡äº†ç¼–è¯‘åŸç†çš„çŸ¥è¯†å°±èƒ½å¤Ÿåœ¨å¾ˆå¤šåœºæ™¯ä¸‹æ‰¾åˆ°æ¯”è¾ƒçµæ´»çš„æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºåƒç¬”è€…ä¸€æ ·å¤§å­¦æ¯•ä¸šå·¥ä½œä¸ä¹…ï¼Œå› å·¥ä½œéœ€è¦è½¬åˆ°ç”¨ Go è¯­è¨€ï¼Œè€Œ Go è¯­è¨€å…¥é—¨åˆæ²¡å¤šä¹…çš„åŒå­¦æ¥è¯´ã€‚å¤§å­¦æœŸé—´æˆ‘ä»¬å­¦ä¹ ç¼–è¯‘åŸç†æ„Ÿåˆ° æ¯ç‡¥ã€å›°éš¾ï¼Œç•¥æœ‰äº›è„±ç¦»å®è·µï¼Œå› æ­¤å­¦ä¹ å¾—ä¸æ‰å®ï¼Œå‹‰å¼ºé€šè¿‡ã€‚è€Œå·¥ä½œæœŸé—´åˆç¡®ç¡®å®å®éœ€è¦è¿™æ–¹é¢å®æ‰“å®çš„çŸ¥è¯†ï¼Œæ€ä¹ˆåŠï¼Ÿè¾¹åšè¾¹çœ‹ã€‚æ—¢ç„¶å¤§å­¦çš„æ—¶å…‰å·²ç»è¿‡å»ï¼Œä¸€å»ä¸å¤è¿”ï¼Œé‚£ä¹ˆèƒ½æŠ“ä½çš„å°±æ˜¯ç°åœ¨ã€‚ä¸šåŠ¡ä¸Šéœ€è¦ä»€ä¹ˆæˆ‘ä»¬å»çœ‹ä»€ä¹ˆï¼ŒåŒæ—¶å¤šå»é€›é€›æŠ€æœ¯ç¤¾åŒºå’Œè®ºå›ï¼Œæ¯”å¦‚æ±‡æ€»æ•´ç†äº†å‡ ä¸ªæœ‰æ„æ€ Parser é¡¹ç›®çš„é¡¹ç›®ï¼šhttps://github.com/cch123/parser_exampleï¼Œå°†è‡ªå·±çš„æŠ€æœ¯é¢æ‹“å®½ï¼Œå°½å¯èƒ½åœ°è¾¹å®è·µï¼Œè¾¹å›é¡¾ç†è®ºã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹å‰æ€»ç»“äº† 8 ä¸ª Parser åœºæ™¯ï¼Œå…¶å®æˆ‘ä¹Ÿåªç»å†äº†ä¸¤ä¸ªçš„æ ·å­ã€‚ç»éªŒéå¸¸å—åˆ°å±€é™ï¼Œä½†æ˜¯æˆ‘ä»¬é€šè¿‡å­¦ä¹ ï¼Œé€šè¿‡å­¦ä¹ æŠ€æœ¯å‰è¾ˆæ›¹å¤§æ‰€ç»å†çš„ã€æ‰€è§è¯†çš„ï¼Œå°±èƒ½è®©æˆ‘ä»¬ä¹Ÿåä¸Šé€šå¾€æŠ€æœ¯å‰æ–¹çš„é«˜é“ã€‚ä¸çŸ¥é“ï¼Œä¸æ“…é•¿æ²¡å…³ç³»ï¼›å…ˆäº†è§£ï¼Œå¤šäº†è§£ï¼Œä»¥åæ€»è¿˜æœ‰å¯èƒ½é‡åˆ°ã€‚åˆ°æ—¶æˆ‘ä»¬å°±ä¸å†æ˜¯æ„æ€è‹¦æƒ³ï¼Œè€Œæ˜¯èƒ¸æœ‰æˆç«¹äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‚è€ƒèµ„æ–™&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;[1] Goè¿›è¡Œwasmç¼–ç¨‹, åšå®¢å›­&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.cnblogs.com/codingnote/p/12453872.html&#34;&gt;https://www.cnblogs.com/codingnote/p/12453872.html&lt;/a&gt;&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”è§£é‡Šå™¨</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day10-parser/day10-parser/</link>
      <pubDate>Sun, 22 Aug 2021 22:51:00 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day10-parser/day10-parser/</guid>
      
      <description>&lt;p&gt;ä¸ŠæœŸæ–‡ç« é—ç•™äº†ä¸€ä¸ªé—®é¢˜â€œä¸‰ä¸ª panic åœ¨ runtime ä»£ç çš„å…·ä½“å“ªä¸ªä½ç½®è¾“å‡ºâ€ï¼Œå¦‚æœé€šè¿‡æ±‡ç¼–è°ƒè¯•å·¥å…·æ‰¾å‡ºæ¥ã€‚ä»Šå¤©æ¥åŠ¨æ‰‹å®è·µï¼Œå¹¶ä¸”å°è¯•è§£å†³å¦ä¸€ä¸ªä¸šåŠ¡é—®é¢˜ã€‚&lt;/p&gt;
&lt;h1 id=&#34;é—®é¢˜å›é¡¾&#34;&gt;é—®é¢˜å›é¡¾&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;åˆ†åˆ«æœ‰ä¸‰ç§æƒ…å†µçš„ panicï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¾€å·²ç»å…³é—­çš„ channelä¸­å†™å…¥æ•°æ®&lt;/li&gt;
&lt;li&gt;å…³é—­ä¸€ä¸ªæ˜¯ nil å€¼çš„ channel&lt;/li&gt;
&lt;li&gt;å…³é—­ä¸€ä¸ªå·²ç»æ˜¯å…³é—­çŠ¶æ€çš„ channel&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¦æ‰¾å‡ºå®ƒä»¬åœ¨ runtime ä»£ç ä¸­å…·ä½“ä½ç½®ï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆå†™å‡ ä¸ªå°å‹ä»£ç ï¼Œæ¥å®Œå…¨æ¨¡æ‹Ÿè¿™å‡ ç§æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;æƒ…å†µ1ï¼šå¾€å·²ç»å…³é—­çš„ channelä¸­å†™å…¥æ•°æ®ï¼Œæ–‡ä»¶å  send_to_close.go&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;go tool compile -S send_to_close.go &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep &lt;span class=&#34;s2&#34;&gt;&amp;#34;send_to_close.go:6&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img alt=&#34;image-20210823233649497&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202108240001413.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡åæ±‡ç¼–å’Œæ–‡æœ¬æœç´¢ï¼Œæ‰¾åˆ°äº†å…³é”®ä¿¡æ¯ &lt;strong&gt;runtime.chansend1(SB)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æƒ…å†µ2ï¼šå…³é—­ä¸€ä¸ªæ˜¯ nil å€¼çš„ channelï¼Œæ–‡ä»¶å  close_nil.go&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;go tool compile -S close_nil.go &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep &lt;span class=&#34;s2&#34;&gt;&amp;#34;close_nil.go:6&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img alt=&#34;image-20210823234414243&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202108240001274.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;æƒ…å†µ3ï¼šå…³é—­ä¸€ä¸ªå·²ç»æ˜¯å…³é—­çŠ¶æ€çš„ channelï¼Œæ–‡ä»¶å  close_closed.go&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;go tool compile -S close_closed.go &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep &lt;span class=&#34;s2&#34;&gt;&amp;#34;close_closed.go:6&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img alt=&#34;image-20210823233943750&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202108240000241.png&#34;&gt;&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”è¯­æ³•åˆ†æå®ç°</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day9-parsing_implementation/day9-parsing_implementation/</link>
      <pubDate>Sun, 22 Aug 2021 08:34:33 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day9-parsing_implementation/day9-parsing_implementation/</guid>
      
      <description>&lt;p&gt;ä¹‹å‰çš„æ–‡ç« æåˆ°ï¼šGo ç¨‹åºç¼–è¯‘å’Œé“¾æ¥æ¶‰åŠåˆ°å·¥å…· go tool compile ã€go tool objdump å’Œ SSA func  build å°†æºä»£ç è½¬åŒ–æˆé™æ€å•èµ‹å€¼å½¢å¼çš„ä¸­é—´ä»£ç ã€‚è¿™äº›å·¥å…·éƒ½å¯ä»¥ç›´æ¥ä¸Šæ‰‹ç©ä¸€ç©ï¼Œå³ä¾¿å¯¹ç¼–è¯‘åŸç†çš„ç†è®ºä¸ç†Ÿæ‚‰ï¼Œåœ¨å®è·µåè¿˜æ˜¯ä¼šé€æ­¥æ˜ç™½çš„ï¼ŒGo çš„å·¥ç¨‹åŒ–åœ¨è¿™æ–¹é¢åšå¾—æŒºä¸é”™ã€‚ä»Šå¤©æ¥è®²ä¸€è®²â€œGO è¯­è¨€è¯­æ³•åˆ†æçš„å…·ä½“å®ç°â€&lt;/p&gt;
&lt;h1 id=&#34;è°ƒè¯•å·¥å…·å›é¡¾&#34;&gt;è°ƒè¯•å·¥å…·å›é¡¾&lt;/h1&gt;
&lt;p&gt;é€šè¿‡å‘½ä»¤ readelf  -h å¯ä»¥æŸ¥çœ‹ ELF å¯æ‰§è¡Œæ–‡ä»¶çš„å¤´ä¿¡æ¯ï¼Œå‘ç°è°ƒè¯•å…¥å£çš„åå…­è¿›åˆ¶åœ°å€ç ï¼Œç„¶åç”¨ dlv æ¥è°ƒè¯• Go ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ dlv ä¸­ï¼Œæ‰“æ–­ç‚¹æœ‰ä¸‰ç§å¸¸ç”¨æ–¹å¼ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;b * åœ°å€&lt;/li&gt;
&lt;li&gt;b å‡½æ•°å&lt;/li&gt;
&lt;li&gt;b æ–‡ä»¶å:è¡Œæ•°&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æŒ‡ä»¤ c æ˜¯ä»ä¸€ä¸ªæ–­ç‚¹è·³åˆ°å¦ä¸€ä¸ªæ–­ç‚¹ã€‚å¦‚æœæ‰“å¤šä¸ªæ–­ç‚¹ï¼Œé‚£ä¹ˆå¯ä»¥åšè¿ç»­ä»£ç çš„è·³è½¬ã€‚&lt;/p&gt;
&lt;p&gt;æŒ‡ä»¤ si æ˜¯å•æ­¥è°ƒè¯•ï¼Œè°ƒè¯•æ±‡ç¼–æ—¶å¸¸ç”¨äºä½¿ç”¨ si åˆ° jmp ç›®æ ‡ä½ç½®ï¼Œå³ä¸€æ­¥æ­¥è·³è½¬ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç”¨å·¥å…· go tool objdump æ¥åšåæ±‡ç¼–ï¼Œè€Œå®ƒè¾“å‡ºçš„æ˜¯ plan9 å½¢å¼çš„æ±‡ç¼–ã€‚å…¶å®åœ¨ dlv ä¸­å†…ç½®äº†åæ±‡ç¼–å·¥å…·ï¼Œdisassï¼Œä¸è¿‡å®ƒè¾“å‡ºçš„æ˜¯å¦ä¸€ç§å½¢å¼çš„æ±‡ç¼–ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥æŒæ¡å¤šç§è°ƒè¯•å·¥å…·ï¼Œå¹³æ—¶å°±ç”¨è‡ªå·±æ“…é•¿ç‚¹çš„ï¼Œè€Œé‡åˆ°äº†æ²¡å¼„æ˜ç™½çš„ï¼Œä¹Ÿè®¸å¦ä¸€ä¸ªå·¥å…·æ¢æ¥ä½¿ç”¨æœ‰ä¸ä¸€æ ·çš„æ•ˆæœã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹å‰æˆ‘ä»¬éƒ½æ˜¯é‡åˆ°é—®é¢˜æœèµ„æ–™ï¼Œæˆ‘æƒ³ç³»ç»Ÿå­¦ä¹  dlv æ€ä¹ˆåŠå‘¢ï¼Ÿå°±åƒä¸ŠæœŸæ–‡ç« è®²åˆ°çš„ï¼Œè¿˜æ˜¯å»çœ‹å®˜æ–¹æ–‡æ¡£ï¼šhttps://github.com/go-delve/delve/tree/master/Documentation/cli&lt;/p&gt;
&lt;p&gt;ç®€å•æµè§ˆä¸€ä¸‹å®˜æ–¹æ–‡æ¡£å¯ä»¥å‘ç°ï¼Œå®˜æ–¹ä¹Ÿåœ¨é€æ­¥æ·»åŠ æ–°çš„åŠŸèƒ½ã€‚æ¯”å¦‚è¯´ï¼Œç°åœ¨æœ‰ä¸€ä¸ªåœ°å€ï¼Œæˆ‘å¯ä»¥ç›´æ¥ç”¨ dlv ä¸­çš„ x æŒ‡ä»¤æŸ¥çœ‹ä¸€æ®µè¿ç»­å†…å­˜é‡Œå­˜å‚¨çš„å€¼ï¼Œè¿™ä¸ªæœ‰ç‚¹åƒ gdb ä¸­çš„ xï¼ˆå¦ä¸€ä¸ªè°ƒè¯•å·¥å…·ï¼Œç”¨äºæŸ¥çœ‹å†…å­˜åœ°å€çš„å€¼ï¼‰ã€‚è¿™ä¸ªæŒ‡ä»¤åœ¨ runtime ä¸­æœ‰äº›å¼€å¤´æ˜¯ lenï¼Œç„¶åè·Ÿç€ unsafe pointer ä¹‹ç±»çš„ï¼Œæˆ‘èƒ½çœ‹åˆ° unsafe pointer ï¼Œä½†å®ƒåé¢çš„ç»“æ„ç›´æ¥è°ƒè¯•å¯èƒ½çœ‹ä¸åˆ°ï¼Œè¿™æ—¶å€™ç”¨åˆ° x æŒ‡ä»¤å°±å¯ä»¥çœ‹åˆ°å®ƒåé¢å†…å­˜é‡Œå­˜å‚¨çš„æ˜¯ä»€ä¹ˆå€¼äº†ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”åç¼–è¯‘</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day8-disassembly/day8-disassembly/</link>
      <pubDate>Sat, 21 Aug 2021 15:25:05 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day8-disassembly/day8-disassembly/</guid>
      
      <description>&lt;p&gt;Go è¯­è¨€å¸¸ç”¨çš„ä¸¤ä¸ªæŸ¥çœ‹æ±‡ç¼–ä»£ç çš„å·¥å…·æ˜¯ &lt;strong&gt;go tool compile å’Œ go tool objdump&lt;/strong&gt;ã€‚ä¸ŠæœŸæ–‡ç« è¯´åˆ°é€šè¿‡ go tool compile -S å¯ä»¥æŸ¥çœ‹å®ç°ç›¸åŒåŠŸèƒ½ï¼Œä¸¤ä¸ªä¸åŒçš„ä»£ç åœ¨æ€§èƒ½ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå¯ä»åç¼–è¯‘å‡ºçš„æ±‡ç¼–ä»£ç çœ‹å‡ºï¼ŒäºŒè€…çš„æ€§èƒ½ä¸€æ ·ã€‚ä»Šå¤©å†æ¥èŠä¸€èŠå¦å¤–ä¸€ä¸ªå·¥å…·çš„ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœºæ™¯3ï¼Œæ€ä¹ˆæ‰¾åˆ° make å’Œ new è¿™ç§ Go è¯­è¨€è‡ªå¸¦æ•°æ®ç»“æ„çš„å…·ä½“å®ç°ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨è§£å†³è¿™ç§ç±»ä¼¼é—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥&lt;strong&gt;æŸ¥é˜…å®˜æ–¹çš„èµ„æ–™ spec&lt;/strong&gt;ï¼Œå›½å¤–æºåœ°å€ï¼šhttps://golang.org/ref/spec ï¼Œå›½å†…çœ‹è¿™ä¸ªï¼šhttps://golang.google.cn/ref/spec&lt;/p&gt;
&lt;p&gt;è¿™ä¸ª spec è®²è¿°äº† Go è¯­è¨€å†…éƒ¨çš„è¯­æ³•å¯ä»¥æ€ä¹ˆç”¨ã€‚åœ¨ spec ä¸­å‡ºç°çš„ä¸œè¥¿ï¼Œä¹Ÿå°±æ˜¯å®˜æ–¹è®¤ä¸ºæ˜¯æ­£ç¡®çš„ä¸œè¥¿ã€‚è€Œå¦‚æœä¸€ä¸ªç”¨æ³•æ²¡æœ‰åœ¨ spec ä¸­æåˆ°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ²¡æœ‰åŠæ³•å»ä¾èµ–è¾“å‡ºç»“è®ºã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ç”¨åˆ°ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ç”¨åˆ°äº†æŒ‡é’ˆå’Œ Errorï¼Œå¦‚æœè¿™ä¸ªè¿”å›çš„ Error æ˜¯éç©ºçš„æ—¶å€™ï¼Œæˆ‘å°±ä¸èƒ½ä¾èµ–å®ƒçš„æŒ‡é’ˆè¿”å›å€¼ã€‚æˆ‘ä»¬è¦ä¾èµ–è¿™ä¸ªå€¼ï¼Œå°±éœ€è¦ Error æ˜¯ç©ºã€‚è¿™ç§æƒ…å†µå°±æ˜¯&lt;strong&gt;è¯­è¨€çš„ç¡®å®šæ€§&lt;/strong&gt;ï¼Œå¦‚æœæˆ‘ä»¬ä¾èµ–äº†æœ‰ Error çš„ç»“æœï¼Œé‚£ä¹ˆå°±æ˜¯éç¡®å®šæ€§çš„ã€‚è¿™ä¸ªéç¡®å®šæ€§ï¼Œæˆ‘ä»¬ä¼šç»å¸¸çœ‹åˆ°ä¸€ä¸ªåè¯å«åš &lt;strong&gt;Undefined Behavior&lt;/strong&gt;ã€‚æˆ‘ä»¬åˆå­¦ Go è¯­è¨€ï¼Œæˆ–è€…ä¹ æƒ¯äºå†™åŠ¨æ€è¯­è¨€ï¼Œå¦‚ Python çš„åŒå­¦ï¼Œä¼šéå¸¸ä¾èµ–è¿™ç§å†™ä»£ç ä¹ æƒ¯ï¼Œè¿™å…¶å®æ˜¯éå¸¸å±é™©çš„ã€‚å®ƒå¯èƒ½ä¼šç»™æˆ‘ä»¬å¸¦æ¥éšè—çš„çº¿ä¸Š Bugï¼Œå¾ˆå¤šæ—¶å€™éƒ½æ˜¯éš¾å‘ç°çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨åšè¯­è¨€ SDK å‡çº§çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ¯”è¾ƒä¸¥é‡çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬è¦å»æŸ¥è¯¢ Go è¯­è¨€å†…éƒ¨çš„å‡½æ•°æˆ–è€…ç»“æ„çš„ç”¨æ³•çš„è¯ï¼Œä¸€å®šè¦å»çœ‹å®˜æ–¹çš„èµ„æ–™ã€‚ä¸è¦å»çœ‹ç½‘ä¸Šçš„åšå®¢æ¥ä½œä¸ºè‡ªå·±çš„ç»“è®ºï¼Œå› ä¸ºåˆ«äººå†™çš„ä¸ä¸€å®šå¯¹ï¼Œå°¤å…¶æ˜¯å½“æˆ‘ä»¬ä½¿ç”¨äº†é”™è¯¯çš„åšå®¢å†…å®¹æ¥æ“ä½œï¼Œä¼šç»™ä¸šåŠ¡å¸¦æ¥æ›´å¤šéº»çƒ¦ã€‚&lt;/p&gt;
&lt;p&gt;OKï¼Œæ‰“å¼€ spec ç½‘å€ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå“¥ä»¬ï¼Œä½ è¿™ç“œå¤šå°‘é’±ä¸€æ–¤ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20210821223659673&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202108212337904.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;spec å‘Šè¯‰æˆ‘ä»¬ï¼Œmake å¯ä»¥ç”¨åœ¨ä¸‰ç§ç»“æ„ä¸Šçš„ï¼šsliceï¼Œmapï¼Œchannelã€‚ä¹Ÿå°±è¯´æ˜ï¼Œæˆ‘ä»¬è¦ç ”ç©¶ make çš„å®ç°ï¼Œå°±å»çœ‹è¿™ä¸‰ç§ç»“æ„ä¸Šæ‰§è¡Œ make å…·ä½“ä¼šæ‰§è¡Œå“ªä¸ªå‡½æ•°å°±å¥½ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ¥å®ç°è¿™æ®µä»£ç ï¼Œæ–‡ä»¶åä¸º make.go&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// make slice
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// ç©ºé—´å¼€çš„æ¯”è¾ƒå¤§ï¼Œæ˜¯ä¸ºäº†è®©è¿™ä¸ª slice åˆ†é…åˆ°å †ä¸Šã€‚ç©ºé—´å°çš„è¯ä¼šé»˜è®¤åˆ†é…åˆ°æ ˆä¸Šï¼Œè€Œæ ˆä¸Šçš„ slice å’Œå †ä¸Šçš„ slice åº•å±‚å®ç°ä¼šä¸ä¸€æ ·ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sl&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// make channel
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// make map
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;22&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;gt;&amp;gt;&amp;gt; go build make.go &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; go tool objdump ./make &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep -E &lt;span class=&#34;s2&#34;&gt;&amp;#34;make.go:6|make.go:10|make.go:14&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‘½ä»¤è¯´æ˜ï¼Œè¿™é‡Œ go build make.go æ˜¯ç¼–è¯‘æˆ‘ä»¬çš„ Go ç¨‹åºä»£ç ï¼Œç”Ÿæˆ ELF å¯æ‰§è¡Œæ–‡ä»¶ makeã€‚ç„¶åç”¨ç®¡é“ç¬¦ | æ¥ä½è¿™ä¸ª ELF æ–‡ä»¶ï¼Œå¹¶ç”¨åˆ°åç¼–è¯‘å·¥å…· go tool objdump æ¥åç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶ makeã€‚ç„¶åç”¨ç®¡é“ç¬¦ | æ¥ä½ç»“æœï¼Œå¹¶ç”¨æ–‡æœ¬æœç´¢å·¥å…· grep -E æŒ‡ä»¤æ¥åˆ†å‰²å¤šä¸ª patternï¼Œä»¥å®ç° OR æ“ä½œã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”ç¼–è¯‘ä¸åç¼–è¯‘</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day7-assembly/day7-assembly/</link>
      <pubDate>Thu, 19 Aug 2021 23:02:38 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day7-assembly/day7-assembly/</guid>
      
      <description>&lt;p&gt;Go ç¨‹åºï¼Œä»æºä»£ç åˆ°å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé€šå¸¸è¦ç»è¿‡ä¸¤ä¸ªæ­¥éª¤ï¼šç¼–è¯‘ â†’ é“¾æ¥ï¼Œè€Œ&lt;strong&gt;æœ€é‡è¦çš„å°±æ˜¯è¿›è¡Œè™šæ‹Ÿåœ°å€é‡å®šä½ï¼ˆRelocationï¼‰&lt;/strong&gt;ã€‚ä¸ŠæœŸæˆ‘ä»¬äº†è§£äº†GOè¯­è¨€ç¼–è¯‘è¿‡ç¨‹åŒ…æ‹¬å…­ä¸ªç»†è‡´çš„ç¼–è¯‘æ­¥éª¤ï¼Œè€Œé“¾æ¥æ˜¯æœ€åçš„ç¼–è¯‘è¿‡ç¨‹ã€‚çŸ¥é“äº†æ•´ä¸ªæµç¨‹åï¼Œä»Šå¤©å†æ¥èŠä¸€èŠ Go ç¨‹åºåœ¨å®Œæˆç¼–è¯‘åï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å“ªäº›å·¥å…·çŸ¥é“ä¸€äº›ä¿¡æ¯â€”â€”ç¼–è¯‘ä¸åç¼–è¯‘ã€‚&lt;/p&gt;
&lt;p&gt;é‡å®šä½(relocation)æ˜¯æŒ‡æŠŠç¬¦å·å¼•ç”¨ä¸ç¬¦å·å®šä¹‰é“¾æ¥åˆ°ä¸€èµ·çš„è¿‡ç¨‹ã€‚å½“ç¨‹åºè°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå°†ä»å½“å‰è¿è¡Œçš„æŒ‡ä»¤åœ°å€å¤„è·³è½¬åˆ°ä¸€ä¸ªæ–°çš„æŒ‡ä»¤åœ°å€å¤„å»æ‰§è¡Œã€‚æˆ‘ä»¬å¹³æ—¶åœ¨ç¼–å†™ç¨‹åºæ—¶ï¼Œåªéœ€æŒ‡æ˜æ‰€è¦è°ƒç”¨çš„å‡½æ•°åå³å¯ï¼Œå¯¹ç¼–è¯‘å™¨æ¥è¯´å°±æ˜¯æŒ‡æ˜äº†ç¬¦å·å¼•ç”¨ã€‚ç„¶ååœ¨é‡å®šä½è¿‡ç¨‹ä¸­ï¼ŒåŠ¨æ€é“¾æ¥å™¨ä¼šæŠŠå‡½æ•°åä¸å‡½æ•°å®é™…æ‰€åœ¨çš„åœ°å€ï¼ˆç¬¦å·å®šä¹‰ï¼‰è”ç³»åˆ°ä¸€èµ·ï¼Œè¿›è€Œä½¿å¾—ç¨‹åºèƒ½å¤ŸçŸ¥é“åº”è¯¥è·³è½¬åˆ°å“ªé‡Œå»ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Quote&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…·ä½“è€Œè¨€ï¼ŒGO ç¨‹åºåœ¨ç¼–è¯‘åï¼Œæ‰€æœ‰å‡½æ•°åœ°å€éƒ½æ˜¯ä» 0 å¼€å§‹ï¼Œæ¯å¤©æŒ‡ä»¤æ˜¯ç›¸å¯¹å‡½æ•°ç¬¬ä¸€æ¡æŒ‡ä»¤çš„åç§»ï¼Œå¹¶åœ¨è¿›è¡Œé“¾æ¥åï¼Œæ‰€æœ‰æŒ‡ä»¤éƒ½æœ‰äº†å…¨å±€å”¯ä¸€çš„è™šæ‹Ÿåœ°å€ã€‚ï¼ˆæ³¨æ„ï¼šä¸æ˜¯ä¸Šæ–¹æ¡†é€‰åœ°å€ï¼Œè¿™é‡Œæ˜¯æŒ‡æŸä¸ªå‡½æ•°çš„åç§»é‡ï¼Œè€Œæ˜¯ç®­å¤´ä¸‹æ–¹çš„åœ°å€ï¼Œè™šæ‹Ÿåœ°å€ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20210819234132142&#34; src=&#34;c:\\Users\\Xfavor\\AppData\\Roaming\\Typora\\typora-user-images\\image-20210819234132142.png&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;ç¼–è¯‘ä¸åç¼–è¯‘å·¥å…·&#34;&gt;ç¼–è¯‘ä¸åç¼–è¯‘å·¥å…·&lt;/h1&gt;
&lt;p&gt;æˆ‘ä»¬å­¦ä¹ æŒæ¡ Go è¯­è¨€ç¼–è¯‘åŸç†ç†è®ºçš„è¿‡ç¨‹ï¼Œä¼šç›¸å¯¹æœ‰äº›æ¯ç‡¥ã€‚ä¸è¿‡é€šè¿‡å®è·µï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¾ˆå¥½åœ°å°†æ‰€å­¦åˆ°çš„ç†è®ºèæ±‡è´¯é€šï¼Œå¹¶ä¸”å³ä¾¿ä½ å¯¹ç†è®ºä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œä¹Ÿèƒ½å¤Ÿç©è½¬è¿™äº›å·¥å…·ã€‚æˆ‘ä¼šæåˆ°å¹³æ—¶æˆ‘ä»¬åœ¨ç ”ç©¶ GO æ±‡ç¼–åº•å±‚ç»å¸¸ç”¨åˆ°çš„å·¥å…·ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒæ˜¯ä»€ä¹ˆï¼Œè·Ÿç€æˆ‘ä¸€èµ·åŠ¨åŠ¨æ‰‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;go tool
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img alt=&#34;img&#34; src=&#34;c:\\Users\\Xfavor\\AppData\\Local\\YNote\\data\\weixinobU7VjplR8GhsqZn6qPSNHGlLvOg\\bf1978b1b2864b888597f55ca77551b3\\clipboard.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæˆ‘æ ‡æ³¨å‡ºäº†ä¸¤ä¸ªæœ€å¸¸ç”¨çš„å·¥å…· go tool compile å’Œ go tool objdumpã€‚åœ¨æˆ‘ä»¬å· Go æ±‡ç¼–åº•å±‚çš„æ—¶å€™ï¼Œä¸šå†…è¿˜æœ‰è¿™ä¹ˆä¸€å¥é»‘è¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å‡ ä¹æ²¡æœ‰ä»»ä½•ä¸€ä¸ª Go æ±‡ç¼–åº•å±‚é—®é¢˜ä¸æ˜¯ç”¨ä¸€æ¡ go tool compile ä¸èƒ½è§£å†³çš„ï¼Œå¦‚æœä¸è¡Œçš„è¯ï¼Œå°±ç”¨ go tool objdumpï¼Œæ€»èƒ½çŸ¥é“æ˜¯æ€ä¹ˆå›äº‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å†è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸¤å¥æŒ‡ä»¤åœ¨å…·ä½“åœºåˆä¸‹éƒ½æ˜¯ä»€ä¹ˆæ„æ€ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;go tool compile -S main.go  # åç¼–è¯‘ä»£ç ä¸ºæ±‡ç¼–ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;go tool objdump # å¯ç”¨äºæŸ¥çœ‹ä»»æ„å‡½æ•°çš„æœºå™¨ç ã€æ±‡ç¼–æŒ‡ä»¤ã€åç§»ã€‚ï¼ˆgo æºç ä¸‹é¢æœ‰ä¸ª cmd/internal/goobjåŒ…ï¼Œå¯ä»¥è¯»åˆ°.oæ–‡ä»¶çš„é‡å®šå‘ä¿¡æ¯ï¼Œæ›´å¥½ï¼‰&lt;/p&gt;
&lt;p&gt;go tool objdump [-s symregexp] äºŒè¿›åˆ¶ # Objdump æ‰“å°äºŒè¿›åˆ¶æ–‡ä»¶ä¸­æ‰€æœ‰æ–‡æœ¬ç¬¦å·ï¼ˆä»£ç ï¼‰çš„åæ±‡ç¼–ã€‚å¦‚æœå­˜åœ¨ -s é€‰é¡¹ï¼Œobjdump åªä¼šåæ±‡ç¼–åç§°ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„ç¬¦å·ã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”ç¼–è¯‘åŸç†åŸºç¡€</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day6-parse/day6-parse/</link>
      <pubDate>Sun, 15 Aug 2021 09:38:51 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day6-parse/day6-parse/</guid>
      
      <description>&lt;p&gt;ä¸Šå›æˆ‘ä»¬è¯´åˆ° &lt;strong&gt;8 ä¸ªå¸¸è§ Go ä¸šåŠ¡åœºæ™¯&lt;/strong&gt;ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡æ¢ç©¶ Go è¯­æ³•èƒŒåçš„ç§˜å¯†å°±èƒ½å»è§£å†³çš„é—®é¢˜ï¼Œåœ¨æˆ‘ä»¬å¼€å§‹åŠ¨æ‰‹ä¹‹å‰ï¼Œå…ˆæ‰“å¥½â€œGo è¯­è¨€ä¸­ç¼–è¯‘åŸç†çš„åŸºç¡€â€&lt;/p&gt;
&lt;h1 id=&#34;å›é¡¾&#34;&gt;å›é¡¾&lt;/h1&gt;
&lt;p&gt;Go ç¨‹åºï¼Œä»æºä»£ç åˆ°å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé€šå¸¸è¦ç»è¿‡ä¸¤ä¸ªæ­¥éª¤ï¼šç¼–è¯‘ â†’ é“¾æ¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™å¥ä»£ç ï¼Œç¼–è¯‘ä¸€æ®µç®€å•çš„ â€œHello Worldï¼â€ ç¨‹åºçœ‹åˆ°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;go build -x hello.go
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;ç¼–è¯‘åŸç†åŸºç¡€&#34;&gt;ç¼–è¯‘åŸç†åŸºç¡€&lt;/h1&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥æŠŠç¼–è¯‘åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šç¼–è¯‘å™¨å‰ç«¯å’Œç¼–è¯‘å™¨åç«¯ï¼Œå¦‚å›¾æ‰€ç¤ºï¼šï¼ˆè¿™äº›éƒ½æ˜¯æˆ‘ä»¬è½¯ä»¶å·¥ç¨‹ä¸“ä¸šè¯¾ä¸Šçš„åŸºç¡€çŸ¥è¯†ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;æœªå‘½åæ–‡ä»¶&#34; src=&#34;https://cdn.jsdelivr.net/gh/JupiterXue/PictureBed/BlogImg/202108222319385.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;**è¯æ³•åˆ†æï¼ˆLexical Analysisï¼‰**æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­å°†å­—ç¬¦åºåˆ—è½¬æ¢ä¸ºæ ‡è®°ï¼ˆtokenï¼‰åºåˆ—çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬è¿™é‡Œæœ‰ä¸€æ®µç®€å•ä»£ç ï¼Œé€šè¿‡è¯æ³•åˆ†æçš„æ–¹æ³•ï¼Œè½¬åŒ–ä¸º token å°±æ˜¯å¦‚ä¸‹ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20210815232014055&#34; src=&#34;c:\\Users\\Xfavor\\AppData\\Roaming\\Typora\\typora-user-images\\image-20210815232014055.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ Go è¯­è¨€ä¸­æ²¡æœ‰åˆ†å·ï¼Œä½†å…¶å®åƒå¾ˆå¤šå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œæ˜¯éœ€è¦çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯­æ³•åˆ†æ&lt;/strong&gt;ï¼ˆsyntactic analysisï¼Œåˆç§° parsingï¼‰æ˜¯æ ¹æ®æŸç§ç»™å®šçš„å½¢å¼æ–‡æ³•å¯¹ç”±å•è¯åºåˆ—ï¼ˆå¦‚è‹±è¯­å•è¯åºåˆ—ï¼‰æ„æˆçš„è¾“å…¥æ–‡æœ¬è¿›è¡Œåˆ†æå¹¶ç¡®å®šå…¶è¯­æ³•ç»“æ„çš„ä¸€ç§è¿‡ç¨‹ã€‚å½“æˆ‘ä»¬å¯¹ Go æºä»£ç è¿›è¡Œè¯æ³•åˆ†æåï¼Œä¼šå½¢æˆä¸Šå›¾çš„ token æµï¼Œæˆ‘ä»¬æƒ³è¦æŠŠè¿™ä¸ªå†è½¬æ¢æˆæ±‡ç¼–è¿˜æ˜¯ä¸è¡Œï¼Œè¿˜éœ€è¦è½¬æ¢ä¸€æ­¥ï¼Œè½¬æ¢ä¸ºå¦ä¸€ç§æ•°æ®ç»“æ„â€”â€”AST è¯­æ³•æ ‘ï¼Œæ‰èƒ½å¤Ÿç”¨è®¡ç®—æœºçš„é€»è¾‘å»å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŠ½è±¡è¯­æ³•æ ‘&lt;/strong&gt;ï¼ˆAbstract Syntax Treeï¼ŒASTï¼‰ï¼Œæˆ–ç®€ç§°è¯­æ³•æ ‘ï¼ˆSyntax treeï¼‰ï¼Œæ˜¯æºä»£ç è¯­æ³•ç»“æ„çš„ä¸€ç§æŠ½è±¡è¡¨ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæä¾›ä¸€ä¸ªåœ¨çº¿ç¼–è¯‘ AST çš„ç½‘ç«™ï¼šhttps://astexplorer.net/ï¼Œå°†ä¸Šé¢çš„ä»£ç ç²˜è´´è¿›æ¥ï¼Œå°±å¯ä»¥å‘ç°å¦‚ä¸‹ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20210815233646288&#34; src=&#34;c:\\Users\\Xfavor\\AppData\\Roaming\\Typora\\typora-user-images\\image-20210815233646288.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;å·¦è¾¹æ˜¯ä»£ç ï¼Œå³è¾¹ä¼šæŠŠæ‰€æœ‰ä»£ç ç›¸åº”åœ°è½¬æ¢æˆäº†æ ‘ç»“æ„å‘ˆç°å‡ºæ¥ã€‚ï¼ˆå»ºè®®å¤§å®¶åŠ¨æ‰‹ç©ä¸€ç©ï¼Œé‡Œé¢ä¼šæœ‰è¯­æ³•é«˜äº®å’Œä»£ç ä¸æ ‘ä¸€ä¸€åŒ¹é…çš„åŠŸèƒ½ã€‚å¦‚æœæœªæ¥ä½ æœ‰æœºä¼šå†™ä¸€äº›è§£é‡Šå™¨ï¼Œå¾ˆå¯èƒ½ä¼šç”¨åˆ°è¿™ä¸ªï¼‰&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯­ä¹‰åˆ†æ&lt;/strong&gt;ï¼ˆSemantic Analysisï¼‰æ˜¯å¯¹ç»“æ„ä¸Šæ­£ç¡®çš„æºç¨‹åºè¿›è¡Œä¸Šä¸‹æ–‡æœ‰å…³æ€§è´¨çš„å®¡æŸ¥ï¼Œè¿›è¡Œç±»å‹å®¡æŸ¥ã€‚æ¯”å¦‚æˆ‘ä»¬å†™äº†ç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;abc&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½œä¸ºä¸€ä¸ªæ‰¾èŒ¬å°èƒ½æ‰‹ï¼ˆå½“ç„¶ä¸æ˜¯ä¹°ç“œï¼‰ï¼Œå¯ä»¥å‘ç°ï¼Œå­—ç¬¦ä¸² &amp;ldquo;abc&amp;rdquo; æ˜¯ä¸èƒ½èµ‹å€¼ä¸º int å˜é‡ xï¼Œè¿™æ—¶å€™æˆ‘ä»¬ç›´æ¥ç¼–è¯‘ go build å°±ä¼šå‡ºç°å¦‚ä¸‹é—®é¢˜ï¼š&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”å¸¸è§ä¸šåŠ¡é—®é¢˜</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day5-problem/day5-problem/</link>
      <pubDate>Sat, 14 Aug 2021 09:38:51 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day5-problem/day5-problem/</guid>
      
      <description>&lt;p&gt;ä¸Šå›è¯´åˆ°é€šè¿‡å·¥å…· readelf å’Œ dlv è°ƒè¯• Go è¯­è¨€ç¨‹åºï¼Œä¸ºä»€ä¹ˆéœ€è¦è¿™ä¹ˆåšè°ƒè¯•ä»£ç å‘¢ï¼Ÿæˆ‘å•çº¯åœ°æƒ³å†™ä¸ªä»£ç ï¼Œä¸è¡Œå—ï¼Œå¸¸è§ä¸šåŠ¡ä¸éƒ½æ˜¯ä»£ç å®ç°æ²¡æœ‰å¬è°è¯´è¿‡è¦è¿›è¡Œåº•å±‚è°ƒè¯•å•Šã€‚å…³äºä¸šåŠ¡ï¼Œå†™ä»£ç å½“ç„¶å¯ä»¥ï¼Œè€Œå½“æˆ‘ä»¬é¢ä¸´æ€§èƒ½é—®é¢˜æ—¶ï¼Œå°±éœ€è¦æ¶‰åŠç®—æ³•ä¸æ•°æ®ç»“æ„ã€‚ç³Ÿç³•ï¼Œä½ ä¸€è¯´åˆ°ç®—æ³•æˆ‘å°±å¿ƒè™šã€‚å¦‚æœä½ ç®—æ³•åŸºç¡€è–„ä¸€ç‚¹ï¼Œæ²¡å…³ç³»ï¼Œä¸œæ–¹ä¸äº®è¥¿æ–¹äº®ï¼Œç®—æ³•èµ°ä¸é€šï¼Œæˆ‘ä»¬èµ°æŸ¥çœ‹ä¿®æ”¹åº•å±‚ä»£ç åšèµ·ï¼Œä»…éœ€è¦ç»†å¿ƒå’Œé€»è¾‘æ¨ç†å°±èƒ½è§£å†³éƒ¨åˆ†é—®é¢˜ã€‚å› æ­¤ï¼Œä»Šå¤©çš„ä¸»é¢˜æ˜¯â€œæ¢ç©¶ Go è¯­æ³•èƒŒåçš„ç§˜å¯†â€ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å¸¸è§ä¸šåŠ¡åœºæ™¯&#34;&gt;å¸¸è§ä¸šåŠ¡åœºæ™¯&lt;/h1&gt;
&lt;p&gt;ä½ è¯´å†™ä¸šåŠ¡ä¸ç”¨å…³å¿ƒåº•å±‚ï¼ŒOKï¼Œé‚£æˆ‘ä»¬ä»Šå¤©å…ˆè®²åŸç†ï¼Œç›´æ¥ä¸Šä¸šåŠ¡åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;åœºæ™¯1ï¼Œè¿™ä¸¤æ®µä»£ç è¿è¡Œé€Ÿåº¦æ€æ ·ï¼Ÿç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¿«ï¼Ÿ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// ä»£ç 1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;person&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;age&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;person&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;111&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// å¯¹æ¯”ä»£ç 2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;person&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;age&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;person&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;111&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœºæ™¯2ï¼Œç±»å‹è½¬æ¢çš„åŸç†æ˜¯æ€æ ·çš„ï¼Ÿ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœºæ™¯3ï¼Œæ€ä¹ˆæ‰¾åˆ° make å’Œ new è¿™ç§ Go è¯­è¨€è‡ªå¸¦æ•°æ®ç»“æ„çš„å…·ä½“å®ç°ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åœºæ™¯4ï¼Œæœ‰ä¸€ä¸ªä¸­å°æœåŠ¡ï¼Œåˆ’åˆ†äº†è®¸å¤šç”¨æˆ·ç­‰çº§ï¼Œå…·ä½“è§„åˆ™å¦‚ä¸‹ï¼šï¼ˆä»¥ä¸‹åœºæ™¯éƒ½æ²¡é‡åˆ°è¿‡ï¼Œä¸è¿‡å¯ä»¥æ¥åšåˆ†æï¼‰&lt;/p&gt;
&lt;p&gt;åˆçº§ä¼šå‘˜ï¼Œå‘å¸–æ•° &amp;gt; 10&lt;/p&gt;
&lt;p&gt;ä¸­çº§ä¼šå‘˜ï¼Œå……å€¼ &amp;gt; 1000 RMB&lt;/p&gt;
&lt;p&gt;é«˜çº§ä¼šå‘˜ï¼Œå‘å¸–æ•° &amp;gt; 100 ï¼Œå……å€¼ &amp;gt; 10000 RMB&lt;/p&gt;
&lt;p&gt;å¦‚æœå…¶ä¸­é¡¹ç›®æ•°é‡ = å‡ ç™¾ï¼Œé‚£ä¹ˆæ¯ä¸ªé¡¹ç›®éƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¼šå‘˜è§„åˆ™å—ï¼Ÿä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦å•ç‹¬å®šåˆ¶è¿™ä¹ˆå‡ ç™¾ä¸ªä»£ç å—ï¼Ÿ&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”è°ƒè¯•2</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day4-run/day4-run/</link>
      <pubDate>Wed, 11 Aug 2021 09:38:51 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day4-run/day4-run/</guid>
      
      <description>&lt;p&gt;ä¸Šå›æˆ‘ä»¬è¯´åˆ°ï¼Œåˆ©ç”¨è°ƒè¯•å·¥å…· readelf è¯»å–æˆ‘ä»¬åœ¨ Linux ä¸Šç¼–è¯‘çš„å¯æ‰§è¡Œæ–‡ä»¶ helloï¼Œå¹¶ä¸”æ‰¾åˆ°äº†æŸ¥çœ‹ Go åº•å±‚çš„å…¥å£ entry point addressï¼Œä»Šå¤©æˆ‘ä»¬å°è¯•è¸è¿›åº•å±‚è°ƒè¯•çš„å¤§é—¨ï¼Œçœ‹ä¸€çœ‹æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„åº•å±‚ï¼Œæ˜¯å¦çœŸçš„å¾ˆå›°éš¾ï¼Œä»Šå¤©çš„ä¸»é¢˜æ˜¯â€œåˆæ¢Goåº•å±‚â€&lt;/p&gt;
&lt;p&gt;[toc]&lt;/p&gt;
&lt;h1 id=&#34;å®éªŒç¯å¢ƒä¸å›é¡¾&#34;&gt;å®éªŒç¯å¢ƒä¸å›é¡¾&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;æ“ä½œç³»ç»Ÿï¼šCentOS 7&lt;/p&gt;
&lt;p&gt;Goï¼š1.14.12&lt;/p&gt;
&lt;p&gt;è°ƒè¯•å·¥å…·ï¼šreadelfã€dlv&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬åŒæ ·è¿è¡Œæ›¹å¤§æä¾›çš„å®éªŒç¯å¢ƒï¼Œå¹¶ä¸”æŒ‚è½½æ˜ å°„åˆ°æœ¬åœ°é¡¹ç›®ï¼Œç„¶åè¿›å…¥åˆ°è¿™ä¸ªå®¹å™¨ç¯å¢ƒä¸­ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æŒ‚è½½ç›®å½•ï¼Œæ–‡ä»¶ä¹Ÿå¯ä»¥ç”Ÿæˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker run -it -v /root/project/dockerProject:/root/project xargin/go1.14.12-dev /bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è¿›å…¥é¡¹ç›®ç›®å½•&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /project/work/ch01
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æŸ¥çœ‹æ–‡ä»¶&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ls
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img alt=&#34;image-20210811230644860&#34; src=&#34;c:\\Users\\Xfavor\\AppData\\Roaming\\Typora\\typora-user-images\\image-20210811230644860.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„ç»¿è‰² helloï¼Œå°±æ˜¯æˆ‘ä»¬ Go è¯­è¨€ç¼–è¯‘åäº§ç”Ÿçš„ ELF æ ¼å¼å¯æ‰§è¡Œç¨‹åºï¼ˆELF ä¸çŸ¥é“æ˜¯ä»€ä¹ˆï¼Œå¯å›é¡¾ä¸ŠæœŸæ–‡ç« ï¼‰&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¸€èˆ¬é€šè¿‡å·¥å…· readelf æ¥æ‰¾åˆ°è¿›å…¥å¯æ‰§è¡Œç¨‹åºåº•å±‚çš„å…¥å£ entry point addressï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥å®ç°ï¼Œè¿™é‡Œçš„ -h è¡¨ç¤ºå»è¯»å– header&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;-h &amp;ndash;file-header	Display the ELF file header&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;readelf -h hello
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img alt=&#34;image-20210809235305494&#34; src=&#34;c:\\Users\\Xfavor\\AppData\\Roaming\\Typora\\typora-user-images\\image-20210809235305494.png&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;å¼€å§‹åº•å±‚è°ƒè¯•&#34;&gt;å¼€å§‹åº•å±‚è°ƒè¯•&lt;/h1&gt;
&lt;p&gt;å½“æ‰¾æˆ‘ä»¬é€šè¿‡ readelf æ‰¾åˆ°äº†è°ƒè¯•å…¥å£çš„åå…­è¿›åˆ¶åœ°å€ç ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç”¨å¦ä¸€ä¸ªå·¥å…· dlv æ‰èƒ½æ¥è°ƒè¯• Golang ç¨‹åºã€‚å†æ¬¡ä¹‹å‰ï¼Œæ¥ç®€å•è¯´æ˜ä¸€ä¸‹ä»€ä¹ˆæ˜¯ readelfã€ä»€ä¹ˆæ˜¯ dlvã€‚&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”è°ƒè¯•1</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day3-run/day3-run/</link>
      <pubDate>Mon, 09 Aug 2021 09:38:51 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day3-run/day3-run/</guid>
      
      <description>&lt;p&gt;ä»Šå¤©æ¥åŠ¨æ‰‹å®è·µçœ‹çœ‹ï¼ŒGo çš„åº•å±‚æ˜¯å¦‚ä½•è¿ä½œã€å¦‚ä½•è¿›è¡Œè°ƒåº¦çš„ï¼Œé€šè¿‡è°ƒè¯•ä¸€æ®µç®€å•çš„ä»£ç ï¼Œæˆ‘å°†å¸¦ä½ ä½“éªŒ Go è¯­è¨€å¦‚ä½•æ¥è§¦åº•å±‚çš„çŸ¥è¯†ã€‚ä¸ä¼šå¾ˆå¤æ‚çš„ï¼Œè·Ÿç€æˆ‘ä¸€æ­¥æ­¥èµ°è‚¯å®šéƒ½èƒ½ç†è§£ã€‚&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶è¦è¿›è¡Œä»£ç å®è·µæ“ä½œï¼Œé¦–å…ˆè¦è€ƒè™‘çš„å°±æ˜¯Goè¯­è¨€ç¼–è¯‘å™¨ï¼ˆä¹Ÿå°±æ˜¯Goï¼‰ã€Go ç¼–ç¨‹ç¯å¢ƒä»¥åŠ Go ä»£ç çš„è°ƒè¯•ç¯å¢ƒï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„ç‰ˆæœ¬ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ“ä½œç³»ç»Ÿï¼šCentOS7 æˆ–å…¶ä»– Linux ç¯å¢ƒ&lt;/p&gt;
&lt;p&gt;Goï¼š1.14.12&lt;/p&gt;
&lt;p&gt;Go è°ƒè¯•å·¥å…·ï¼šreadelf&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ˜¯ä¸æ˜¯æœ‰ç‚¹å¤æ‚ï¼Ÿå¦‚æœç‰ˆæœ¬å’Œæˆ‘çš„ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆå®éªŒç»“æœå¯èƒ½ä¸ä¸€æ ·ã€‚å¦‚æœç‰ˆæœ¬æ¯”è¾ƒä½ï¼Œæœ‰çš„å·¥å…·éœ€è¦è‡ªå·±å»æ‰¾æ—§ç‰ˆæœ¬çš„å»åŒ¹é…å®‰è£…ã€‚é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥ç®€åŒ–è¿™äº›å®éªŒç¯å¢ƒçš„æ­å»ºå‘¢ï¼Ÿç”¨ä¸Šå®¹å™¨æŠ€æœ¯â€”â€”Dockerã€‚ç®€å•è¯´ï¼Œå½“ä½ ç”¨ Docker çš„æ—¶å€™ï¼Œå°±åƒåœ¨è‡ªå·±çš„ç”µè„‘ä¸­è£…ä¸Šäº†æˆ‘æ‰€è¯´ç‰ˆæœ¬çš„å®éªŒç¯å¢ƒï¼Œé‡Œé¢åŒ…æ‹¬äº†ä¸Šé¢æ‰€è¯´çš„æ‰€æœ‰ä¸œè¥¿ã€‚ä½ å¯ä»¥ç”¨æˆ‘ç»™å‡ºçš„å®šåˆ¶ç¯å¢ƒï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸ºé•œåƒï¼‰ï¼Œä¹Ÿå¯ä»¥ç”¨å…¶ä»–äººç»™å‡ºçš„å®šåˆ¶ç¯å¢ƒï¼Œå¹¶ä¸”å¯ä»¥åšåˆ°æ— ç¼åˆ‡æ¢ã€‚å°±è¿™ä¹ˆè¯´ï¼Œåœ¨ä½ çš„ windows ä¸Šå¯ä»¥è¿è¡Œ CentOSã€Ubuntuï¼Œç”šè‡³è¿˜èƒ½åœ¨ windows ä¸Šè¿è¡Œä¸€ä¸ªå¾®å‹ windowsï¼Œæ˜¯ä¸æ˜¯å¾ˆç¥å¥‡ï¼ŸOKï¼Œæˆ‘ä»¬è¯´å›ä»Šå¤©çš„å®éªŒï¼Œåœ¨å¼€å§‹ä¹‹å‰å¸Œæœ›ä½ èƒ½å»äº†è§£ Docker æ˜¯æ€æ ·æ“ä½œçš„ï¼Œè¿™é‡Œæ¨èæˆ‘éå¸¸å–œçˆ±çš„ B ç«™ UP ä¸»â€œé‡è§ç‹‚ç¥è¯´â€æ¨å‡ºçš„ &lt;a href=&#34;https://www.bilibili.com/video/BV1og4y1q7M4?from=search&amp;seid=13499423805328211071&#34;&gt;Docker æ•™ç¨‹&lt;/a&gt;ã€‚å¥½ï¼Œå°±å½“ä½ å·²ç»ä¼šåŸºæœ¬æ“ä½œå•¦ï¼Œè·Ÿæˆ‘å¼€å§‹æ•²ä»£ç äº†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ­å»ºå®éªŒç¯å¢ƒ&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker run -it xargin/go1.14.12-dev bash
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œæˆ‘ä»¬è¿è¡Œäº†æ›¹å¤§ï¼ˆæ›¹æ˜¥æ™–ï¼‰æä¾›çš„å®éªŒç¯å¢ƒï¼Œå¹¶ä¸”è¿›å…¥åˆ°è¿™ä¸ªå®¹å™¨ç¯å¢ƒä¸­ã€‚ä½†æ˜¯å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œé¢å†™çš„ä»£ç åœ¨è¿™ä¸ªå®¹å™¨é”€æ¯åå°±æ²¡æœ‰äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹å®¹å™¨åšä¸€ä¸ªæ˜ å°„ï¼Œåœ¨å®¹å™¨ä¸­å†™äº†æ–‡ä»¶ï¼Œåœ¨æˆ‘ä»¬æœ¬åœ°ä¹Ÿæœ‰ä¸€ä»½è®°å½•ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æŒ‚è½½ç›®å½•ï¼Œæ–‡ä»¶ä¹Ÿå¯ä»¥ç”Ÿæˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker run -it -v /root/project/dockerProject:/root/project xargin/go1.14.12-dev /bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;åˆ›å»ºç›®å½•ä¸æ–‡ä»¶&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨homeç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹æ‰€æœ‰å®éªŒç›®å½• workï¼Œåˆ›å»ºç¬¬ä¸€ä¸ªå®éªŒç›®å½• chã€‚ï¼ˆè¿™é‡Œçš„æ ·å¼å’Œå¤§å®¶ä¸ä¸€æ ·æ˜¯å› ä¸º å®‰è£…äº† zsh ï¼Œä½ ä¸ä¸€å®šä¹Ÿè¦æŒ‰ç…§ï¼Œå¦‚æœæ„Ÿå…´è¶£ï¼Œè¯·è‡ªè¡Œæœç´¢å®‰è£…ï¼Œå½“å‰é…è‰²ä¸»é¢˜æ˜¯ ysï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;img&#34; src=&#34;c:\\Users\\Xfavor\\AppData\\Local\\YNote\\data\\weixinobU7VjplR8GhsqZn6qPSNHGlLvOg\\2a19397ad8e14472b1f4c9358d3a8ed7\\clipboard.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;å®éªŒç¯å¢ƒå‡†å¤‡å®Œæ¯•ã€‚&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;ç¼–å†™ä¸€æ®µç®€å•ä»£ç &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æˆ‘ä»¬æ¥æ‰“å¼€ä¸€ä¸ªå«åš hello.go çš„æ–‡ä»¶ï¼Œå†™ä¸€æ®µæˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;vi hello.go
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// hello.go æ–‡ä»¶ä¸­å†™å…¥
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Hello World&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;ç¼–è¯‘ä»£ç &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºå¹¶æŸ¥çœ‹ï¼š&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”è°ƒåº¦-day2</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day2-scheduler/day2-scheduler/</link>
      <pubDate>Thu, 05 Aug 2021 14:45:19 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day2-scheduler/day2-scheduler/</guid>
      
      <description>&lt;p&gt;ä¸Šå›è¯´åˆ° &lt;a href=&#34;https://mp.weixin.qq.com/s?__biz=Mzg3MjYzMzQzMQ==&amp;mid=2247483687&amp;idx=1&amp;sn=a357de9b46d3dbf466b9f52f6e2f413a&amp;scene=21#wechat_redirect&#34;&gt;Go çš„è°ƒåº¦æµç¨‹æœ¬è´¨ä¸Šæ˜¯â¼€ä¸ªâ½£äº§-æ¶ˆè´¹æµç¨‹&lt;/a&gt;ï¼Œä»Šå¤©æ¥è®²ä¸€è®²â€œè°ƒåº¦ç»„ä»¶ä¸è°ƒåº¦å¾ªç¯â€ï¼Œå†æ¥å›é¡¾ä¸€ä¸‹ä¸¤ä¸ªç”ŸåŠ¨çš„åŠ¨ç”» goroutine çš„â½£äº§ç«¯, goroutine çš„æ¶ˆè´¹ç«¯ã€‚&lt;/p&gt;
&lt;p&gt;å½“ goroutine å¤„äºç”Ÿäº§ç«¯æ—¶ï¼ŒM æ‰§è¡Œè°ƒåº¦å¾ªç¯æ—¶ï¼Œå¿…é¡»ä¸ä¸€ä¸ª P ç»‘å®šã€‚å¹¶ä¸”æˆ‘ä»¬å¸¸è¯´çš„ Work stealing å°±æ˜¯è¯´çš„ runqsteal -&amp;gt; runqgrab è¿™ä¸ªæµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;å½“ goroutine å¤„äºæ¶ˆè´¹ç«¯æ—¶ï¼Œæ‰§è¡Œçš„æ˜¯ä¸€ä¸ªå¾ªç¯ï¼šruntime.schedule â†’ execute â†’ runtime.gogo â†’ runtime.goexit â†’ runtime.scheduleï¼ˆå›åˆ°åŸç‚¹ï¼‰ï¼Œå¹¶ä¸”æœ€ç»ˆ P.schedtick = 0ã€‚&lt;/p&gt;
&lt;p&gt;åˆå­¦ scheduler å¯¹äºä»¥ä¸Šçš„æµç¨‹æ„Ÿå—æ˜¯æ¯”è¾ƒæµ…çš„ï¼Œå†æ¥çœ‹çœ‹è¿™äº›ç¬¦å·æ‰€ä»£è¡¨çš„å«ä¹‰ï¼Œå°±èƒ½æ›´å¥½åœ°ç†è§£äº†ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;G: goroutineï¼Œè®¡ç®—ä»»åŠ¡ã€‚ç”±éœ€è¦æ‰§è¡Œçš„ä»£ç å’Œå…¶ä¸Šä¸‹æ–‡ç»„æˆã€‚ï¼ˆä¸Šä¸‹æ–‡åŒ…æ‹¬ï¼šå½“å‰ä»£ç ä½ç½®ï¼Œæ ˆé¡¶ã€æ ˆåº•åœ°å€ï¼ŒçŠ¶æ€ç­‰ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;M: machineï¼Œç³»ç»Ÿçº¿ç¨‹ï¼Œæ‰§è¡Œå®ä½“ï¼Œæƒ³è¦åœ¨ CPU ä¸Šæ¥æ‰§è¡Œä»£ç ï¼Œå¿…é¡»æœ‰çº¿ç¨‹ï¼Œä¸ C è¯­è¨€ä¸­çš„çº¿ç¨‹ç›¸åŒï¼Œé€šè¿‡ç³»ç»Ÿè°ƒç”¨ clone æ¥åˆ›å»ºã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;P: processorï¼Œè™šæ‹Ÿå¤„ç†å™¨ï¼ŒM å¿…é¡»è·å¾— P æ‰èƒ½æ‰§è¡Œä»£ç ï¼Œå¦åˆ™å¿…é¡»é™·å…¥ä¼‘çœ ï¼ˆåå°ç›‘æ§çº¿ç¨‹é™¤å¤–ï¼‰ï¼Œä½ ä¹Ÿå¯ä»¥å°†å…¶ç†è§£ä¸ºä¸€ç§ tokenï¼Œæœ‰äº†è¿™ä¸ª tokenï¼Œæ‰æœ‰åœ¨ç‰©ç† CPU æ ¸å¿ƒä¸Šæ‰§è¡Œçš„æƒåˆ©ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸Šé¢æ‰€è¯´çš„å¾ªç¯è°ƒåº¦æµç¨‹ï¼Œéƒ½æ˜¯åœ¨æ­£å¸¸æƒ…å†µä¸‹è¿ä½œçš„ã€‚è€Œå®é™…ä¸šåŠ¡ä¸­æˆ‘ä»¬å¾€å¾€è¿˜ä¼šé‡åˆ°å…¶ä»–æƒ…å†µâ€”â€”é˜»å¡ã€‚å¦‚æœç¨‹åºä¸­æœ‰é˜»å¡ï¼Œé‚£ä¹ˆçº¿ç¨‹ä¸å°±å…¨éƒ¨è¢«å µä¸Šï¼Œç¨‹åºå°±å¡ä½äº†ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä»¥ä¸‹å‡ ç§æƒ…å†µï¼Œåœ¨çº¿ç¨‹å‘ç”Ÿé˜»å¡çš„æ—¶å€™ï¼Œæ˜¯å¦ä¼šæ— é™åœ°åˆ›æ–°çº¿ç¨‹ï¼Ÿï¼ˆå¹¶ä¸ä¼šï¼‰&lt;/p&gt;
&lt;p&gt;æ¡ˆä¾‹1ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// channel send:
var ch = make(chan int)
ch &amp;lt;- 1

// channel recv:
var ch = make(chan int)
&amp;lt;- ch
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¡ˆä¾‹2ï¼š&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Go ç¿»å±±è¶Šå²­â€”â€”è°ƒåº¦-day1</title>
      <link>https://JupiterXue.github.io/posts/go-to-top/day1-scheduler/day1-scheduler/</link>
      <pubDate>Tue, 03 Aug 2021 09:38:51 +0800</pubDate>
      
      <guid>https://JupiterXue.github.io/posts/go-to-top/day1-scheduler/day1-scheduler/</guid>
      
      <description>&lt;h3 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h3&gt;
&lt;p&gt;Go è¯­è¨€æ˜¯ä¸€é—¨å…¥é—¨å®¹æ˜“æ·±å…¥éš¾çš„ç¼–ç¨‹è¯­è¨€ã€‚è¯´å¾—å¥½åƒå…¶ä»–ç¼–ç¨‹è¯­è¨€å°±æœ‰å…¥é—¨éš¾æ·±å…¥ç®€å•çš„ï¼Ÿå…¶å®æ¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€è¦æ·±å…¥å­¦ä¹ éƒ½ä¼šæœ‰ä¸ä¸€æ ·çš„å£å’ä¸é—¨æ§›ï¼Œåªæ˜¯çœ‹ä½œè€…å¦‚ä½•æŒ–æ˜ã€‚&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h2 id=&#34;golang-å››åº§å¤§å±±&#34;&gt;Golang å››åº§å¤§å±±&lt;/h2&gt;
&lt;p&gt;ä½œä¸º Go è¯­è¨€è¿›é˜¶çš„ä¸€ä¸ªæ ‡è¯†ï¼Œæ˜¯ç£•ç£•ç»Šç»Šåœ°ç¿»è¿‡ runtime å››åº§å¤§å±±ï¼ŒåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Scheduler	ï¼šè°ƒåº¦å™¨ç®¡ç†æ‰€æœ‰çš„ Gï¼ŒMï¼ŒPï¼Œåœ¨åå°æ‰§è¡Œè°ƒåº¦å¾ªç¯&lt;/p&gt;
&lt;p&gt;Netpoll	ï¼šç½‘ç»œè½®è¯¢è´Ÿè´£ç®¡ç†ç½‘ç»œ DF ç›¸å…³çš„è¯»å†™ã€å°±ç»ªäº‹é¡¹&lt;/p&gt;
&lt;p&gt;Memory	ï¼šå½“ä»£ç éœ€è¦å†…å­˜æ—¶ï¼Œè´Ÿè´£å†…å­˜åˆ†é…å·¥ä½œ&lt;/p&gt;
&lt;p&gt;Garbage	ï¼šå½“å†…å­˜ä¸å†éœ€è¦æ—¶ï¼Œè´Ÿè´£å›æ”¶å†…å­˜&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è€Œè¿™äº›æ¨¡å—ä¸­ï¼Œæœ€æ ¸å¿ƒçš„å°±æ˜¯ Scheduler è°ƒåº¦ï¼Œå®ƒè´Ÿè´£ä¸²è”æ‰€æœ‰çš„ runtime æµç¨‹ã€‚â€œè¦å»åˆ°å“ªé‡Œ,å°±ä»å“ªé‡Œå¼€å§‹â€ï¼Œæ—¢ç„¶é€‰æ‹©å­¦ä¹  Golangï¼Œæˆ‘ä»¬å°±ç›´é¢è¿™ä¸ªç¬¬ä¸€ä¸ªéš¾é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è°ƒåº¦å™¨çš„å‘å±•å†å²&#34;&gt;è°ƒåº¦å™¨çš„å‘å±•å†å²&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ å­¦ä¹ æ•°å­¦æ„Ÿè§‰å›°éš¾ï¼Œé‚£ä¹ˆå¯ä»¥å»è¯»æ•°å­¦å²ã€‚å¦‚æœå­¦ä¹  Go è¯­è¨€è°ƒåº¦æ„Ÿåˆ°å›°éš¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…ˆè€äº†è§£è°ƒåº¦çš„å‘å±•å†å²ã€‚å†åè¿‡æ¥æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä½ æ˜¯ä¸€ä¸ªé¢†åŸŸçš„ä¸“å®¶ï¼Œæ˜¯å¦åº”è¯¥æ¯”è¾ƒç†Ÿæ‚‰è¯¥é¢†åŸŸçš„å‘å±•å†å²ï¼Ÿ å“²å­¦å®¶åŸ¹æ ¹è¯´è¿‡ï¼šâ€œè¯»å²ä½¿äººæ˜æ™ºï¼Œè¯»è¯—ä½¿äººçµç§€ï¼Œæ•°å­¦ä½¿äººå‘¨å¯†ï¼Œç§‘å­¦ä½¿äººæ·±åˆ»ï¼Œä¼¦ç†ä½¿äººåº„é‡ï¼Œé€»è¾‘ä¿®è¾ä¹‹å­¦ä½¿äººå–„è¾©â€œã€‚é‚£ä¹ˆå°±å¼€å§‹æˆ‘ä»¬çš„è°ƒåº¦å™¨å‘å±•å²ï¼š&lt;/p&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯è°ƒåº¦34&#34;&gt;ä»€ä¹ˆæ˜¯è°ƒåº¦&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;,&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/h2&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼Œåå­—è·¯å£çš„çº¢ç»¿ç¯ï¼Œå°±æ˜¯ä¸€ç§è°ƒåº¦ç³»ç»Ÿã€‚å› ä¸ºè½¦é€Ÿè¿‡å¿«ï¼Œäººå·¥å»åšç–å¯¼æŒ‡æŒ¥çš„æ•ˆç‡å¤ªä½è€Œé‡‡å–çš„ä¸€ç§è‡ªåŠ¨åŒ–çš„å¤„ç†æµç¨‹ï¼Œä¸ºäº†é™åˆ¶è¿™äº›è½¦è¾†ä¸éšæ„è¡Œé©¶ï¼Œä¾¿æœ‰äº†çº¢ç»¿ç¯è°ƒåº¦ç³»ç»Ÿã€‚
Go è°ƒåº¦æ˜¯ä¸ºäº†å¤šä¸ªåç¨‹èƒ½åˆç†çš„åˆ©ç”¨çº¿ç¨‹ã€‚è¿™é‡Œçš„åç¨‹ï¼ˆgoroutineï¼‰ç›¸å½“äºè½¦è¾†äº†ï¼Œçº¿ç¨‹ç›¸å½“äºåå­—è·¯å£ã€‚ç¨‹åºåœ¨è¿è¡Œæ—¶ï¼Œä¼šè¿è¡Œå¾ˆå¤šåç¨‹ goroutineï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å¹¶å‘ï¼Œä¸ºäº†ä¿éšœè¿™äº›åç¨‹èƒ½å¤Ÿæœ‰åºå¿«é€Ÿåœ°åœ¨çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œè¿™æ—¶å€™å°±å¼•å…¥å¯è°ƒåº¦ Schedulerã€‚
ä¸€ä¸ªç®€çŸ­çš„ä¾‹å­
æ¯å½“æˆ‘ä»¬å†™ä¸‹è¿™æ ·å½¢å¼çš„ä»£ç ï¼Œåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hello world in goroutine!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œæˆ‘ä»¬æ˜¯å‘ runtime æäº¤äº†ä¸€ä¸ªè®¡ç®—ä»»åŠ¡ï¼Œå¹¶ä¸” func() { xxx } é‡ŒåŒ…è£¹çš„ä»£ç ï¼Œå°±æ˜¯è¿™ä¸ªè®¡ç®—ä»»åŠ¡çš„å†…å®¹ã€‚
Goè°ƒåº¦æµç¨‹çš„æœ¬è´¨
ä¹Ÿè®¸è¿™é‡Œè¿˜ä¸æ¸…æ¥šï¼Œä½†è¯·è®°ä½ï¼ŒGo çš„è°ƒåº¦æµç¨‹æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç”Ÿäº§â€”æ¶ˆè´¹æµç¨‹ã€‚åœ¨åé¢çš„è®²è§£ä¸­ä½ ä¼šæ›´åŠ æ·±åˆ»äº†è§£åˆ°è¿™å¥è¯çš„æ·±æ„ã€‚
è¿™é‡Œæœ‰ä¸¤ä¸ªåŠ¨ç”»ä¾¿äºä½ ç†è§£ï¼š&lt;/p&gt;
&lt;p&gt;Goroutine ç”Ÿäº§è¿‡ç¨‹&lt;sup id=&#34;fnref:3&#34;&gt;&lt;a href=&#34;#fn:3&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;3&lt;/a&gt;&lt;/sup&gt;,&lt;sup id=&#34;fnref:4&#34;&gt;&lt;a href=&#34;#fn:4&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;4&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;Goroutine æ¶ˆè´¹è¿‡ç¨‹&lt;/p&gt;
&lt;p&gt;æƒ³è¦å­¦å¥½ç¼–ç¨‹ï¼Œå°±éœ€è¦ä¸‹åŠŸå¤«ï¼Œå¤šæŠ•å…¥æ—¶é—´å»ç†è§£ä¸å®è·µã€‚æƒ³è¦å­¦å¥½ Go è¯­è¨€ï¼Œå°±éœ€è¦è·‹å±±æ¶‰æ°´ï¼Œä¸ºä½ æˆ‘æ„¿æ„ç¿»å±±è¶Šå²­ã€‚
ï¼ˆæœªå®Œå¾…ç»­ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç›¸å…³é“¾æ¥&lt;/strong&gt;&lt;/p&gt;</description>
      
    </item>
    
  </channel>
</rss>
