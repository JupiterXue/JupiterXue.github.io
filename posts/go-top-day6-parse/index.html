<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Go 翻山越岭——编译原理基础 | 木夜星空的个人博客</title>
  <link rel = 'canonical' href = 'http://jupiterxue.com/posts/go-top-day6-parse/'>
  <meta name="description" content="东方不亮木星亮，黑了白昼有星空">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Go 翻山越岭——编译原理基础" />
<meta property="og:description" content="Go 程序，从源代码到可执行文件，通常要经过两个步骤：编译 → 链接。看似简单，但其中蕴藏着极大的能量，尤其在面对不能一时半会就解决的业务场景中，稍微深挖编译与链接的过程就有奇效。今天我们就来聊聊 “Go 语言中编译原理的基础”。
上期文章提到了 8 个常见 Go 业务场景，虽说都是业务场景，但在代码性能、数据结构转换和系统设计中偏细颗粒度的实践中我们通常感到茫然和繁琐。这是因为在平时开发中，编译器会自动帮我们屏蔽掉代码编译的过程，我们只用关注最后的 ELF 可执行文件。那么我们就来看看，编译器会帮我们做些什么工作，进一步理解我们所写的程序发生了什么样的转化。
编译原理概述 我们可以把编译分为两个部分：编译器前端和编译器后端，如图所示：（这些都是我们软件工程专业课上的基础知识）
**词法分析（Lexical Analysis）**是计算机科学中将字符序列转换为标记（token）序列的过程。
1package main 2 3import &#34;fmt&#34; 4 5func main() { 6 println(1 &#43; 2) 7} 我们这里有一段简单代码，通过词法分析的方法，转化为 token 就是如下结果：
我们在 Go 语言中没有分号，但其实像很多其他编程语言一样，是需要的。
语法分析（syntactic analysis，又称 parsing）是根据某种给定的形式文法对由单词序列（如英语单词序列）构成的输入文本进行分析并确定其语法结构的一种过程。当我们对 Go 源代码进行词法分析后，会形成上图的 token 流，我们想要把这个再转换成汇编还是不行，还需要转换一步，转换为另一种数据结构——AST 语法树，才能够用计算机的逻辑去处理。
抽象语法树（Abstract Syntax Tree，AST），或简称语法树（Syntax tree），是源代码语法结构的一种抽象表示。
这里提供一个在线编译 AST 的网站：https://astexplorer.net/，将上面的代码粘贴进来，就可以发现如下结果：
左边是代码，右边会把所有代码相应地转换成了树结构呈现出来。（建议大家动手玩一玩，里面会有语法高亮和代码与树一一匹配的功能。如果未来你有机会写一些解释器，很可能会用到这个）
语义分析（Semantic Analysis）是对结构上正确的源程序进行上下文有关性质的审查，进行类型审查。比如我们写了类似这样的代码：
1package main 2 3import &#34;fmt&#34; 4 5func main() { 6 var x int = &#34;abc&#34; 7 println(x) 8} 作为一个找茬小能手（当然不是买瓜），可以发现，字符串 &ldquo;abc&rdquo; 是不能赋值为 int 变量 x，这时候我们直接编译 go build 就会出现如下问题：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://jupiterxue.com/posts/go-top-day6-parse/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-15T09:38:51+08:00" />
<meta property="article:modified_time" content="2021-08-15T09:38:51+08:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Go 翻山越岭——编译原理基础"/>
<meta name="twitter:description" content="Go 程序，从源代码到可执行文件，通常要经过两个步骤：编译 → 链接。看似简单，但其中蕴藏着极大的能量，尤其在面对不能一时半会就解决的业务场景中，稍微深挖编译与链接的过程就有奇效。今天我们就来聊聊 “Go 语言中编译原理的基础”。
上期文章提到了 8 个常见 Go 业务场景，虽说都是业务场景，但在代码性能、数据结构转换和系统设计中偏细颗粒度的实践中我们通常感到茫然和繁琐。这是因为在平时开发中，编译器会自动帮我们屏蔽掉代码编译的过程，我们只用关注最后的 ELF 可执行文件。那么我们就来看看，编译器会帮我们做些什么工作，进一步理解我们所写的程序发生了什么样的转化。
编译原理概述 我们可以把编译分为两个部分：编译器前端和编译器后端，如图所示：（这些都是我们软件工程专业课上的基础知识）
**词法分析（Lexical Analysis）**是计算机科学中将字符序列转换为标记（token）序列的过程。
1package main 2 3import &#34;fmt&#34; 4 5func main() { 6 println(1 &#43; 2) 7} 我们这里有一段简单代码，通过词法分析的方法，转化为 token 就是如下结果：
我们在 Go 语言中没有分号，但其实像很多其他编程语言一样，是需要的。
语法分析（syntactic analysis，又称 parsing）是根据某种给定的形式文法对由单词序列（如英语单词序列）构成的输入文本进行分析并确定其语法结构的一种过程。当我们对 Go 源代码进行词法分析后，会形成上图的 token 流，我们想要把这个再转换成汇编还是不行，还需要转换一步，转换为另一种数据结构——AST 语法树，才能够用计算机的逻辑去处理。
抽象语法树（Abstract Syntax Tree，AST），或简称语法树（Syntax tree），是源代码语法结构的一种抽象表示。
这里提供一个在线编译 AST 的网站：https://astexplorer.net/，将上面的代码粘贴进来，就可以发现如下结果：
左边是代码，右边会把所有代码相应地转换成了树结构呈现出来。（建议大家动手玩一玩，里面会有语法高亮和代码与树一一匹配的功能。如果未来你有机会写一些解释器，很可能会用到这个）
语义分析（Semantic Analysis）是对结构上正确的源程序进行上下文有关性质的审查，进行类型审查。比如我们写了类似这样的代码：
1package main 2 3import &#34;fmt&#34; 4 5func main() { 6 var x int = &#34;abc&#34; 7 println(x) 8} 作为一个找茬小能手（当然不是买瓜），可以发现，字符串 &ldquo;abc&rdquo; 是不能赋值为 int 变量 x，这时候我们直接编译 go build 就会出现如下问题："/>

  
  
    
  
  
  <link rel="stylesheet" href="http://jupiterxue.com/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css" integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="http://jupiterxue.com/images/favicon.ico" />

  
  
  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">主页</a></li>
         
        <li><a href="/posts">文章</a></li>
         
        <li><a href="/tags">归档</a></li>
         
        <li><a href="/about">关于</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" http://jupiterxue.com/go-to-top/go-top-day5-problem/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="http://jupiterxue.com/go-to-top/go-top-day6-parse/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f&text=Go%20%e7%bf%bb%e5%b1%b1%e8%b6%8a%e5%b2%ad%e2%80%94%e2%80%94%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e5%9f%ba%e7%a1%80" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f&title=Go%20%e7%bf%bb%e5%b1%b1%e8%b6%8a%e5%b2%ad%e2%80%94%e2%80%94%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e5%9f%ba%e7%a1%80" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f&is_video=false&description=Go%20%e7%bf%bb%e5%b1%b1%e8%b6%8a%e5%b2%ad%e2%80%94%e2%80%94%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e5%9f%ba%e7%a1%80" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Go%20%e7%bf%bb%e5%b1%b1%e8%b6%8a%e5%b2%ad%e2%80%94%e2%80%94%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e5%9f%ba%e7%a1%80&body=Check out this article: http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f&title=Go%20%e7%bf%bb%e5%b1%b1%e8%b6%8a%e5%b2%ad%e2%80%94%e2%80%94%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e5%9f%ba%e7%a1%80" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f&title=Go%20%e7%bf%bb%e5%b1%b1%e8%b6%8a%e5%b2%ad%e2%80%94%e2%80%94%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e5%9f%ba%e7%a1%80" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f&name=Go%20%e7%bf%bb%e5%b1%b1%e8%b6%8a%e5%b2%ad%e2%80%94%e2%80%94%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e5%9f%ba%e7%a1%80&description=Go%20%e7%a8%8b%e5%ba%8f%ef%bc%8c%e4%bb%8e%e6%ba%90%e4%bb%a3%e7%a0%81%e5%88%b0%e5%8f%af%e6%89%a7%e8%a1%8c%e6%96%87%e4%bb%b6%ef%bc%8c%e9%80%9a%e5%b8%b8%e8%a6%81%e7%bb%8f%e8%bf%87%e4%b8%a4%e4%b8%aa%e6%ad%a5%e9%aa%a4%ef%bc%9a%e7%bc%96%e8%af%91%20%e2%86%92%20%e9%93%be%e6%8e%a5%e3%80%82%e7%9c%8b%e4%bc%bc%e7%ae%80%e5%8d%95%ef%bc%8c%e4%bd%86%e5%85%b6%e4%b8%ad%e8%95%b4%e8%97%8f%e7%9d%80%e6%9e%81%e5%a4%a7%e7%9a%84%e8%83%bd%e9%87%8f%ef%bc%8c%e5%b0%a4%e5%85%b6%e5%9c%a8%e9%9d%a2%e5%af%b9%e4%b8%8d%e8%83%bd%e4%b8%80%e6%97%b6%e5%8d%8a%e4%bc%9a%e5%b0%b1%e8%a7%a3%e5%86%b3%e7%9a%84%e4%b8%9a%e5%8a%a1%e5%9c%ba%e6%99%af%e4%b8%ad%ef%bc%8c%e7%a8%8d%e5%be%ae%e6%b7%b1%e6%8c%96%e7%bc%96%e8%af%91%e4%b8%8e%e9%93%be%e6%8e%a5%e7%9a%84%e8%bf%87%e7%a8%8b%e5%b0%b1%e6%9c%89%e5%a5%87%e6%95%88%e3%80%82%e4%bb%8a%e5%a4%a9%e6%88%91%e4%bb%ac%e5%b0%b1%e6%9d%a5%e8%81%8a%e8%81%8a%20%e2%80%9cGo%20%e8%af%ad%e8%a8%80%e4%b8%ad%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e7%9a%84%e5%9f%ba%e7%a1%80%e2%80%9d%e3%80%82%0a%e4%b8%8a%e6%9c%9f%e6%96%87%e7%ab%a0%e6%8f%90%e5%88%b0%e4%ba%86%208%20%e4%b8%aa%e5%b8%b8%e8%a7%81%20Go%20%e4%b8%9a%e5%8a%a1%e5%9c%ba%e6%99%af%ef%bc%8c%e8%99%bd%e8%af%b4%e9%83%bd%e6%98%af%e4%b8%9a%e5%8a%a1%e5%9c%ba%e6%99%af%ef%bc%8c%e4%bd%86%e5%9c%a8%e4%bb%a3%e7%a0%81%e6%80%a7%e8%83%bd%e3%80%81%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e8%bd%ac%e6%8d%a2%e5%92%8c%e7%b3%bb%e7%bb%9f%e8%ae%be%e8%ae%a1%e4%b8%ad%e5%81%8f%e7%bb%86%e9%a2%97%e7%b2%92%e5%ba%a6%e7%9a%84%e5%ae%9e%e8%b7%b5%e4%b8%ad%e6%88%91%e4%bb%ac%e9%80%9a%e5%b8%b8%e6%84%9f%e5%88%b0%e8%8c%ab%e7%84%b6%e5%92%8c%e7%b9%81%e7%90%90%e3%80%82%e8%bf%99%e6%98%af%e5%9b%a0%e4%b8%ba%e5%9c%a8%e5%b9%b3%e6%97%b6%e5%bc%80%e5%8f%91%e4%b8%ad%ef%bc%8c%e7%bc%96%e8%af%91%e5%99%a8%e4%bc%9a%e8%87%aa%e5%8a%a8%e5%b8%ae%e6%88%91%e4%bb%ac%e5%b1%8f%e8%94%bd%e6%8e%89%e4%bb%a3%e7%a0%81%e7%bc%96%e8%af%91%e7%9a%84%e8%bf%87%e7%a8%8b%ef%bc%8c%e6%88%91%e4%bb%ac%e5%8f%aa%e7%94%a8%e5%85%b3%e6%b3%a8%e6%9c%80%e5%90%8e%e7%9a%84%20ELF%20%e5%8f%af%e6%89%a7%e8%a1%8c%e6%96%87%e4%bb%b6%e3%80%82%e9%82%a3%e4%b9%88%e6%88%91%e4%bb%ac%e5%b0%b1%e6%9d%a5%e7%9c%8b%e7%9c%8b%ef%bc%8c%e7%bc%96%e8%af%91%e5%99%a8%e4%bc%9a%e5%b8%ae%e6%88%91%e4%bb%ac%e5%81%9a%e4%ba%9b%e4%bb%80%e4%b9%88%e5%b7%a5%e4%bd%9c%ef%bc%8c%e8%bf%9b%e4%b8%80%e6%ad%a5%e7%90%86%e8%a7%a3%e6%88%91%e4%bb%ac%e6%89%80%e5%86%99%e7%9a%84%e7%a8%8b%e5%ba%8f%e5%8f%91%e7%94%9f%e4%ba%86%e4%bb%80%e4%b9%88%e6%a0%b7%e7%9a%84%e8%bd%ac%e5%8c%96%e3%80%82%0a%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e6%a6%82%e8%bf%b0%20%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e6%8a%8a%e7%bc%96%e8%af%91%e5%88%86%e4%b8%ba%e4%b8%a4%e4%b8%aa%e9%83%a8%e5%88%86%ef%bc%9a%e7%bc%96%e8%af%91%e5%99%a8%e5%89%8d%e7%ab%af%e5%92%8c%e7%bc%96%e8%af%91%e5%99%a8%e5%90%8e%e7%ab%af%ef%bc%8c%e5%a6%82%e5%9b%be%e6%89%80%e7%a4%ba%ef%bc%9a%ef%bc%88%e8%bf%99%e4%ba%9b%e9%83%bd%e6%98%af%e6%88%91%e4%bb%ac%e8%bd%af%e4%bb%b6%e5%b7%a5%e7%a8%8b%e4%b8%93%e4%b8%9a%e8%af%be%e4%b8%8a%e7%9a%84%e5%9f%ba%e7%a1%80%e7%9f%a5%e8%af%86%ef%bc%89%0a%2a%2a%e8%af%8d%e6%b3%95%e5%88%86%e6%9e%90%ef%bc%88Lexical%20Analysis%ef%bc%89%2a%2a%e6%98%af%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%a7%91%e5%ad%a6%e4%b8%ad%e5%b0%86%e5%ad%97%e7%ac%a6%e5%ba%8f%e5%88%97%e8%bd%ac%e6%8d%a2%e4%b8%ba%e6%a0%87%e8%ae%b0%ef%bc%88token%ef%bc%89%e5%ba%8f%e5%88%97%e7%9a%84%e8%bf%87%e7%a8%8b%e3%80%82%0a1package%20main%202%203import%20%26%2334%3bfmt%26%2334%3b%204%205func%20main%28%29%20%7b%206%20println%281%20%2b%202%29%207%7d%20%e6%88%91%e4%bb%ac%e8%bf%99%e9%87%8c%e6%9c%89%e4%b8%80%e6%ae%b5%e7%ae%80%e5%8d%95%e4%bb%a3%e7%a0%81%ef%bc%8c%e9%80%9a%e8%bf%87%e8%af%8d%e6%b3%95%e5%88%86%e6%9e%90%e7%9a%84%e6%96%b9%e6%b3%95%ef%bc%8c%e8%bd%ac%e5%8c%96%e4%b8%ba%20token%20%e5%b0%b1%e6%98%af%e5%a6%82%e4%b8%8b%e7%bb%93%e6%9e%9c%ef%bc%9a%0a%e6%88%91%e4%bb%ac%e5%9c%a8%20Go%20%e8%af%ad%e8%a8%80%e4%b8%ad%e6%b2%a1%e6%9c%89%e5%88%86%e5%8f%b7%ef%bc%8c%e4%bd%86%e5%85%b6%e5%ae%9e%e5%83%8f%e5%be%88%e5%a4%9a%e5%85%b6%e4%bb%96%e7%bc%96%e7%a8%8b%e8%af%ad%e8%a8%80%e4%b8%80%e6%a0%b7%ef%bc%8c%e6%98%af%e9%9c%80%e8%a6%81%e7%9a%84%e3%80%82%0a%e8%af%ad%e6%b3%95%e5%88%86%e6%9e%90%ef%bc%88syntactic%20analysis%ef%bc%8c%e5%8f%88%e7%a7%b0%20parsing%ef%bc%89%e6%98%af%e6%a0%b9%e6%8d%ae%e6%9f%90%e7%a7%8d%e7%bb%99%e5%ae%9a%e7%9a%84%e5%bd%a2%e5%bc%8f%e6%96%87%e6%b3%95%e5%af%b9%e7%94%b1%e5%8d%95%e8%af%8d%e5%ba%8f%e5%88%97%ef%bc%88%e5%a6%82%e8%8b%b1%e8%af%ad%e5%8d%95%e8%af%8d%e5%ba%8f%e5%88%97%ef%bc%89%e6%9e%84%e6%88%90%e7%9a%84%e8%be%93%e5%85%a5%e6%96%87%e6%9c%ac%e8%bf%9b%e8%a1%8c%e5%88%86%e6%9e%90%e5%b9%b6%e7%a1%ae%e5%ae%9a%e5%85%b6%e8%af%ad%e6%b3%95%e7%bb%93%e6%9e%84%e7%9a%84%e4%b8%80%e7%a7%8d%e8%bf%87%e7%a8%8b%e3%80%82%e5%bd%93%e6%88%91%e4%bb%ac%e5%af%b9%20Go%20%e6%ba%90%e4%bb%a3%e7%a0%81%e8%bf%9b%e8%a1%8c%e8%af%8d%e6%b3%95%e5%88%86%e6%9e%90%e5%90%8e%ef%bc%8c%e4%bc%9a%e5%bd%a2%e6%88%90%e4%b8%8a%e5%9b%be%e7%9a%84%20token%20%e6%b5%81%ef%bc%8c%e6%88%91%e4%bb%ac%e6%83%b3%e8%a6%81%e6%8a%8a%e8%bf%99%e4%b8%aa%e5%86%8d%e8%bd%ac%e6%8d%a2%e6%88%90%e6%b1%87%e7%bc%96%e8%bf%98%e6%98%af%e4%b8%8d%e8%a1%8c%ef%bc%8c%e8%bf%98%e9%9c%80%e8%a6%81%e8%bd%ac%e6%8d%a2%e4%b8%80%e6%ad%a5%ef%bc%8c%e8%bd%ac%e6%8d%a2%e4%b8%ba%e5%8f%a6%e4%b8%80%e7%a7%8d%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e2%80%94%e2%80%94AST%20%e8%af%ad%e6%b3%95%e6%a0%91%ef%bc%8c%e6%89%8d%e8%83%bd%e5%a4%9f%e7%94%a8%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%9a%84%e9%80%bb%e8%be%91%e5%8e%bb%e5%a4%84%e7%90%86%e3%80%82%0a%e6%8a%bd%e8%b1%a1%e8%af%ad%e6%b3%95%e6%a0%91%ef%bc%88Abstract%20Syntax%20Tree%ef%bc%8cAST%ef%bc%89%ef%bc%8c%e6%88%96%e7%ae%80%e7%a7%b0%e8%af%ad%e6%b3%95%e6%a0%91%ef%bc%88Syntax%20tree%ef%bc%89%ef%bc%8c%e6%98%af%e6%ba%90%e4%bb%a3%e7%a0%81%e8%af%ad%e6%b3%95%e7%bb%93%e6%9e%84%e7%9a%84%e4%b8%80%e7%a7%8d%e6%8a%bd%e8%b1%a1%e8%a1%a8%e7%a4%ba%e3%80%82%0a%e8%bf%99%e9%87%8c%e6%8f%90%e4%be%9b%e4%b8%80%e4%b8%aa%e5%9c%a8%e7%ba%bf%e7%bc%96%e8%af%91%20AST%20%e7%9a%84%e7%bd%91%e7%ab%99%ef%bc%9ahttps%3a%2f%2fastexplorer.net%2f%ef%bc%8c%e5%b0%86%e4%b8%8a%e9%9d%a2%e7%9a%84%e4%bb%a3%e7%a0%81%e7%b2%98%e8%b4%b4%e8%bf%9b%e6%9d%a5%ef%bc%8c%e5%b0%b1%e5%8f%af%e4%bb%a5%e5%8f%91%e7%8e%b0%e5%a6%82%e4%b8%8b%e7%bb%93%e6%9e%9c%ef%bc%9a%0a%e5%b7%a6%e8%be%b9%e6%98%af%e4%bb%a3%e7%a0%81%ef%bc%8c%e5%8f%b3%e8%be%b9%e4%bc%9a%e6%8a%8a%e6%89%80%e6%9c%89%e4%bb%a3%e7%a0%81%e7%9b%b8%e5%ba%94%e5%9c%b0%e8%bd%ac%e6%8d%a2%e6%88%90%e4%ba%86%e6%a0%91%e7%bb%93%e6%9e%84%e5%91%88%e7%8e%b0%e5%87%ba%e6%9d%a5%e3%80%82%ef%bc%88%e5%bb%ba%e8%ae%ae%e5%a4%a7%e5%ae%b6%e5%8a%a8%e6%89%8b%e7%8e%a9%e4%b8%80%e7%8e%a9%ef%bc%8c%e9%87%8c%e9%9d%a2%e4%bc%9a%e6%9c%89%e8%af%ad%e6%b3%95%e9%ab%98%e4%ba%ae%e5%92%8c%e4%bb%a3%e7%a0%81%e4%b8%8e%e6%a0%91%e4%b8%80%e4%b8%80%e5%8c%b9%e9%85%8d%e7%9a%84%e5%8a%9f%e8%83%bd%e3%80%82%e5%a6%82%e6%9e%9c%e6%9c%aa%e6%9d%a5%e4%bd%a0%e6%9c%89%e6%9c%ba%e4%bc%9a%e5%86%99%e4%b8%80%e4%ba%9b%e8%a7%a3%e9%87%8a%e5%99%a8%ef%bc%8c%e5%be%88%e5%8f%af%e8%83%bd%e4%bc%9a%e7%94%a8%e5%88%b0%e8%bf%99%e4%b8%aa%ef%bc%89%0a%e8%af%ad%e4%b9%89%e5%88%86%e6%9e%90%ef%bc%88Semantic%20Analysis%ef%bc%89%e6%98%af%e5%af%b9%e7%bb%93%e6%9e%84%e4%b8%8a%e6%ad%a3%e7%a1%ae%e7%9a%84%e6%ba%90%e7%a8%8b%e5%ba%8f%e8%bf%9b%e8%a1%8c%e4%b8%8a%e4%b8%8b%e6%96%87%e6%9c%89%e5%85%b3%e6%80%a7%e8%b4%a8%e7%9a%84%e5%ae%a1%e6%9f%a5%ef%bc%8c%e8%bf%9b%e8%a1%8c%e7%b1%bb%e5%9e%8b%e5%ae%a1%e6%9f%a5%e3%80%82%e6%af%94%e5%a6%82%e6%88%91%e4%bb%ac%e5%86%99%e4%ba%86%e7%b1%bb%e4%bc%bc%e8%bf%99%e6%a0%b7%e7%9a%84%e4%bb%a3%e7%a0%81%ef%bc%9a%0a1package%20main%202%203import%20%26%2334%3bfmt%26%2334%3b%204%205func%20main%28%29%20%7b%206%20var%20x%20int%20%3d%20%26%2334%3babc%26%2334%3b%207%20println%28x%29%208%7d%20%e4%bd%9c%e4%b8%ba%e4%b8%80%e4%b8%aa%e6%89%be%e8%8c%ac%e5%b0%8f%e8%83%bd%e6%89%8b%ef%bc%88%e5%bd%93%e7%84%b6%e4%b8%8d%e6%98%af%e4%b9%b0%e7%93%9c%ef%bc%89%ef%bc%8c%e5%8f%af%e4%bb%a5%e5%8f%91%e7%8e%b0%ef%bc%8c%e5%ad%97%e7%ac%a6%e4%b8%b2%20%26ldquo%3babc%26rdquo%3b%20%e6%98%af%e4%b8%8d%e8%83%bd%e8%b5%8b%e5%80%bc%e4%b8%ba%20int%20%e5%8f%98%e9%87%8f%20x%ef%bc%8c%e8%bf%99%e6%97%b6%e5%80%99%e6%88%91%e4%bb%ac%e7%9b%b4%e6%8e%a5%e7%bc%96%e8%af%91%20go%20build%20%e5%b0%b1%e4%bc%9a%e5%87%ba%e7%8e%b0%e5%a6%82%e4%b8%8b%e9%97%ae%e9%a2%98%ef%bc%9a" aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f&t=Go%20%e7%bf%bb%e5%b1%b1%e8%b6%8a%e5%b2%ad%e2%80%94%e2%80%94%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e5%9f%ba%e7%a1%80" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    <div id="toc">
      <nav id="TableOfContents"></nav>
    </div>
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Go 翻山越岭——编译原理基础
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2021-08-15 09:38:51 &#43;0800 CST" itemprop="datePublished">2021-08-15</time>
          
        </div>
        
        
        <div class="article-read-time">
          <i class="far fa-clock"></i>
          
          7 minute read
        </div>
        
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/go" rel="tag">Go</a>
            
        </div>
        
      </div>
    </header>

  

    <div class="content" itemprop="articleBody" style="width: 120%;margin-left: -10%;">
      <p>Go 程序，从源代码到可执行文件，通常要经过两个步骤：编译 → 链接。看似简单，但其中蕴藏着极大的能量，尤其在面对不能一时半会就解决的业务场景中，稍微深挖编译与链接的过程就有奇效。今天我们就来聊聊 “Go 语言中编译原理的基础”。</p>
<p>上期文章提到了 <strong>8 个常见 Go 业务场景</strong>，虽说都是业务场景，但在代码性能、数据结构转换和系统设计中偏细颗粒度的实践中我们通常感到茫然和繁琐。这是因为在平时开发中，编译器会自动帮我们屏蔽掉代码编译的过程，我们只用关注最后的 ELF 可执行文件。那么我们就来看看，编译器会帮我们做些什么工作，进一步理解我们所写的程序发生了什么样的转化。</p>
<h1 id="编译原理概述">编译原理概述</h1>
<p>我们可以把编译分为两个部分：编译器前端和编译器后端，如图所示：（这些都是我们软件工程专业课上的基础知识）</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MzRUv767TY1wicxlSz515XqKcibIoYHicxXHYuVQnibib4SWN9ZpsuBdLH0AvicQr0025TKnEN2PtlakkrAp2Wca0pXg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<p>**词法分析（Lexical Analysis）**是计算机科学中将字符序列转换为标记（token）序列的过程。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span>    println(<span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span>}
</code></pre></div><p>我们这里有一段简单代码，通过词法分析的方法，转化为 token 就是如下结果：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MzRUv767TY1wicxlSz515XqKcibIoYHicxXP7m8Ugza9KCQ93XPIN0qllyNLsTmIl06sBtbkvdiaQOaf0C6kA4IVQQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<p>我们在 Go 语言中没有分号，但其实像很多其他编程语言一样，是需要的。</p>
<p><strong>语法分析</strong>（syntactic analysis，又称 parsing）是根据某种给定的形式文法对由单词序列（如英语单词序列）构成的输入文本进行分析并确定其语法结构的一种过程。当我们对 Go 源代码进行词法分析后，会形成上图的 token 流，我们想要把这个再转换成汇编还是不行，还需要转换一步，转换为另一种数据结构——AST 语法树，才能够用计算机的逻辑去处理。</p>
<p><strong>抽象语法树</strong>（Abstract Syntax Tree，AST），或简称语法树（Syntax tree），是源代码语法结构的一种抽象表示。</p>
<p>这里提供一个在线编译 AST 的网站：https://astexplorer.net/，将上面的代码粘贴进来，就可以发现如下结果：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MzRUv767TY1wicxlSz515XqKcibIoYHicxXHiaNN4DHmAU0tHzvhAgJjibR0BlfUQRAZZ09tLyMKNjD189kicu6NktrA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<p>左边是代码，右边会把所有代码相应地转换成了树结构呈现出来。（建议大家动手玩一玩，里面会有语法高亮和代码与树一一匹配的功能。如果未来你有机会写一些解释器，很可能会用到这个）</p>
<p><strong>语义分析</strong>（Semantic Analysis）是对结构上正确的源程序进行上下文有关性质的审查，进行类型审查。比如我们写了类似这样的代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">x</span> <span style="color:#66d9ef">int</span> = <span style="color:#e6db74">&#34;abc&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span>    println(<span style="color:#a6e22e">x</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span>}
</code></pre></div><p>作为一个找茬小能手（当然不是买瓜），可以发现，字符串 &ldquo;abc&rdquo; 是不能赋值为 int 变量 x，这时候我们直接编译 go build 就会出现如下问题：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MzRUv767TY1wicxlSz515XqKcibIoYHicxXuJE6Z057MCia5QyK2PXBCKkMJ65NfQ3kvoEHvnGRic3wIKsRibIOHMHCQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<p>这个过程往往是在抽象语法树 AST 上做类型检查，不让你执行成功。</p>
<p>我们有了 AST 以后，要转换为汇编，还是不可以，还需要经过两步：中间代码（SSA）的生成与优化。</p>
<p>SSA（Single Static Assignment） 即静态单赋值，是一种中间表示形式。 之所以称之为单赋值，是因为每个名字在SSA中仅被赋值一次.</p>
<p>SSA是一种高效的数据流分析技术，目前几乎所有的现代编译器。其两大特点是：</p>
<ol>
<li>Static：每个变量只能赋值一次（因此应该叫做常理更合适）；</li>
<li>Single：每个表达式只能做一个简单运算，对于复杂的表达式要做拆分。</li>
</ol>
<p>我们有个例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">foo</span>(<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>    <span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">8</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span><span style="color:#f92672">*</span><span style="color:#ae81ff">4</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">b</span><span style="color:#f92672">*</span><span style="color:#a6e22e">c</span> <span style="color:#75715e">// 这句代码不能直接转化为汇编
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span style="color:#75715e"></span>}
</code></pre></div><p>我们来手动做一次简化：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">foo</span>(<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>    <span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">8</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>    <span style="color:#a6e22e">t0</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>    <span style="color:#a6e22e">t1</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">c</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span>    <span style="color:#a6e22e">t2</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">t0</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">t1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">t2</span> <span style="color:#75715e">// 这个就能直接转化为汇编
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span style="color:#75715e"></span>}
</code></pre></div><p>手动当然不现实，那么我们有什么方法能实现自动转 SSA 呢？</p>
<ol>
<li>在线查看 SSA 过程https://golang.design/gossa</li>
<li>GOSSAFUNC=funcname go build x.go</li>
</ol>
<p>OK，以上的编译原理是不是有点头大？从源代码到汇编，我们需要这么多过程，那么有没有什么工具能够直接从 Go 源代码到汇编呢？当然，也有：看好我施展魔法啦：https://godbolt.org/</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MzRUv767TY1wicxlSz515XqKcibIoYHicxXV2IvMOTUfdnN5gu92V8fmngLW89LpibUzZy0fGE9MficPb0oazLQQMEQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<p><strong>参考资料</strong></p>
<p>[1] 维基百科搜索关键词</p>
<p>[2] 从词法分析角度看 Go 代码的组成</p>
<p><a href="https://studygolang.com/articles/24419?fr=sidebar">https://studygolang.com/articles/24419?fr=sidebar</a></p>
<p>[3] 静态单赋值（SSA,Static Single-Assignment)</p>
<p><a href="https://blog.csdn.net/manok/article/details/89851085">https://blog.csdn.net/manok/article/details/89851085</a></p>

    </div>
  </article>

  
  





  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">主页</a></li>
         
          <li><a href="/posts">文章</a></li>
         
          <li><a href="/tags">归档</a></li>
         
          <li><a href="/about">关于</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents"></nav>
    </div>

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f&text=Go%20%e7%bf%bb%e5%b1%b1%e8%b6%8a%e5%b2%ad%e2%80%94%e2%80%94%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e5%9f%ba%e7%a1%80" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f&title=Go%20%e7%bf%bb%e5%b1%b1%e8%b6%8a%e5%b2%ad%e2%80%94%e2%80%94%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e5%9f%ba%e7%a1%80" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f&is_video=false&description=Go%20%e7%bf%bb%e5%b1%b1%e8%b6%8a%e5%b2%ad%e2%80%94%e2%80%94%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e5%9f%ba%e7%a1%80" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Go%20%e7%bf%bb%e5%b1%b1%e8%b6%8a%e5%b2%ad%e2%80%94%e2%80%94%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e5%9f%ba%e7%a1%80&body=Check out this article: http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f&title=Go%20%e7%bf%bb%e5%b1%b1%e8%b6%8a%e5%b2%ad%e2%80%94%e2%80%94%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e5%9f%ba%e7%a1%80" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f&title=Go%20%e7%bf%bb%e5%b1%b1%e8%b6%8a%e5%b2%ad%e2%80%94%e2%80%94%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e5%9f%ba%e7%a1%80" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f&name=Go%20%e7%bf%bb%e5%b1%b1%e8%b6%8a%e5%b2%ad%e2%80%94%e2%80%94%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e5%9f%ba%e7%a1%80&description=Go%20%e7%a8%8b%e5%ba%8f%ef%bc%8c%e4%bb%8e%e6%ba%90%e4%bb%a3%e7%a0%81%e5%88%b0%e5%8f%af%e6%89%a7%e8%a1%8c%e6%96%87%e4%bb%b6%ef%bc%8c%e9%80%9a%e5%b8%b8%e8%a6%81%e7%bb%8f%e8%bf%87%e4%b8%a4%e4%b8%aa%e6%ad%a5%e9%aa%a4%ef%bc%9a%e7%bc%96%e8%af%91%20%e2%86%92%20%e9%93%be%e6%8e%a5%e3%80%82%e7%9c%8b%e4%bc%bc%e7%ae%80%e5%8d%95%ef%bc%8c%e4%bd%86%e5%85%b6%e4%b8%ad%e8%95%b4%e8%97%8f%e7%9d%80%e6%9e%81%e5%a4%a7%e7%9a%84%e8%83%bd%e9%87%8f%ef%bc%8c%e5%b0%a4%e5%85%b6%e5%9c%a8%e9%9d%a2%e5%af%b9%e4%b8%8d%e8%83%bd%e4%b8%80%e6%97%b6%e5%8d%8a%e4%bc%9a%e5%b0%b1%e8%a7%a3%e5%86%b3%e7%9a%84%e4%b8%9a%e5%8a%a1%e5%9c%ba%e6%99%af%e4%b8%ad%ef%bc%8c%e7%a8%8d%e5%be%ae%e6%b7%b1%e6%8c%96%e7%bc%96%e8%af%91%e4%b8%8e%e9%93%be%e6%8e%a5%e7%9a%84%e8%bf%87%e7%a8%8b%e5%b0%b1%e6%9c%89%e5%a5%87%e6%95%88%e3%80%82%e4%bb%8a%e5%a4%a9%e6%88%91%e4%bb%ac%e5%b0%b1%e6%9d%a5%e8%81%8a%e8%81%8a%20%e2%80%9cGo%20%e8%af%ad%e8%a8%80%e4%b8%ad%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e7%9a%84%e5%9f%ba%e7%a1%80%e2%80%9d%e3%80%82%0a%e4%b8%8a%e6%9c%9f%e6%96%87%e7%ab%a0%e6%8f%90%e5%88%b0%e4%ba%86%208%20%e4%b8%aa%e5%b8%b8%e8%a7%81%20Go%20%e4%b8%9a%e5%8a%a1%e5%9c%ba%e6%99%af%ef%bc%8c%e8%99%bd%e8%af%b4%e9%83%bd%e6%98%af%e4%b8%9a%e5%8a%a1%e5%9c%ba%e6%99%af%ef%bc%8c%e4%bd%86%e5%9c%a8%e4%bb%a3%e7%a0%81%e6%80%a7%e8%83%bd%e3%80%81%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e8%bd%ac%e6%8d%a2%e5%92%8c%e7%b3%bb%e7%bb%9f%e8%ae%be%e8%ae%a1%e4%b8%ad%e5%81%8f%e7%bb%86%e9%a2%97%e7%b2%92%e5%ba%a6%e7%9a%84%e5%ae%9e%e8%b7%b5%e4%b8%ad%e6%88%91%e4%bb%ac%e9%80%9a%e5%b8%b8%e6%84%9f%e5%88%b0%e8%8c%ab%e7%84%b6%e5%92%8c%e7%b9%81%e7%90%90%e3%80%82%e8%bf%99%e6%98%af%e5%9b%a0%e4%b8%ba%e5%9c%a8%e5%b9%b3%e6%97%b6%e5%bc%80%e5%8f%91%e4%b8%ad%ef%bc%8c%e7%bc%96%e8%af%91%e5%99%a8%e4%bc%9a%e8%87%aa%e5%8a%a8%e5%b8%ae%e6%88%91%e4%bb%ac%e5%b1%8f%e8%94%bd%e6%8e%89%e4%bb%a3%e7%a0%81%e7%bc%96%e8%af%91%e7%9a%84%e8%bf%87%e7%a8%8b%ef%bc%8c%e6%88%91%e4%bb%ac%e5%8f%aa%e7%94%a8%e5%85%b3%e6%b3%a8%e6%9c%80%e5%90%8e%e7%9a%84%20ELF%20%e5%8f%af%e6%89%a7%e8%a1%8c%e6%96%87%e4%bb%b6%e3%80%82%e9%82%a3%e4%b9%88%e6%88%91%e4%bb%ac%e5%b0%b1%e6%9d%a5%e7%9c%8b%e7%9c%8b%ef%bc%8c%e7%bc%96%e8%af%91%e5%99%a8%e4%bc%9a%e5%b8%ae%e6%88%91%e4%bb%ac%e5%81%9a%e4%ba%9b%e4%bb%80%e4%b9%88%e5%b7%a5%e4%bd%9c%ef%bc%8c%e8%bf%9b%e4%b8%80%e6%ad%a5%e7%90%86%e8%a7%a3%e6%88%91%e4%bb%ac%e6%89%80%e5%86%99%e7%9a%84%e7%a8%8b%e5%ba%8f%e5%8f%91%e7%94%9f%e4%ba%86%e4%bb%80%e4%b9%88%e6%a0%b7%e7%9a%84%e8%bd%ac%e5%8c%96%e3%80%82%0a%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e6%a6%82%e8%bf%b0%20%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e6%8a%8a%e7%bc%96%e8%af%91%e5%88%86%e4%b8%ba%e4%b8%a4%e4%b8%aa%e9%83%a8%e5%88%86%ef%bc%9a%e7%bc%96%e8%af%91%e5%99%a8%e5%89%8d%e7%ab%af%e5%92%8c%e7%bc%96%e8%af%91%e5%99%a8%e5%90%8e%e7%ab%af%ef%bc%8c%e5%a6%82%e5%9b%be%e6%89%80%e7%a4%ba%ef%bc%9a%ef%bc%88%e8%bf%99%e4%ba%9b%e9%83%bd%e6%98%af%e6%88%91%e4%bb%ac%e8%bd%af%e4%bb%b6%e5%b7%a5%e7%a8%8b%e4%b8%93%e4%b8%9a%e8%af%be%e4%b8%8a%e7%9a%84%e5%9f%ba%e7%a1%80%e7%9f%a5%e8%af%86%ef%bc%89%0a%2a%2a%e8%af%8d%e6%b3%95%e5%88%86%e6%9e%90%ef%bc%88Lexical%20Analysis%ef%bc%89%2a%2a%e6%98%af%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%a7%91%e5%ad%a6%e4%b8%ad%e5%b0%86%e5%ad%97%e7%ac%a6%e5%ba%8f%e5%88%97%e8%bd%ac%e6%8d%a2%e4%b8%ba%e6%a0%87%e8%ae%b0%ef%bc%88token%ef%bc%89%e5%ba%8f%e5%88%97%e7%9a%84%e8%bf%87%e7%a8%8b%e3%80%82%0a1package%20main%202%203import%20%26%2334%3bfmt%26%2334%3b%204%205func%20main%28%29%20%7b%206%20println%281%20%2b%202%29%207%7d%20%e6%88%91%e4%bb%ac%e8%bf%99%e9%87%8c%e6%9c%89%e4%b8%80%e6%ae%b5%e7%ae%80%e5%8d%95%e4%bb%a3%e7%a0%81%ef%bc%8c%e9%80%9a%e8%bf%87%e8%af%8d%e6%b3%95%e5%88%86%e6%9e%90%e7%9a%84%e6%96%b9%e6%b3%95%ef%bc%8c%e8%bd%ac%e5%8c%96%e4%b8%ba%20token%20%e5%b0%b1%e6%98%af%e5%a6%82%e4%b8%8b%e7%bb%93%e6%9e%9c%ef%bc%9a%0a%e6%88%91%e4%bb%ac%e5%9c%a8%20Go%20%e8%af%ad%e8%a8%80%e4%b8%ad%e6%b2%a1%e6%9c%89%e5%88%86%e5%8f%b7%ef%bc%8c%e4%bd%86%e5%85%b6%e5%ae%9e%e5%83%8f%e5%be%88%e5%a4%9a%e5%85%b6%e4%bb%96%e7%bc%96%e7%a8%8b%e8%af%ad%e8%a8%80%e4%b8%80%e6%a0%b7%ef%bc%8c%e6%98%af%e9%9c%80%e8%a6%81%e7%9a%84%e3%80%82%0a%e8%af%ad%e6%b3%95%e5%88%86%e6%9e%90%ef%bc%88syntactic%20analysis%ef%bc%8c%e5%8f%88%e7%a7%b0%20parsing%ef%bc%89%e6%98%af%e6%a0%b9%e6%8d%ae%e6%9f%90%e7%a7%8d%e7%bb%99%e5%ae%9a%e7%9a%84%e5%bd%a2%e5%bc%8f%e6%96%87%e6%b3%95%e5%af%b9%e7%94%b1%e5%8d%95%e8%af%8d%e5%ba%8f%e5%88%97%ef%bc%88%e5%a6%82%e8%8b%b1%e8%af%ad%e5%8d%95%e8%af%8d%e5%ba%8f%e5%88%97%ef%bc%89%e6%9e%84%e6%88%90%e7%9a%84%e8%be%93%e5%85%a5%e6%96%87%e6%9c%ac%e8%bf%9b%e8%a1%8c%e5%88%86%e6%9e%90%e5%b9%b6%e7%a1%ae%e5%ae%9a%e5%85%b6%e8%af%ad%e6%b3%95%e7%bb%93%e6%9e%84%e7%9a%84%e4%b8%80%e7%a7%8d%e8%bf%87%e7%a8%8b%e3%80%82%e5%bd%93%e6%88%91%e4%bb%ac%e5%af%b9%20Go%20%e6%ba%90%e4%bb%a3%e7%a0%81%e8%bf%9b%e8%a1%8c%e8%af%8d%e6%b3%95%e5%88%86%e6%9e%90%e5%90%8e%ef%bc%8c%e4%bc%9a%e5%bd%a2%e6%88%90%e4%b8%8a%e5%9b%be%e7%9a%84%20token%20%e6%b5%81%ef%bc%8c%e6%88%91%e4%bb%ac%e6%83%b3%e8%a6%81%e6%8a%8a%e8%bf%99%e4%b8%aa%e5%86%8d%e8%bd%ac%e6%8d%a2%e6%88%90%e6%b1%87%e7%bc%96%e8%bf%98%e6%98%af%e4%b8%8d%e8%a1%8c%ef%bc%8c%e8%bf%98%e9%9c%80%e8%a6%81%e8%bd%ac%e6%8d%a2%e4%b8%80%e6%ad%a5%ef%bc%8c%e8%bd%ac%e6%8d%a2%e4%b8%ba%e5%8f%a6%e4%b8%80%e7%a7%8d%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e2%80%94%e2%80%94AST%20%e8%af%ad%e6%b3%95%e6%a0%91%ef%bc%8c%e6%89%8d%e8%83%bd%e5%a4%9f%e7%94%a8%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%9a%84%e9%80%bb%e8%be%91%e5%8e%bb%e5%a4%84%e7%90%86%e3%80%82%0a%e6%8a%bd%e8%b1%a1%e8%af%ad%e6%b3%95%e6%a0%91%ef%bc%88Abstract%20Syntax%20Tree%ef%bc%8cAST%ef%bc%89%ef%bc%8c%e6%88%96%e7%ae%80%e7%a7%b0%e8%af%ad%e6%b3%95%e6%a0%91%ef%bc%88Syntax%20tree%ef%bc%89%ef%bc%8c%e6%98%af%e6%ba%90%e4%bb%a3%e7%a0%81%e8%af%ad%e6%b3%95%e7%bb%93%e6%9e%84%e7%9a%84%e4%b8%80%e7%a7%8d%e6%8a%bd%e8%b1%a1%e8%a1%a8%e7%a4%ba%e3%80%82%0a%e8%bf%99%e9%87%8c%e6%8f%90%e4%be%9b%e4%b8%80%e4%b8%aa%e5%9c%a8%e7%ba%bf%e7%bc%96%e8%af%91%20AST%20%e7%9a%84%e7%bd%91%e7%ab%99%ef%bc%9ahttps%3a%2f%2fastexplorer.net%2f%ef%bc%8c%e5%b0%86%e4%b8%8a%e9%9d%a2%e7%9a%84%e4%bb%a3%e7%a0%81%e7%b2%98%e8%b4%b4%e8%bf%9b%e6%9d%a5%ef%bc%8c%e5%b0%b1%e5%8f%af%e4%bb%a5%e5%8f%91%e7%8e%b0%e5%a6%82%e4%b8%8b%e7%bb%93%e6%9e%9c%ef%bc%9a%0a%e5%b7%a6%e8%be%b9%e6%98%af%e4%bb%a3%e7%a0%81%ef%bc%8c%e5%8f%b3%e8%be%b9%e4%bc%9a%e6%8a%8a%e6%89%80%e6%9c%89%e4%bb%a3%e7%a0%81%e7%9b%b8%e5%ba%94%e5%9c%b0%e8%bd%ac%e6%8d%a2%e6%88%90%e4%ba%86%e6%a0%91%e7%bb%93%e6%9e%84%e5%91%88%e7%8e%b0%e5%87%ba%e6%9d%a5%e3%80%82%ef%bc%88%e5%bb%ba%e8%ae%ae%e5%a4%a7%e5%ae%b6%e5%8a%a8%e6%89%8b%e7%8e%a9%e4%b8%80%e7%8e%a9%ef%bc%8c%e9%87%8c%e9%9d%a2%e4%bc%9a%e6%9c%89%e8%af%ad%e6%b3%95%e9%ab%98%e4%ba%ae%e5%92%8c%e4%bb%a3%e7%a0%81%e4%b8%8e%e6%a0%91%e4%b8%80%e4%b8%80%e5%8c%b9%e9%85%8d%e7%9a%84%e5%8a%9f%e8%83%bd%e3%80%82%e5%a6%82%e6%9e%9c%e6%9c%aa%e6%9d%a5%e4%bd%a0%e6%9c%89%e6%9c%ba%e4%bc%9a%e5%86%99%e4%b8%80%e4%ba%9b%e8%a7%a3%e9%87%8a%e5%99%a8%ef%bc%8c%e5%be%88%e5%8f%af%e8%83%bd%e4%bc%9a%e7%94%a8%e5%88%b0%e8%bf%99%e4%b8%aa%ef%bc%89%0a%e8%af%ad%e4%b9%89%e5%88%86%e6%9e%90%ef%bc%88Semantic%20Analysis%ef%bc%89%e6%98%af%e5%af%b9%e7%bb%93%e6%9e%84%e4%b8%8a%e6%ad%a3%e7%a1%ae%e7%9a%84%e6%ba%90%e7%a8%8b%e5%ba%8f%e8%bf%9b%e8%a1%8c%e4%b8%8a%e4%b8%8b%e6%96%87%e6%9c%89%e5%85%b3%e6%80%a7%e8%b4%a8%e7%9a%84%e5%ae%a1%e6%9f%a5%ef%bc%8c%e8%bf%9b%e8%a1%8c%e7%b1%bb%e5%9e%8b%e5%ae%a1%e6%9f%a5%e3%80%82%e6%af%94%e5%a6%82%e6%88%91%e4%bb%ac%e5%86%99%e4%ba%86%e7%b1%bb%e4%bc%bc%e8%bf%99%e6%a0%b7%e7%9a%84%e4%bb%a3%e7%a0%81%ef%bc%9a%0a1package%20main%202%203import%20%26%2334%3bfmt%26%2334%3b%204%205func%20main%28%29%20%7b%206%20var%20x%20int%20%3d%20%26%2334%3babc%26%2334%3b%207%20println%28x%29%208%7d%20%e4%bd%9c%e4%b8%ba%e4%b8%80%e4%b8%aa%e6%89%be%e8%8c%ac%e5%b0%8f%e8%83%bd%e6%89%8b%ef%bc%88%e5%bd%93%e7%84%b6%e4%b8%8d%e6%98%af%e4%b9%b0%e7%93%9c%ef%bc%89%ef%bc%8c%e5%8f%af%e4%bb%a5%e5%8f%91%e7%8e%b0%ef%bc%8c%e5%ad%97%e7%ac%a6%e4%b8%b2%20%26ldquo%3babc%26rdquo%3b%20%e6%98%af%e4%b8%8d%e8%83%bd%e8%b5%8b%e5%80%bc%e4%b8%ba%20int%20%e5%8f%98%e9%87%8f%20x%ef%bc%8c%e8%bf%99%e6%97%b6%e5%80%99%e6%88%91%e4%bb%ac%e7%9b%b4%e6%8e%a5%e7%bc%96%e8%af%91%20go%20build%20%e5%b0%b1%e4%bc%9a%e5%87%ba%e7%8e%b0%e5%a6%82%e4%b8%8b%e9%97%ae%e9%a2%98%ef%bc%9a" aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=http%3a%2f%2fjupiterxue.com%2fposts%2fgo-top-day6-parse%2f&t=Go%20%e7%bf%bb%e5%b1%b1%e8%b6%8a%e5%b2%ad%e2%80%94%e2%80%94%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e5%9f%ba%e7%a1%80" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2021  JupiterXue 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">主页</a></li>
         
        <li><a href="/posts">文章</a></li>
         
        <li><a href="/tags">归档</a></li>
         
        <li><a href="/about">关于</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script>



</html>
